(this.webpackJsonpseisolo=this.webpackJsonpseisolo||[]).push([[0],{149:function(e,t){},155:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},338:function(e,t){},340:function(e,t){},384:function(e,t){},386:function(e,t){},418:function(e,t){},419:function(e,t){},424:function(e,t){},426:function(e,t){},433:function(e,t){},452:function(e,t){},516:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),i=n(79),r=n.n(i),c=(n(281),n(16)),s=(n(282),n(6)),l=Object(s.f)(),u=l.useStoreActions,d=(l.useStoreDispatch,l.useStoreState);var g=n(118),f=n(116),h=n(26),p=(n(294),n(295),a.a.forwardRef((function(e,t){var n,o=e.children,i=e.className,r=e.backgroundColor,c=e.column,s=e.padding,l=e.width,u=e.height,d=c?"flex-column ":"flex-row ",g={backgroundColor:null!==r&&void 0!==r?r:"rgba(0,0,0,0)",padding:s,borderRadius:"1em",width:null!==l&&void 0!==l?l:"100%",height:null!==u&&void 0!==u?u:"100%",backdropFilter:e.backgroundBlur?"blur(10px)":""};return a.a.createElement("div",{className:null!==(n="ui-section "+d+i)&&void 0!==n?n:"",style:g,ref:t},o)}))),v=n(114),m=n.n(v),b={sampleHeight:40,longestSample:5},y=window.innerWidth/12,O={startMode:"samples",sampleContainerWidth:2*y,sampleListWidth:5*y,sampleTagWidth:4*y,widgetWidth:300,widgetHeight:300,sampleCollectionGroupX:50,sampleCollectionRectHeight:window.innerHeight-100},w={primary:"#333333",secondary:"#FFC300",secondaryHover:"#b38900",primaryInactive:"#4c4c4c",transparent:"#0000",stroke:"black",borderRadius:10,textDark:"black"},S=n(14),E=a.a.memo((function(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),i=n[0],r=(n[1],Object(o.useState)({x:0,y:0})),s=Object(c.a)(r,2),l=(s[0],s[1],Object(o.useRef)(null)),u=(e.w,e.h),d=e.width,g=(e.fill,e.onMouseDown,e.onDragStart,e.onDragEnd,e.onMouseEnter,e.onDragMove,e.onMouseUp,e.draggable),f=e.id,h=e.svgPath,p=e.sample,v=e.x,m=e.y,b=e.scaleX;j(p.tags);return console.log(h),a.a.createElement(S.e,{x:v,y:m,ref:l,width:d,height:u,id:f,data:p.svgPath,scaleX:b,scaleY:i?1.1:1,fill:"red",draggable:g,stroke:i?"white":"black",strokeWidth:2})})),j=function(e){var t="blue",n="yellow";return e.includes("MR")&&(t="#3023AE",n="#53A0FD"),e.includes("LR")&&(t="#8c34eb",n="#d034eb"),e.includes("LR")&&(t="#ebd510",n="#eb8110"),e.includes("MIX")&&(t="#60eb10",n="#2a10eb"),[0,t,.5,n,1,t]},C=E,M=function(e){var t=e.sampleCollection;e.appMode;return console.log("RENDERING COLLECTION CONTAINER"),a.a.createElement(a.a.Fragment,null,a.a.createElement(S.f,{fill:w.stroke,height:window.innerHeight-100,width:O.sampleContainerWidth,stroke:w.primaryInactive,strokeWidth:2,cornerRadius:5}),a.a.createElement(S.h,{text:t.name}),t.samples.map((function(e,t){var n={x:20,y:b.sampleHeight*t+b.sampleHeight/2+20,sample:e,h:b.sampleHeight,width:10,scaleX:.5};return a.a.createElement(C,Object.assign({key:t},n))})))},T=a.a.memo(M),A=(n(155),function(e){var t=e.open,n=e.setOpen,i={width:"".concat(25,"%"),height:200,display:t?"flex":"none",backgroundColor:w.secondary,borderRadius:w.borderRadius,position:"absolute",left:"".concat(37.5,"%"),bottom:"25%",overflow:"hidden",color:w.textDark,padding:"1em"},c=Object(o.useRef)(null);!function(e,t){Object(o.useEffect)((function(){var n=function(n){var o=null===e||void 0===e?void 0:e.current;o&&!o.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}(c,(function(){n(!1),console.log("clicked outside")}));var s=m()("dialog",{hidden:!t,"dialog-display":t});return r.a.createPortal(a.a.createElement("div",{className:s,style:i,ref:c},a.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.")),document.getElementById("dialog-box"))}),I=n(5),L=n(7),R=function(){function e(){Object(I.a)(this,e),this.reaction=void 0,this.reaction="KOSIMA_NEUTRAL"}return Object(L.a)(e,[{key:"reactionImage",value:function(){return console.log(e.KosimaFolder+this.reaction+".svg"),e.KosimaFolder+this.reaction+".svg"}},{key:"baseImage",value:function(){return e.KosimaFolder+"KOSIMA_NEUTRAL.svg"}},{key:"setReaction",value:function(e){this.reaction=e}}]),e}();R.KosimaFolder="/Kosima/";var k=R,D=n(153),x=n.n(D);function N(e,t){var n=e.length,o={},a=[];t>n&&(t=n);for(var i=0;i<t;i++){var r=void 0;do{r=~~(Math.random()*n)}while(r in o);o[r]=null,a.push(e[r])}return a}function H(e,t,n,o,a){return(e-t)*(a-o)/(n-t)+o}var _=n(93),P=function(e){var t=e.kosima,n=e.setPopOverOpen,i=x()(t.baseImage()),r=Object(c.a)(i,1)[0];t.setReaction("KOSIMA_QUESTION");var s=x()(t.reactionImage()),l=Object(c.a)(s,1)[0];console.log(l);var u=(window.innerWidth-150)/2,d=window.innerHeight-150-50,g=150/9,f=Object(o.useState)({x:74.5,y:108.33333333333331}),h=Object(c.a)(f,2),p=h[0],v=(h[1],Object(o.useRef)(null)),m=Object(o.useState)({x:0,y:0}),b=Object(c.a)(m,2),y=b[0],O=b[1];Object(o.useEffect)((function(){}),[y]);var E=Object(o.useRef)(null);return a.a.createElement(S.d,{onMouseUp:function(e){n(!0)},onMouseLeave:function(e){E.current.to({x:p.x,y:p.y,easing:_.a.Easings.EaseOut})},onMouseMove:function(e){if(console.log(v),v.current){var t=v.current.getClientRect();console.log(t);var n=H(e.evt.pageX,t.x,t.x+t.width,-15,15);console.log(n),console.log(e),console.log(e.evt.x),console.log(e.evt.y);var o=H(e.evt.pageY,t.y,t.y+t.height,-15,15);O({x:n,y:o})}}},a.a.createElement(S.b,{x:u,y:d,ref:v},a.a.createElement(S.c,{width:150,height:150,image:r}),a.a.createElement(S.a,{ref:E,x:p.x+y.x,y:p.y+y.y,fill:"yellow",radius:.5*g,stroke:w.stroke})))},G=a.a.memo(P),F=n(271),Y=n.n(F),B=function e(t,n){Object(I.a)(this,e),this.samples=void 0,this.name=void 0,this.samples=t,this.name=n},W=function(e){var t=e.sampleCollections.length,n=Object(o.useRef)(null),i=window.innerHeight/2-(15*t+5*t)/2;return a.a.createElement(S.b,null,a.a.createElement(S.b,{ref:n,y:i},e.sampleCollections.map((function(t,n){var o={x:10,y:15*n+5},i={fill:e.activeCollection===t.name?w.secondary:w.primary,stroke:w.secondary,width:15,height:15,id:t.name,onMouseUp:e.onMouseUp};return a.a.createElement(S.b,Object.assign({key:n},o),a.a.createElement(S.f,i))}))))},U=function e(t,n){Object(I.a)(this,e),this.name=void 0,this.count=void 0,this.name=t,this.count=n},V=["FD","MR","HR","ST","LT","MIX","LR","E","M","FL","C","BACH","BARTOK","YSAYE","TONE","TRL","T"],K=function(){function e(t,n,o){Object(I.a)(this,e),this.w=void 0,this.h=void 0,this.root=void 0,this.gutter=void 0;this.w=t,this.h=n,this.gutter=null!==o&&void 0!==o?o:5,this.root={x:40,y:0,w:t,h:n,used:!1}}return Object(L.a)(e,[{key:"fit",value:function(e){var t,n,o;for(t=0;t<e.length;t++)if(o=e[t],n=this.findNode(this.root,o.w,o.h)){this.splitNode(n,o.w,o.h,o.id);o.fit=this.splitNode(n,o.w,o.h,o.id)}}},{key:"findNode",value:function(e,t,n){return e.used&&e.right&&e.down?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null}},{key:"splitNode",value:function(e,t,n,o){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e}}]),e}(),X=(window.innerWidth,function(e,t,n){return console.log("PACKING SAMPLES"),e.forEach((function(e){e.calculateDimensions(t,b.sampleHeight)})),new K(t,n,10).fit(e),e});var z=function(e){var t=e.activeTags,n=e.x,i=e.y,r=e.tag,s=(e.w,e.h,e.fill),l=e.radius,u=e.onMouseDown,d=e.onDragStart,g=e.onDragEnd,f=e.onMouseEnter,h=e.onDragMove,p=e.onMouseUp,v=e.draggable,m=e.id,b=(e.fit,e.stroke),y=e.strokeWidth;Object(o.useEffect)((function(){console.log(n,i),O.current.to({x:n,y:i})}),[n,i]);var O=Object(o.useRef)(null),E={onMouseDown:u,onDragStart:d,onDragEnd:g,onMouseEnter:f,onDragMove:h,onMouseUp:p,draggable:v,id:m},j=Object(o.useState)(t.includes(e.tag.name)),C=Object(c.a)(j,2),M=(C[0],C[1],Object(o.useState)(s)),T=Object(c.a)(M,2),A=(T[0],T[1]),I={strokeWidth:y},L=Object(o.useState)(!1),R=Object(c.a)(L,2),k=R[0],D=R[1],x=Object(o.useRef)(null);return Object(o.useEffect)((function(){t.includes(r.name)?A(w.secondary):A(s)}),[t]),Object(o.useEffect)((function(){x.current.to({radius:l,duration:.3,easing:_.a.Easings.EaseInOut})}),[l]),a.a.createElement(S.b,Object.assign({},E,{ref:O}),a.a.createElement(S.a,Object.assign({onMouseEnter:function(e){D(!0)},onMouseLeave:function(e){D(!1)},id:"tag_".concat(r.name,"_circle")},I,{stroke:0===r.count?w.primaryInactive:b,fill:0==r.count?w.primary:k?w.secondaryHover:w.stroke,ref:x})),a.a.createElement(S.h,{x:-l,fill:"white",text:r.name,align:"center",width:2*l}))},J=a.a.memo(z),q=function(e){var t=e.appMode,n=e.tags,i=e.removeTag,r=e.addTag,c=e.selectedTags,s=Object(o.useRef)(null);"samples"!==t?s.current&&s.current.children.forEach((function(e){e.to({opacity:0,duration:.1})})):s.current&&s.current.children.forEach((function(e){e.to({opacity:1,duration:.5})})),Object(o.useEffect)((function(){console.log(n)}),[n]);var l=n.map((function(e){return console.log(e.count),{tag:e,radius:H(e.count,0,170,20,80)}})),u=l.map((function(e){return e.radius})),d=200;console.log(u);var g=window.innerWidth-d-100,f=window.innerHeight/2,h=l.map((function(e,t){var n=d*Math.cos(Q(t,d,u)),o=d*Math.sin(Q(t,d,u));n+=g,o+=f;return{activeTags:c,tag:e.tag,key:t,radius:e.radius,fill:w.primary,x:n,y:o,stroke:w.secondary,strokeWidth:5,onMouseUp:function(t){console.log("got circle mouse up"),console.log(e),c.includes(e.tag.name)?i(e.tag.name):r(e.tag.name),console.log(c)}}}));return a.a.createElement(S.d,{ref:s},a.a.createElement(S.a,{x:g,y:f,radius:d,stroke:"red"}),h.map((function(e,t){return a.a.createElement(J,Object.assign({},e,{key:t}))})))};function Q(e,t,n){return e<1?0:(console.log(e,n[e],n[e-1],t,2*t/(n[e]+n[e-1]),Math.asin(2*t/(n[e]+n[e-1])),Math.asin(e),e-1),Q(e-1,t,n)+Math.asin((2*n[e]+2*n[e-1])/(2*t)))}var Z=n(33),$=a.a.memo((function(e){var t=e.sample,n=(e.ref,e.setRef,t.w),i=t.h,r=(t.fill,t.onMouseDown),s=(t.onDragStart,t.onDragEnd),l=t.onMouseEnter,u=t.onDragMove,d=t.onMouseUp,g=t.draggable,f=t.id,h=t.svgPath,p=t.fit,v=Object(o.useState)(!1),m=Object(c.a)(v,2),b=m[0],y=m[1],O=Object(o.useState)({x:0,y:0}),E=Object(c.a)(O,2),j=(E[0],E[1]),C=Object(o.useRef)(null),M=Object(o.useState)(!1),T=Object(c.a)(M,2),A=T[0],I=T[1],L=(H(t.w,0,2.5,0,400),p.x),R=p.y,k=ee(t.tags);return a.a.createElement(S.b,{x:L,y:R,width:n,height:i},a.a.createElement(S.e,{ref:C,width:n,height:i,id:f,data:h,scaleX:.2,scaleY:.6,fillPriority:"linear-gradient",onMouseUp:d,onMouseDown:function(e){console.log(e.target.absolutePosition()),j(e.target.absolutePosition()),r(e)},onDragStart:function(e){I(!0)},onDragEnd:function(e){I(!1),e.target.x(0),e.target.y(i/2),s(e)},onMouseEnter:function(e){l(e),y(!0)},onMouseLeave:function(e){l(e),y(!1)},fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:n,y:i},fillLinearGradientColorStops:k,onDragMove:function(e){u(e)},draggable:g,stroke:b?"white":"black",strokeWidth:2}),a.a.createElement(S.f,{strokeWidth:2,width:n,height:i,x:0,y:0}),function(){if(A)return a.a.createElement(S.e,{width:n,height:i,id:"ghost_".concat(f),y:i/2,data:h,scaleX:b?1.1:1,scaleY:b?1.1:1,fillPriority:"linear-gradient",stroke:w.secondary,strokeWidth:2})}())})),ee=function(e){var t="blue",n="yellow";return e.includes("MR")&&(t="#3023AE",n="#53A0FD"),e.includes("LR")&&(t="#8c34eb",n="#d034eb"),e.includes("LR")&&(t="#ebd510",n="#eb8110"),e.includes("MIX")&&(t="#60eb10",n="#2a10eb"),[0,t,.5,n,1,t]},te=$,ne=function(e){var t=e.appMode,n=e.samples,i=e.sampleTrayGroupRef,r=e.setSampleToClone,c=e.addToCurrentCollection,s=e.setIsDragging,l=e.dragLayerRef,u=e.sampleToClone,d=e.setHoveredId,g=e.setPlayingSample,f=e.stageY;Object(o.useEffect)((function(){console.log(n)}),[n]);var h=Object(o.useRef)(null),p={x:O.sampleContainerWidth+20,y:f,ref:h};Object(o.useEffect)((function(){h.current&&("editor"===t||"viewer"===t?h.current.to({opacity:0,duration:.1}):"samples"===t&&h.current.to({opacity:1,duration:.1}))}),[t]);var v=function(e){console.log("DOING ON RECT MOUSE DOWN")},m=function(e){console.log(n.filter((function(t){return t.filename===e.target.attrs.id}))[0]),g(n.filter((function(t){return t.filename===e.target.attrs.id}))[0])},b=Object(o.useMemo)((function(){return console.log(n),function(e){return e.map((function(e){var t=v,n=m,o=w.secondary;return Object(Z.a)(Object(Z.a)({},e),{},{fill:o,draggable:!0,onDragMove:function(e){i.current&&(oe(e.target.getClientRect(),i.current.getClientRect())?(i.current.children[0].setAttr("fill",w.secondaryHover),console.log("INTERSECTED WITH TRAY")):(i.current.children[0].setAttr("fill",w.transparent),console.log("NO INTERSECTION")))},onDragStart:function(e){r(e.target),e.target.moveTo(l.current),console.log(e.target)},onDragEnd:function(e){console.log("GOT DRAG END AT CANVAS"),s(!1),i.current&&(oe(e.target.getClientRect(),i.current.getClientRect())&&c(u.attrs.id),u&&i.current&&(i.current.children[0].setAttr("fill","red"),u.moveTo(h.current))),i.current.children[0].setAttr("fill",w.transparent),c(e.target.attrs.id)},onMouseEnter:function(e){return d(e.target.attrs.id)},onMouseDown:t,onMouseUp:n})}))}(n)}),[n]);return a.a.createElement(S.d,p,function(){if(b[0].fit)return b.map((function(e){return a.a.createElement(te,{key:e.id,sample:e})}))}())};function oe(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}var ae=function(e){var t=e.widgetContainerRef,n=e.appMode,i=Object(o.useRef)(null);Object(o.useEffect)((function(){t.current&&("samples"===n||"viewer"===n?(t.current.to({opacity:0,duration:.1}),i.current.to({opacity:0,duration:.1})):("editor"===n&&t.current.to({opacity:1,duration:.1}),"editor"===n&&i.current.to({opacity:1,duration:.1})))}),[n]);return a.a.createElement(a.a.Fragment,null,function(){var e=Array.from(Array(4).keys()),n=O.widgetWidth,o=O.widgetHeight,r=w.stroke,c=(window.innerWidth-e.length*n)/2,s=(window.innerHeight-o)/2,l=s-130,u={fill:w.secondary,width:4*n,height:2};return a.a.createElement(a.a.Fragment,null,a.a.createElement(S.b,{x:c,y:l,ref:i},a.a.createElement(S.f,Object.assign({x:0,y:0},u)),a.a.createElement(S.f,Object.assign({x:0,y:80},u))),a.a.createElement(S.b,{x:c,y:s,ref:t},e.map((function(e,t){var i=t*n;return a.a.createElement(S.f,{key:t,x:i,fill:r,width:n,height:o,stroke:w.secondary,cornerRadius:w.borderRadius})}))))}())},ie=function(e){var t=e.appMode,n=e.setAppMode,o={width:"2em",height:"2em",backgroundColor:w.secondary,borderRadius:"50%"};return a.a.createElement("div",{style:o,onClick:function(e){n("viewer"!==t?"viewer":"editor")}})},re=function(e){var t=e.appMode,n=e.setAppMode,o={width:"fit-content",height:"1em",display:"flex",borderRadius:w.borderRadius,position:"absolute",right:0,top:0,overflow:"hidden",color:w.textDark,padding:"1em",alignItems:"center",margin:"0.5em"};return r.a.createPortal(a.a.createElement("div",{style:o},a.a.createElement(ie,{setAppMode:n,appMode:t})),document.getElementById("navigation"))},ce=function(e){var t,n=e.activeTags,i=d((function(e){return e.samplesModel.samples})),r=Object(o.useRef)(),l=window.innerWidth/3,u=Object(o.useMemo)((function(){var e,t=i;n.length>0&&(t=t.filter((function(e){return n.every((function(t){return e.tags.includes(t)}))})),console.log(t));var o=0;(null===(e=(t=X(t,l,5e3).filter((function(e){return e.fit})))[0])||void 0===e?void 0:e.fit)&&(o=function(e,t){var n=new Map;return e.map((function(o){n.has(o[t])||n.set(o[t],e.filter((function(e){return e[t]==o[t]})))})),n}(i.map((function(e){return e.fit})).filter((function(e){return e})),"y").size);return{packed:t,rows:o}}),[i,n]),f=Object(o.useMemo)((function(){var e=u.packed.map((function(e){return e.tags})).reduce((function(e,t){return e.concat(t)})),t=new Map;V.map((function(n){t.has(n)||t.set(n,se(e,n))}));var n=V.map((function(e){return new U(e,t.get(e))}));return console.log(e),console.log(n),n}),[u]),h=Array.from(Array(10).keys()).map((function(e,t){return new B([],"Sample_Collection_".concat(t))})),p=new B(i.slice(1,6),"collection 1"),v=new B(i.slice(13,19),"collection 2"),m=new B([],"collection 3"),y=new B([],"collection 4"),E=new B([],"collection 5"),j=Object(s.j)((function(){var e;return{allTags:f,appMode:O.startMode,sampleCollections:[p,v,m,y,E],activeCollection:h[0],addToCurrentCollection:Object(s.b)((function(e,t){console.log("ADDING ".concat(t," TO CURRENT COLLECTION"));e.activeSamples.filter((function(e){return e.id===t}))[0];e.activeCollection.samples.push(e.activeSamples.filter((function(e){return e.id===t}))[0])})),sampleToClone:void 0,setSampleToClone:Object(s.b)((function(e,t){e.sampleToClone=t})),setActiveCollection:Object(s.b)((function(e,t){e.activeCollection=e.sampleCollections.filter((function(e){return e.name===t}))[0]})),availableTags:Object(s.d)([function(e){return e.activeSamples}],(function(e){var t=e.map((function(e){return e.tags})).reduce((function(e,t){return e.concat(t)})),n=new Map;return V.map((function(e){n.has(e)||n.set(e,se(t,e))})),V.map((function(e){return new U(e,n.get(e))}))})),selectedTags:[],addTag:Object(s.b)((function(e,t){e.selectedTags.push(t)})),removeTag:Object(s.b)((function(e,t){e.selectedTags=e.selectedTags.filter((function(e){return e!==t}))})),kosima:new k,hoveredId:"",playingSample:void 0,isDragging:!1,draggingId:"",packedSamples:u.packed,popOverOpen:!1,setPopOverOpen:Object(s.b)((function(e,t){e.popOverOpen=t})),activeSamples:Object(s.d)([function(e){return e.packedSamples},function(e){return e.selectedTags}],(function(e,t){var n=e.filter((function(e){return t.every((function(t){return e.tags.includes(t)}))}));return X(n,l,5e3)})),stageY:0,viewHeight:null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect().height,stageHeight:u.rows*b.sampleHeight,setStageHeight:Object(s.b)((function(e,t){e.stageHeight=t})),setViewHeight:Object(s.b)((function(e,t){e.viewHeight=t})),setStageY:Object(s.b)((function(e,t){console.log("view height ".concat(e.viewHeight)),console.log(e.stageY);var n=0-(e.stageHeight-e.viewHeight);t>0?(console.log(t),e.stageY<0&&(console.log("doing first"),e.stageY=Math.min(e.stageY+t,0),console.log(e.stageY))):e.stageY>n&&(console.log(e.stageY),e.stageY+=t),console.log(e.stageHeight)})),setAppMode:Object(s.b)((function(e,t){e.appMode=t})),setIsDragging:Object(s.b)((function(e,t){e.isDragging=t})),setDraggingId:Object(s.b)((function(e,t){e.draggingId=t})),setHoveredId:Object(s.b)((function(e,t){e.hoveredId=t})),setPlayingSample:Object(s.b)((function(e,t){e.playingSample=t}))}}),[u,i],(function(){return{devTools:!1}})),C=Object(c.a)(j,2),M=C[0],I=C[1],L={width:window.innerWidth,height:M.viewHeight,onWheel:function(e){console.log(e),e.evt.preventDefault(),I.setStageY(e.evt.deltaY)}},R=Object(o.useState)(null),D=Object(c.a)(R,2),x=D[0],N=(D[1],Object(o.useRef)(null));Object(o.useEffect)((function(){var e;I.setViewHeight(null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect().height),N.current.container().style.backgroundColor=w.primary}),[x]),Object(g.a)({keyCode:32,action:function(){"editor"===M.appMode?I.setAppMode("samples"):I.setAppMode("editor")},disabled:!1});var H=Object(o.useRef)(null),_=Object(o.useRef)(null),P=Object(o.useRef)(null),F=Object(o.useRef)(null),K=window.innerHeight-100,z=(window.innerHeight-K)/2;return Object(o.useEffect)((function(){if(console.log(M.appMode),F.current)if(F.current&&"editor"===M.appMode){var e=F.current.y(),t=F.current.x();F.current.height();_.current.to({x:t,y:e,opacity:1}),_.current.children[0].to({height:O.widgetHeight,width:O.widgetWidth})}else F.current&&"viewer"===M.appMode?_.current.to({opacity:0,duration:.1}):(z=(window.innerHeight-K)/2,_.current.to({x:O.sampleCollectionGroupX,y:(window.innerHeight-K)/2,opacity:1}),_.current.children[0].to({height:O.sampleCollectionRectHeight,width:O.widgetWidth}))}),[M.appMode]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{height:"100%",width:"100%"},ref:r,className:"outer-tray"},a.a.createElement(A,{open:M.popOverOpen,setOpen:function(e){return I.setPopOverOpen(e)}}),M.playingSample?a.a.createElement(Y.a,{playing:!0,height:0,width:0,progressInterval:1,onProgress:function(e){e.played,e.playedSeconds,e.loaded,e.loadedSeconds;null===x||void 0===x||x.fill("white"),console.log(M.playingSample)},url:null===(t=M.playingSample)||void 0===t?void 0:t.src}):a.a.createElement(a.a.Fragment,null),a.a.createElement(re,{setAppMode:function(e){return I.setAppMode(e)},appMode:M.appMode}),a.a.createElement(S.g,Object.assign({},L,{ref:N}),a.a.createElement(S.d,{ref:P,onDragStart:function(e){M.sampleToClone.moveTo(P.current)},onDragEnd:function(e){console.log(e.target),console.log(_)},onDragMove:function(e){var t,n;M.sampleToClone&&_.current&&(t=H.current.getClientRect(),(n=_.current.getClientRect()).x>t.x+t.width||n.x+n.width<t.x||n.y>t.y+t.height||n.y+n.height<t.y?(_.current.getChildren()[0].attrs.fill=w.primaryInactive,console.log("NO INTERSECTION")):(_.current.getChildren()[0].attrs.fill=w.secondaryHover,console.log("INTERSECTED WITH TRAY")))}}),a.a.createElement(S.d,null,a.a.createElement(ae,{widgetContainerRef:F,appMode:M.appMode}),a.a.createElement(W,{sampleCollections:M.sampleCollections,onMouseUp:function(e){I.setActiveCollection(e.target.attrs.id)},activeCollection:M.activeCollection.name}),a.a.createElement(S.b,{ref:_,height:K,y:z,x:O.sampleCollectionGroupX},a.a.createElement(T,{sampleCollection:M.activeCollection,appMode:M.appMode}))),a.a.createElement(ne,{appMode:M.appMode,samples:M.activeSamples,sampleTrayGroupRef:_,setSampleToClone:I.setSampleToClone,addToCurrentCollection:I.addToCurrentCollection,setIsDragging:I.setIsDragging,dragLayerRef:P,sampleToClone:M.sampleToClone,setHoveredId:I.setHoveredId,setPlayingSample:I.setPlayingSample,stageY:M.stageY}),a.a.createElement(q,{appMode:M.appMode,tags:M.availableTags,selectedTags:M.selectedTags,removeTag:I.removeTag,addTag:I.addTag}),a.a.createElement(G,{kosima:M.kosima,setPopOverOpen:I.setPopOverOpen}))))};function se(e,t){for(var n=0,o=0,a=e.length;o<a;o+=1)e[o]===t&&(n+=1);return n}var le,ue,de,ge,fe,he=function(e){var t=e.active,n=Object(s.j)((function(){return{tags:[],addTag:Object(s.b)((function(e,t){e.tags.push(t)})),removeTag:Object(s.b)((function(e,t){e.tags=e.tags.filter((function(e){return e!==t}))}))}})),i=Object(c.a)(n,2),r=i[0],l=(i[1],m()("sample-tray-container",{"sample-tray-hidden":t})),u=(Object(o.useRef)(),Object(o.useState)("none")),d=Object(c.a)(u,2),g=d[0];d[1];return Object(o.useEffect)((function(){console.log("setting tray filter to ".concat(g))}),[g]),a.a.createElement(p,{className:l},a.a.createElement(p,{column:!0,backgroundColor:"white",className:"sample-tray-inner-container"},a.a.createElement(ce,{activeTags:r.tags})))},pe=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(he,{active:!1}))},ve=function(){return a.a.createElement("section",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center",flexDirection:"column"}},a.a.createElement("h1",{style:{fontSize:"4em"}},"Seisolo.io"),a.a.createElement("div",null,a.a.createElement("p",{style:{maxWidth:"80ch"}},"SeiSolo.io is a multimedia web installation exploring classical and electronic music, aiming to create a unique and accessible way of engaging with both. It features a recorded solo violin recital, five commissioned remixes of the recital repertoire, and a web-based software for users to remix on their own."),a.a.createElement(f.b,{to:"/app"},a.a.createElement("img",{style:{maxWidth:"3em"},src:"".concat("","/MVNT Logo 1.svg")}))))},me=function(){var e=u((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),t=u((function(e){return e.compositionsModel.processCompositions})),n=u((function(e){return e.googleSheetsModel.fetchCompositionsSheet})),i=u((function(e){return e.googleSheetsModel.fetchSamplesSheet})),r=function(e){var t=Object(o.useState)(e),n=Object(c.a)(t,2),a=n[0],i=n[1];return[a,function(){return i(!a)}]}(!1),s=Object(c.a)(r,2),l=(s[0],s[1]);return Object(g.a)({keyCode:70,action:function(){l()},disabled:!1}),Object(o.useEffect)((function(){e(),t(),n(),i()}),[e]),a.a.createElement(f.a,null,a.a.createElement(h.a,{path:"/app",component:pe}),a.a.createElement(h.a,{path:"/",exact:!0,component:ve}))},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,518)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))},ye=n(17),Oe=n.n(ye),we=n(55);!function(e){e[e.SampleTraySample=0]="SampleTraySample",e[e.EDITOR=1]="EDITOR",e[e.PLACEHOLDER=2]="PLACEHOLDER",e[e.IFRAME=3]="IFRAME"}(le||(le={})),function(e){e[e.SAMPLE_TRAY=0]="SAMPLE_TRAY"}(ue||(ue={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC"}(de||(de={})),function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(ge||(ge={})),function(e){e.BACH_MOVEMENT_1="BACH_MOVEMENT_1",e.BACH_MOVEMENT_2="BACH_MOVEMENT_2",e.BACH_MOVEMENT_3="BACH_MOVEMENT_3A",e.BACH_MOVEMENT_4="BACH_MOVEMENT_4",e.BARTOK_MOVEMENT_1="BARTOK_MOVEMENT_1",e.BARTOK_MOVEMENT_2="BARTOK_MOVEMENT_2",e.YSAE_MOVEMENT_1="YSAE_MOVEMENT_1"}(fe||(fe={}));var Se,Ee,je=n(52);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(Se||(Se={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(Ee||(Ee={}));var Ce=function(){function e(t){Object(I.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(L.a)(e,[{key:"validate",value:function(e){var t,n,o=function(e){var t=[],n=e.target;try{var o;null===(o=n.contentWindow)||void 0===o||o.name}catch(a){if(!a.message.includes("cross-origin"))return[];console.log(a.message),t.push(Se.CROSS_ORIGIN)}return t}(e);console.log(o),(t=this.errors).push.apply(t,Object(je.a)(o)),console.log(this.errors);var a=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(Ee.MALFORMED_URL);return t}(this.url);(n=this.warnings).push.apply(n,Object(je.a)(a)),console.log(a)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){switch(n){case Se.CROSS_ORIGIN:t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));break;default:console.log("error did not match an error enum")}})),t}}]),e}();var Me=function(){function e(t){Object(I.a)(this,e),this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=de[t.interaction],this.isActive=!1,this.validator=new Ce(this.src),this.failed=!1}return Object(L.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}(),Te=[{i:"https://seisolo.io",x:0,y:0,w:1,h:1,static:!1},{i:"https://seisolo2.io",x:1,y:0,w:1,h:1,static:!1},{i:"https://seisolo3.io",x:2,y:0,w:1,h:1,static:!1},{i:"https://seisolo4.io",x:3,y:0,w:1,h:1,static:!1}],Ae={lg:Te,md:Te,sm:Te,xs:Te,xxs:Te};console.log(JSON.stringify(Ae));var Ie=Ae,Le=function(){function e(){Object(I.a)(this,e),this.events=void 0,this.currentStep=void 0;this.events=[],this.currentStep=0}return Object(L.a)(e,[{key:"addEditEvent",value:function(e){this.currentStep+=1,this.events.push(e)}},{key:"undo",value:function(){return console.log(this.currentStep),this.currentStep-=1,this.events[this.currentStep]}},{key:"redo",value:function(){return console.log(this.currentStep),this.currentStep+=1,this.events[this.currentStep]}}]),e}(),Re={availableCards:[],activeCards:[],currentLayout:Ie,appMode:ge.DISPLAY,history:new Le,manageViewModeChange:Object(s.h)((function(e,t){switch(console.log(t),e.setAppMode(t),t){case ge.EDIT:case ge.DISPLAY:case ge.CYCLE:break;default:console.log("reached default in set view mode thunk")}})),toggleViewMode:Object(s.h)((function(e,t,n){var o=n.getState;switch(console.log("toggling view mod "),o().appMode){case ge.EDIT:e.setAppMode(ge.DISPLAY);break;case ge.DISPLAY:e.setAppMode(ge.EDIT);break;case ge.CYCLE:break;default:console.log("reached default in set view mode thunk")}console.log(o().appMode)})),setCurrentLayout:Object(s.b)((function(e,t){e.currentLayout=t})),setAvailableCards:Object(s.b)((function(e,t){console.log("setting available cards"),e.availableCards=t})),setActiveCards:Object(s.b)((function(e,t){console.log("setting active cards"),console.log(t),e.activeCards=t})),setAppMode:Object(s.b)((function(e,t){console.log("setting view mode"),e.appMode=t})),onCardSheetLoadSuccess:Object(s.c)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){var n=t.payload.getSheetRows(0).map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new Me(e)}));console.log(n),e.availableCards=n,console.log(Object(s.g)(e.availableCards))})),onSetActiveLayout:Object(s.i)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(we.a)(Oe.a.mark((function e(t,n,o){var a,i,r,c;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.getState,i=n.payload.sources().filter((function(e){return"clock"!==e})),r=a().availableCards.map((function(e){return i.includes(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),c=a().availableCards.filter((function(e){return i.includes(e.sourceId)})),t.setAvailableCards(r),t.setActiveCards(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(s.h)((function(e,t,n){var o=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var a=o().activeCards,i=t.sourceId,r=a.map((function(e){return e.sourceId===i&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(r)})),onSwapCardContent:Object(s.i)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(we.a)(Oe.a.mark((function e(t,n,o){var a,i;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.getState,console.log("got swap card content"),console.log(n.payload),console.log(a().activeCards),(i=a().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=a().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(i),console.log(Object(s.g)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),onUndoHistory:Object(s.i)((function(e,t){return t.historyModel.setCurrentHistory}),function(){var e=Object(we.a)(Oe.a.mark((function e(t,n){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got undo"),console.log(n.payload),t.setCurrentLayout(n.payload),console.log(Object(s.g)(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onRedoHistory:Object(s.i)((function(e,t){return t.historyModel.setCurrentHistory}),function(){var e=Object(we.a)(Oe.a.mark((function e(t,n){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got redo"),console.log(n.payload),t.setCurrentLayout(n.payload),console.log(Object(s.g)(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},ke=n(47),De=n(117),xe=n.n(De),Ne=n(274),He=n.n(Ne),_e=function(){function e(){var t=this;Object(I.a)(this,e),this.collectSamplePoints=function(e,t){var n=e.duration,o=e.duration,a=H(o,0,2.5,100,400);console.log(o);for(var i=[],r=0;r<10;r++){var c=.1*r*n,s=e.channel(0),l=e.at_time(c),u=s.max_sample(l),d=r/10,g=d*a;console.log(d);var f=H(u,0,100,0,40);f+=10;var h={x:g,y:Math.round(f)};i.push(h)}var p=i.map((function(e){return[e.x,e.y]}));p.push([p[p.length-1][0],0]);var v=i.map((function(e){return[e.x,0-e.y]})).reverse(),m=[v[v.length-1][0],p[0][1]];v.push(m);var b=[].concat(Object(je.a)(p),Object(je.a)(v));return He.a.toPath(b,4,!0)},this.data=void 0,this.audioContext=void 0,this.getAudio=function(e){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(n){var o={audio_context:t.audioContext,array_buffer:n,scale:128};return new Promise((function(t,n){xe.a.createFromAudio(o,(function(o,a){o?(console.error("FAILED TO CREATE AUDIO FROM URL ".concat(e)),n(o)):t(a)}))}))}))},this.data=[],this.audioContext=new AudioContext}return Object(L.a)(e,[{key:"generateSVG",value:function(e){var t=this;return console.log(e.src),this.getAudio(e.src).then((function(n){var o=t.collectSamplePoints(n,e);return e.setPath(o),e})).catch((function(t){return e}))}}]),e}();var Pe=function(){function e(t,n){Object(I.a)(this,e),this.title=void 0,this.url=void 0,this.waveFormData=void 0,this.title=t,this.waveFormData,this.url=n}return Object(L.a)(e,[{key:"buildWaveform",value:function(){var e=this;return Ge(this.url).then((function(t){return e.waveFormData=t,new Promise((function(e,n){e(t)}))}))}}]),e}(),Ge=function(e){var t=new AudioContext;return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){var n={audio_context:t,array_buffer:e,scale:128};return new Promise((function(e,t){xe.a.createFromAudio(n,(function(n,o){n?t(n):e(o)}))}))}))},Fe=[function(){var e="".concat("","/")+"BACH2.mp3",t=new Pe("Bach Movement 2",e);return console.log(t),t}()],Ye=n(81),Be=n.n(Ye),We={compositions:Fe,processCompositions:Object(s.h)((function(e,t,n){var o=n.getState;console.log("processing compositions");var a=o(),i=Object(Z.a)({},a).compositions;console.log(i);var r=new _e,c=i.map((function(e){return r.getAudio(e.url)}));Promise.allSettled(c).then((function(t){for(var n=[],o=0;o<t.length;o++){var a=t[o],r=Object(je.a)(i)[o];console.log(a),"fulfilled"==a.status&&(r.waveFormData=a.value,n.push(r))}console.log("SETTINGS COMPOSITOINS"),console.log(n),e.setCompositions(n),e.downloadAnalysis()}))})),setCompositions:Object(s.b)((function(e,t){console.log("setting samples"),e.compositions=t})),downloadAnalysis:Object(s.b)((function(e){console.log(e.compositions[0].waveFormData.toJSON().data);var t=e.compositions.map((function(e){return{title:e.title,url:e.url,data:JSON.stringify(e.waveFormData)}})),n=Be.a.unparse(t);console.log(t[0].data.length);new Blob([n],{type:"text/csv;charset=utf-8;"})}))},Ue={key:"1eq33_1yJS6EZjqBvxWgL7nDP0OxC8bMdJJqU7Akp_3E",sheet_number:1},Ve=n(275),Ke=function(){function e(t,n,o){Object(I.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=o}return Object(L.a)(e,[{key:"getSheetRows",value:function(e){return this.sheets[e]}},{key:"loadSheets",value:function(e,t){var n=new Ve.GoogleSpreadsheet(e);n.useApiKey(t);var o=[];return n.loadInfo().then((function(){return n.sheetsByIndex.forEach((function(e){var t=e.getRows();console.log(t),o.push(t)})),o}))}}]),e}(),Xe={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,samplesSheet:[],compositionsSheet:void 0,fetchCompositionsSheet:Object(s.h)(function(){var e=Object(we.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("FETCHING COMPOSITIONS SHEET"),n=Je("/TEST_ANALYSIS.csv"),ze(n,(function(e){t.setCompositionsSheet(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchSamplesSheet:Object(s.h)(function(){var e=Object(we.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Fetching Samples"),console.log("USING PREPROCESSED SAMPLE SHEET"),n=Je("/CLIPS_4.csv"),ze(n,(function(e){t.setSamplesSheet(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(s.h)(function(){var e=Object(we.a)(Oe.a.mark((function e(t){return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke.prototype.loadSheets(Ue.key,"AIzaSyBo7S3o_RHuyBnG3Z7ywlvz3FbtKU9n0MQ").then((function(e){Promise.all(e).then((function(e){var n=new Ke("DSC App",Ue.key,e);console.log(n),t.setAppGoogleSheetData(n)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(s.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(s.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(s.b)((function(e,t){e.layoutDataGoogleSheet=t})),setCompositionsSheet:Object(s.b)((function(e,t){t.data=t.data})),setSamplesSheet:Object(s.b)((function(e,t){e.samplesSheet=t}))},ze=function(e,t){Be.a.parse(e,{download:!0,header:!0,complete:function(e){console.log(e),t(e)}})},Je=function(e){return e.endsWith(".csv")||console.error("Failed to load csv, wrong extension (not .csv)"),""+e},qe={history:new Le,undoHistory:Object(s.h)((function(e,t,n){var o=n.getState;e.undoIt(),e.setCurrentHistory(o().history.undo())})),undoIt:Object(s.b)((function(e){e.history.undo(),console.log(e.history.currentStep)})),redoIt:Object(s.b)((function(e){e.history.redo(),console.log(e.history.currentStep)})),setCurrentHistory:Object(s.b)((function(e,t){console.log(t)})),addEditHistory:Object(s.b)((function(e,t){console.log("adding edit history"),console.log(t);var n=JSON.stringify(t);console.log(n),e.history.addEditEvent(t)}))},Qe=(n(276),function(){function e(t){Object(I.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.layout=void 0,this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]);var n=JSON.parse(t.layout);this.layout=n}return Object(L.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var o,a=Object(c.a)(n[t],2),i=a[0],r=a[1],s=Object(ke.a)(r.entries());try{for(s.s();!(o=s.n()).done;){var l=Object(c.a)(o.value,2),u=l[0];l[1].i==e.targetId&&(r[u].i=e.sourceId)}}catch(d){s.e(d)}finally{s.f()}this.layout[i]=r}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var o,a=Object(c.a)(n[t],2),i=a[0],r=a[1],s=Object(ke.a)(r.entries());try{for(s.s();!(o=s.n()).done;){var l=Object(c.a)(o.value,2);l[0],l[1];this.layout[i]=r.filter((function(t){return t.i!==e.sourceId}))}}catch(u){s.e(u)}finally{s.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout);for(var n=0,o=Object.entries(this.layout);n<o.length;n++){var a=Object(c.a)(o[n],2),i=a[0],r=(a[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[i].push(r)}}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}}]),e}());var Ze={activeLayout:void 0,externalLayouts:[],bufferLayout:Ie,tempLayout:Ie,onSetAppGoogleSheetData:Object(s.i)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){var n=t.payload.getSheetRows(1).map((function(e){return{title:e.title,author:e.author,timestamp:e.timestamp,layout:e.layout,interaction:e.interaction}})).map((function(e){return new Qe(e)})),o=n[0];o.layout=Ie,e.setActiveLayout(o),e.setExternalLayouts(n),e.setBufferLayout(n[0].layout)})),onToggleViewModeListener:Object(s.i)((function(e,t){return t.appModel.toggleViewMode}),(function(e,t,n){var o=n.getState,a=n.getStoreState;console.log("listened to on toggle view mode in layout model, setting layout from buffer");var i=o().activeLayout,r=o().bufferLayout;a().appModel.appMode===ge.DISPLAY&&(console.log("IT WAS IN DISPLAY MODE"),(null===i||void 0===i?void 0:i.layout)&&(i.layout=r,e.setActiveLayout(i)))})),setActiveLayout:Object(s.b)((function(e,t){e.activeLayout=t})),setExternalLayouts:Object(s.b)((function(e,t){console.log("setting external layouts"),e.externalLayouts=t})),swapCardContent:Object(s.h)((function(e,t,n){var o=n.getState,a=n.getStoreState,i=(n.getStoreActions,a(),o().activeLayout);if(i){var r=o().bufferLayout;i.layout=r,i.swapCard(t),e.setActiveLayout(i)}})),deleteCard:Object(s.h)((function(e,t,n){var o=n.getState;n.getStoreState,n.getStoreActions;console.log("deleting card at layotus model"),console.log(t);o().activeLayout;console.log("got here");var a=o().activeLayout;if(a){var i=o().bufferLayout;a.layout=i,a.removeCard(t),e.setActiveLayout(a)}})),addCard:Object(s.h)((function(e,t,n){var o=n.getState,a=n.getStoreState;console.log("adding card"),console.log(t);var i=a().appModel.availableCards,r=t.sourceId,c=t.targetPosition,l=i.find((function(e){return e.sourceId==r})),u=o().activeLayout;if(u&&l){var d=o().bufferLayout;console.log(Object(s.g)(d)),u.setGridLayout(d),null===u||void 0===u||u.addCard(l,c),e.setActiveLayout(u),console.log(l)}})),registerCardLoadFailure:Object(s.h)((function(e,t,n){var o=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var a=o().activeLayout;a&&a.failCard(t)})),setBufferLayout:Object(s.b)((function(e,t){console.log("setting buffer layout"),console.log(t),e.bufferLayout=t})),setTempLayout:Object(s.b)((function(e,t){console.log("setting buffer layout"),console.log(t),e.tempLayout=t})),updateLayout:Object(s.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),console.log(n.layout),e.activeLayout=n)}))},$e={data:[],setData:Object(s.b)((function(e,t){e.data=t}))},et=function(){function e(t){var n=this;Object(I.a)(this,e),this.id=void 0,this.src=void 0,this.tags=void 0,this.svgPath=void 0,this.filename=void 0,this.length=void 0,this.composition=void 0,this.startTime=void 0,this.endTime=void 0,this.w=void 0,this.h=void 0,this.konvaObject=void 0,this.fit=void 0,this.setPath=function(e){n.svgPath=e};var o=t.filename,a=t.tags,i=t.composition,r=(t.starTime,t.endTime,t.hour,t.svgPath),c=t.length,s="".concat("","/Clips/")+o,l=new Date("1995-12-17T03:24:00"),u=new Date("1995-12-17T03:24:01");this.id=o,this.src=s,this.tags=a.split(","),this.startTime=l,this.endTime=u,this.composition=i,this.filename=o,this.svgPath=r,this.length=c,this.konvaObject=void 0,this.w=void 0,this.h=void 0,this.fit=void 0}return Object(L.a)(e,[{key:"calculateDimensions",value:function(e,t){this.w=H(this.length,0,6.5,0,e-0),this.h=t}}]),e}(),tt=["DNB_BREAK_134-1.wav","Samples/s1.wav"],nt=function(e){for(var t=[],n=(new Date("1995-12-17T03:24:00"),new Date("1995-12-17T03:24:01"),0);n<e;n++){var o="".concat("","/")+N(tt,1)[0],a={composition:"placeHolderSample_".concat(n),starTime:"1995-12-17T03:24:00",endTime:"1995-12-17T03:24:01",tags:"MR, FD",date:"2021-09-24",hour:"222332",svgPath:"",length:1,filename:o},i=(N(V,3),new et(a));t.push(i)}return t}(30),ot={samples:nt,draggingSample:nt[0].id,onSetSamplesSheets:Object(s.i)((function(e,t){return t.googleSheetsModel.setSamplesSheet}),(function(e,t){console.log(t.payload);var n=t.payload,o=n.map((function(e){return new et(e)}));e.setSamples(o)})),processSamples:Object(s.h)((function(e,t,n){var o=n.getState;console.log("processing samples");var a=o(),i=Object(Z.a)({},a).samples;console.log(i);var r=new _e,c=i.map((function(e){return r.generateSVG(e)}));Promise.allSettled(c).then((function(t){var n,o=[],a=Object(ke.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;"fulfilled"===i.status&&o.push(i.value)}}catch(r){a.e(r)}finally{a.f()}e.setSamples(o)})),console.log(c)})),loadSamples:Object(s.h)((function(e){console.log("processing samples")})),setSamples:Object(s.b)((function(e,t){console.log("setting samples"),e.samples=t})),setDraggingSample:Object(s.b)((function(e,t){console.log("setting samples"),e.draggingSample=t}))},at={appModel:Re,historyModel:qe,layoutsModel:Ze,googleSheetsModel:Xe,samplesModel:ot,compositionsModel:We,logModel:$e},it=n(277),rt=n.n(it);var ct=Object(s.e)(at,{devTools:!1,middleware:[rt.a]});r.a.render(a.a.createElement(s.a,{store:ct},a.a.createElement(me,null)),document.getElementById("root")),be()}},[[516,1,2]]]);
//# sourceMappingURL=main.f7857fa1.chunk.js.map