(this.webpackJsonpseisolo=this.webpackJsonpseisolo||[]).push([[0],{184:function(e,t){},195:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},351:function(e,t,n){},352:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},408:function(e,t,n){},464:function(e,t){},466:function(e,t){},499:function(e,t){},501:function(e,t){},533:function(e,t){},534:function(e,t){},539:function(e,t){},541:function(e,t){},548:function(e,t){},567:function(e,t){},629:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(51),i=n.n(r),c=(n(351),n(15)),s=(n(352),n(18)),l=n(43),u=n(22),d=n.n(u),f=n(16),m=("".concat("","/overandunder (infinity).wav"),"".concat("","/Headshots/Diaspoura.jpg")),h="".concat("","/Headshots/Pacific.jpg"),g="".concat("","/Headshots/Contour.jpg"),p="".concat("","/Tracks/1.wav"),v="".concat("","/Tracks/overandunder (infinity).mp3"),y="".concat("","/Tracks/Kontour_Remix_16.mp3"),b=("".concat("","/Tracks/Bach Mov 2.wav"),"".concat("","/Tracks/Bartok Mov 1.wav"),"".concat("","/Tracks/Ysaye_AUDIO.mp3")),w="".concat("","/Headshots/ROTOSCOPE_TEST_1.mp4"),E=[{artist:"Diaspoura",title:"Diaspoura Track",link:"https://diaspoura.bandcamp.com/",src:p,about:"*A young Jeronimo gets a fly caught in his eye and spends the week at home. Each morning he wakes, left eye patched and crusted shut with pus, to the sound of parents knocking at the door with a fresh set of tweezers, towels, and medic grade eye solution. He lies in bed struggling to open his left eye as he dreads the coming pry of the lid for removal of yet another fly limb. These songs track Jeronimo's journey back to dual-eyed sight*",visualType:"image",visual:m,playing:!1,connections:[{target:"Ysa\xe9",description:"Connects in this way"}],category:"remix"},{artist:"Pacific Yew",title:"overandunder (infinity)",link:"https://nomad1.bandcamp.com/",src:v,about:'Going through the files I found myself wanting to keep their integrity as much as possible, and as a result found myself playing with very subtle pitch corrections, and spending time finding phrases and bits that felt organic in reference to a melody I wrote on rhodes piano. Pulling samples from two completely different pieces was a really interesting experiment. I found Ysa\xe9\'s "Ballade" and Bart\xf3k\'s "Presto" to have the most favorable parts for the comp. Their usage of such abstract melody and the players spotless technique made them resonate in a way that gave me all the inspiration I needed to write the progression. Towards the end I tried my hand at a solo using only phrasing from the violin audio. Although the overall placement of the violin alongside the other instruments in the piece throughout tends to be a more supportive role, I wanted to give it a way to stand out. It never fails to blow my mind when creating circumstances around the musical process produces such beautiful and bizarre results. I feel I may have never attempted such a thing, had this opportunity not been present. This will most certainly have lasting effects on my creative process.',visualType:"image",visual:h,playing:!1,connections:[{target:"Ysa\xe9",description:"Connects in this way"}],category:"remix"},{artist:"Contour",title:"Revolving Melody",link:"https://diaspoura.bandcamp.com/",src:y,about:"The way i approached the track was finding a melodic section of one of the pieces to build around to create a full piece that plays with repetition as a vehicle of composition while also facilitating space for improvisation. I chose the melodia movement of the Bart\xf3k piece because the balance of dissonance/harmony in that particular one stood out to me. I used delay and looping to kind of simulate the idea of an ensemble playing the section i chose and play with the intersection of production/affectation and composing in the traditional sense and then worked from there.",visualType:"image",visual:g,playing:!1,connections:[{target:"Ysa\xe9",description:"Connects in this way"}],category:"remix"},{artist:"Vivek Menon",title:"Bart\xf3k",src:b,about:"about Bart\xf3k",visualType:"video",visual:w,playing:!1,connections:[{target:"Ysa\xe9",description:"Connects in this way"}],category:"recital"},{artist:"Vivek Menon",title:"Bach",src:b,about:"about Bach",visualType:"video",visual:w,playing:!1,connections:[{target:"Ysa\xe9",description:"Connects in this way"}],category:"recital"},{artist:"Vivek Menon",title:"Ysa\xe9",src:b,about:"about Ysa\xe9",visualType:"video",visual:w,playing:!1,connections:[{target:"Bach",description:"Connects in this way"}],category:"recital"}],O=Object(f.f)(),j=O.useStoreActions,x=(O.useStoreDispatch,O.useStoreState),C=Object(f.f)(),S=C.useStoreActions,T=(C.useStoreDispatch,C.useStoreState);function k(){var e=S((function(e){return e.setAppMode})),t=T((function(e){return e.appMode})),n=Object(a.useState)(t),o=Object(c.a)(n,2),r=o[0],i=o[1];return Object(a.useEffect)((function(){console.log(t),i(t)}),[t]),{setAppMode:e,appMode:r}}function M(){var e=T((function(e){return e.currentTrack})),t=S((function(e){return e.setCurrentTrack})),n=Object(a.useRef)(),o=S((function(e){return e.setIsPlaying})),r=T((function(e){return e.isPlaying})),i=Object(a.useRef)(null),s=function(e){console.log(e.target);var t=e.target.id.split("_")[1],n=E.indexOf(E.filter((function(e){return e.title===t}))[0]);l(E[n+1])};Object(a.useEffect)((function(){var t=E.map((function(e){return"audio_"+e.title})).map((function(e){return document.getElementById(e)})).filter((function(e){return null!==e}));return n.current=t,n.current.forEach((function(e){e.addEventListener("ended",s)})),i.current=A(e),function(){n.current.forEach((function(e){e.removeEventListener("ended",s)}))}}),[]);var l=function(e){n.current&&n.current.forEach((function(t){t.id==="audio_"+e.title?t.play():t.pause()})),t(e.title),o(!0)},u=Object(a.useState)(e),d=Object(c.a)(u,2),f=d[0],m=d[1],h=Object(a.useState)(e.category),g=Object(c.a)(h,2),p=g[0],v=g[1],y=Object(a.useState)("recital"===e.category),b=Object(c.a)(y,2),w=b[0],O=b[1],j=Object(a.useState)(A(e)),x=Object(c.a)(j,2),C=x[0],k=x[1],M=Object(a.useState)(0),R=Object(c.a)(M,2),I=R[0],D=R[1],L=Object(a.useState)(!1),N=Object(c.a)(L,2),_=N[0],P=N[1];Object(a.useCallback)((function(e){}),[]);Object(a.useEffect)((function(){m(e),v(e.category),O("recital"===f.category),k(A(f)),i.current=A(f),i.current&&D(i.current.duration)}),[e]),Object(a.useEffect)((function(){P(r)}),[r]);var F=E[0];return{currentTrack:f,setCurrentTrack:t,playTrack:l,pauseTrack:function(e){n.current&&n.current.forEach((function(t){t.id==="audio_"+e.title&&t.pause()})),o(!1)},isPlaying:_,currentAudioRef:i,currentAudio:C,currentDuration:I,trackCategory:p,isRecital:w,startingTrack:F}}var R=function(e){var t=T((function(e){return e.currentTrack})),n=Object(a.useState)(t.title===e.title),o=Object(c.a)(n,2),r=o[0],i=o[1];return Object(a.useEffect)((function(){e.title===t.title?i(!0):i(!1)}),[t]),r},A=function(e){return document.getElementById("audio_"+e.title)};function I(e){var t=Object(a.useState)(e),n=Object(c.a)(t,2),o=n[0],r=n[1];return[o,function(){return r(!o)}]}function D(e,t,n){var o=Object(a.useRef)();Object(a.useEffect)((function(){var a=(null===n||void 0===n?void 0:n.current)||window;if(a&&a.addEventListener){o.current!==t&&(o.current=t);var r=function(e){null!==o&&void 0!==o&&o.current&&o.current(e)};return a.addEventListener(e,r),function(){a.removeEventListener(e,r)}}}),[e,n,t])}var L=n(145),N=n(342),_=n(40),P=(n(364),n(365),o.a.forwardRef((function(e,t){var n,a=e.children,r=e.className,i=e.backgroundColor,c=e.column,s=e.padding,l=e.width,u=e.height,d=c?"flex-column ":"flex-row ",f={backgroundColor:null!==i&&void 0!==i?i:"rgba(0,0,0,0)",padding:s,borderRadius:"1em",width:null!==l&&void 0!==l?l:"100%",height:null!==u&&void 0!==u?u:"100%",backdropFilter:e.backgroundBlur?"blur(10px)":""};return o.a.createElement("div",{className:null!==(n="ui-section "+d+r)&&void 0!==n?n:"",style:f,ref:t},a)}))),F=n(70),H=n.n(F),B={sampleHeight:40,longestSample:5},U=window.innerWidth/12,G={startMode:"samples",sampleContainerWidth:2*U,sampleListWidth:5*U,sampleTagWidth:4*U,widgetWidth:300,widgetHeight:300,sampleCollectionGroupX:50,sampleCollectionRectHeight:window.innerHeight-100},Y={primary:"#9e9e9e",primaryDark:"#1f1f1f",primaryMedium:"rgba(100, 100, 100, 255)",secondary:"#fff200",secondaryHover:"#b38900",primaryInactive:"#4c4c4c",transparent:"#0000",stroke:"rgba(0,0,0,0)",border:"2px solid black",borderRadius:10,textDark:"black",text:"white",shadow:"5px 5px 15px 5px #000000",primaryFont:"NeueMetana-Bold",titleFont:"16rem",bigFont:"3.5vw",mediumFont:"2.5vw"},W=n(26),V=o.a.memo((function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=(n[1],Object(a.useState)({x:0,y:0})),s=Object(c.a)(i,2),l=(s[0],s[1],Object(a.useRef)(null)),u=(e.w,e.h),d=e.width,f=(e.fill,e.onMouseDown,e.onDragStart,e.onDragEnd,e.onMouseEnter,e.onDragMove,e.onMouseUp,e.draggable),m=e.id,h=e.svgPath,g=e.sample,p=e.x,v=e.y,y=e.scaleX;z(g.tags);return console.log(h),o.a.createElement(W.e,{x:p,y:v,ref:l,width:d,height:u,id:m,data:g.svgPath,scaleX:y,scaleY:r?1.1:1,fill:"red",draggable:f,stroke:r?"white":"black",strokeWidth:2})})),z=function(e){var t="blue",n="yellow";return e.includes("MR")&&(t="#3023AE",n="#53A0FD"),e.includes("LR")&&(t="#8c34eb",n="#d034eb"),e.includes("LR")&&(t="#ebd510",n="#eb8110"),e.includes("MIX")&&(t="#60eb10",n="#2a10eb"),[0,t,.5,n,1,t]},X=V,K=function(e){var t=e.sampleCollection;e.appMode;return console.log("RENDERING COLLECTION CONTAINER"),o.a.createElement(o.a.Fragment,null,o.a.createElement(W.f,{fill:Y.stroke,height:window.innerHeight-100,width:G.sampleContainerWidth,stroke:Y.primaryInactive,strokeWidth:2,cornerRadius:5}),o.a.createElement(W.h,{text:t.name}),t.samples.map((function(e,t){var n={x:20,y:B.sampleHeight*t+B.sampleHeight/2+20,sample:e,h:B.sampleHeight,width:10,scaleX:.5};return o.a.createElement(X,Object.assign({key:t},n))})))},J=o.a.memo(K),q=(n(195),function(e){var t=e.open,n=e.setOpen,r={width:"".concat(25,"%"),height:200,display:t?"flex":"none",backgroundColor:Y.secondary,borderRadius:Y.borderRadius,position:"absolute",left:"".concat(37.5,"%"),bottom:"25%",overflow:"hidden",color:Y.textDark,padding:"1em"},c=Object(a.useRef)(null);!function(e,t){Object(a.useEffect)((function(){var n=function(n){var a=null===e||void 0===e?void 0:e.current;a&&!a.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}(c,(function(){n(!1),console.log("clicked outside")}));var s=H()("dialog",{hidden:!t,"dialog-display":t});return i.a.createPortal(o.a.createElement("div",{className:s,style:r,ref:c},o.a.createElement("p",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.")),document.getElementById("dialog-box"))}),Z=n(1),Q=n(2),$=function(){function e(){Object(Z.a)(this,e),this.reaction=void 0,this.reaction="KOSIMA_NEUTRAL"}return Object(Q.a)(e,[{key:"reactionImage",value:function(){return console.log(e.KosimaFolder+this.reaction+".svg"),e.KosimaFolder+this.reaction+".svg"}},{key:"baseImage",value:function(){return e.KosimaFolder+"KOSIMA_NEUTRAL.svg"}},{key:"setReaction",value:function(e){this.reaction=e}}]),e}();$.KosimaFolder="/Kosima/";var ee=$,te=n(188),ne=n.n(te);function ae(e,t){var n=e.length,a={},o=[];t>n&&(t=n);for(var r=0;r<t;r++){var i=void 0;do{i=~~(Math.random()*n)}while(i in a);a[i]=null,o.push(e[i])}return o}function oe(e,t,n,a,o){return(e-t)*(o-a)/(n-t)+a}var re=n(113),ie=function(e){var t=e.kosima,n=e.setPopOverOpen,r=ne()(t.baseImage()),i=Object(c.a)(r,1)[0];t.setReaction("KOSIMA_QUESTION");var s=ne()(t.reactionImage()),l=Object(c.a)(s,1)[0];console.log(l);var u=(window.innerWidth-150)/2,d=window.innerHeight-150-50,f=150/9,m=Object(a.useState)({x:74.5,y:108.33333333333331}),h=Object(c.a)(m,2),g=h[0],p=(h[1],Object(a.useRef)(null)),v=Object(a.useState)({x:0,y:0}),y=Object(c.a)(v,2),b=y[0],w=y[1];Object(a.useEffect)((function(){}),[b]);var E=Object(a.useRef)(null);return o.a.createElement(W.d,{onMouseUp:function(e){n(!0)},onMouseLeave:function(e){E.current.to({x:g.x,y:g.y,easing:re.a.Easings.EaseOut})},onMouseMove:function(e){if(console.log(p),p.current){var t=p.current.getClientRect();console.log(t);var n=oe(e.evt.pageX,t.x,t.x+t.width,-15,15);console.log(n),console.log(e),console.log(e.evt.x),console.log(e.evt.y);var a=oe(e.evt.pageY,t.y,t.y+t.height,-15,15);w({x:n,y:a})}}},o.a.createElement(W.b,{x:u,y:d,ref:p},o.a.createElement(W.c,{width:150,height:150,image:i}),o.a.createElement(W.a,{ref:E,x:g.x+b.x,y:g.y+b.y,fill:"yellow",radius:.5*f,stroke:Y.stroke})))},ce=o.a.memo(ie),se=n(335),le=n.n(se),ue=Object(Q.a)((function e(t,n){Object(Z.a)(this,e),this.samples=void 0,this.name=void 0,this.samples=t,this.name=n})),de=function(e){var t=e.sampleCollections.length,n=Object(a.useRef)(null),r=window.innerHeight/2-(15*t+5*t)/2;return o.a.createElement(W.b,null,o.a.createElement(W.b,{ref:n,y:r},e.sampleCollections.map((function(t,n){var a={x:10,y:15*n+5},r={fill:e.activeCollection===t.name?Y.secondary:Y.primary,stroke:Y.secondary,width:15,height:15,id:t.name,onMouseUp:e.onMouseUp};return o.a.createElement(W.b,Object.assign({key:n},a),o.a.createElement(W.f,r))}))))},fe=Object(Q.a)((function e(t,n){Object(Z.a)(this,e),this.name=void 0,this.count=void 0,this.name=t,this.count=n})),me=["FD","MR","HR","ST","LT","MIX","LR","E","M","FL","C","BACH","BARTOK","YSAYE","TONE","TRL","T"],he=function(){function e(t,n,a){Object(Z.a)(this,e),this.w=void 0,this.h=void 0,this.root=void 0,this.gutter=void 0;this.w=t,this.h=n,this.gutter=null!==a&&void 0!==a?a:5,this.root={x:40,y:0,w:t,h:n,used:!1}}return Object(Q.a)(e,[{key:"fit",value:function(e){var t,n,a;for(t=0;t<e.length;t++)if(a=e[t],n=this.findNode(this.root,a.w,a.h)){this.splitNode(n,a.w,a.h,a.id);a.fit=this.splitNode(n,a.w,a.h,a.id)}}},{key:"findNode",value:function(e,t,n){return e.used&&e.right&&e.down?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null}},{key:"splitNode",value:function(e,t,n,a){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e}}]),e}(),ge=(window.innerWidth,function(e,t,n){return console.log("PACKING SAMPLES"),e.forEach((function(e){e.calculateDimensions(t,B.sampleHeight)})),new he(t,n,10).fit(e),e});var pe=function(e){var t=e.activeTags,n=e.x,r=e.y,i=e.tag,s=(e.w,e.h,e.fill),l=e.radius,u=e.onMouseDown,d=e.onDragStart,f=e.onDragEnd,m=e.onMouseEnter,h=e.onDragMove,g=e.onMouseUp,p=e.draggable,v=e.id,y=(e.fit,e.stroke),b=e.strokeWidth;Object(a.useEffect)((function(){console.log(n,r),w.current.to({x:n,y:r})}),[n,r]);var w=Object(a.useRef)(null),E={onMouseDown:u,onDragStart:d,onDragEnd:f,onMouseEnter:m,onDragMove:h,onMouseUp:g,draggable:p,id:v},O=Object(a.useState)(t.includes(e.tag.name)),j=Object(c.a)(O,2),x=(j[0],j[1],Object(a.useState)(s)),C=Object(c.a)(x,2),S=(C[0],C[1]),T={strokeWidth:b},k=Object(a.useState)(!1),M=Object(c.a)(k,2),R=M[0],A=M[1],I=Object(a.useRef)(null);return Object(a.useEffect)((function(){t.includes(i.name)?S(Y.secondary):S(s)}),[t]),Object(a.useEffect)((function(){I.current.to({radius:l,duration:.3,easing:re.a.Easings.EaseInOut})}),[l]),o.a.createElement(W.b,Object.assign({},E,{ref:w}),o.a.createElement(W.a,Object.assign({onMouseEnter:function(e){A(!0)},onMouseLeave:function(e){A(!1)},id:"tag_".concat(i.name,"_circle")},T,{stroke:0===i.count?Y.primaryInactive:y,fill:0==i.count?Y.primary:R?Y.secondaryHover:Y.stroke,ref:I})),o.a.createElement(W.h,{x:-l,fill:"white",text:i.name,align:"center",width:2*l}))},ve=o.a.memo(pe),ye=function(e){var t=e.appMode,n=e.tags,r=e.removeTag,i=e.addTag,c=e.selectedTags,s=Object(a.useRef)(null);"samples"!==t?s.current&&s.current.children.forEach((function(e){e.to({opacity:0,duration:.1})})):s.current&&s.current.children.forEach((function(e){e.to({opacity:1,duration:.5})})),Object(a.useEffect)((function(){console.log(n)}),[n]);var l=n.map((function(e){return console.log(e.count),{tag:e,radius:oe(e.count,0,170,20,80)}})),u=l.map((function(e){return e.radius})),d=200;console.log(u);var f=window.innerWidth-d-100,m=window.innerHeight/2,h=l.map((function(e,t){var n=d*Math.cos(be(t,d,u)),a=d*Math.sin(be(t,d,u));n+=f,a+=m;return{activeTags:c,tag:e.tag,key:t,radius:e.radius,fill:Y.primary,x:n,y:a,stroke:Y.secondary,strokeWidth:5,onMouseUp:function(t){console.log("got circle mouse up"),console.log(e),c.includes(e.tag.name)?r(e.tag.name):i(e.tag.name),console.log(c)}}}));return o.a.createElement(W.d,{ref:s},o.a.createElement(W.a,{x:f,y:m,radius:d,stroke:"red"}),h.map((function(e,t){return o.a.createElement(ve,Object.assign({},e,{key:t}))})))};function be(e,t,n){return e<1?0:(console.log(e,n[e],n[e-1],t,2*t/(n[e]+n[e-1]),Math.asin(2*t/(n[e]+n[e-1])),Math.asin(e),e-1),be(e-1,t,n)+Math.asin((2*n[e]+2*n[e-1])/(2*t)))}var we=o.a.memo((function(e){var t=e.sample,n=(e.ref,e.setRef,t.w),r=t.h,i=(t.fill,t.onMouseDown),s=(t.onDragStart,t.onDragEnd),l=t.onMouseEnter,u=t.onDragMove,d=t.onMouseUp,f=t.draggable,m=t.id,h=t.svgPath,g=t.fit,p=Object(a.useState)(!1),v=Object(c.a)(p,2),y=v[0],b=v[1],w=Object(a.useState)({x:0,y:0}),E=Object(c.a)(w,2),O=(E[0],E[1]),j=Object(a.useRef)(null),x=Object(a.useState)(!1),C=Object(c.a)(x,2),S=C[0],T=C[1],k=(oe(t.w,0,2.5,0,400),g.x),M=g.y,R=Ee(t.tags);return o.a.createElement(W.b,{x:k,y:M,width:n,height:r},o.a.createElement(W.e,{ref:j,width:n,height:r,id:m,data:h,scaleX:.2,scaleY:.6,fillPriority:"linear-gradient",onMouseUp:d,onMouseDown:function(e){console.log(e.target.absolutePosition()),O(e.target.absolutePosition()),i(e)},onDragStart:function(e){T(!0)},onDragEnd:function(e){T(!1),e.target.x(0),e.target.y(r/2),s(e)},onMouseEnter:function(e){l(e),b(!0)},onMouseLeave:function(e){l(e),b(!1)},fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:n,y:r},fillLinearGradientColorStops:R,onDragMove:function(e){u(e)},draggable:f,stroke:y?"white":"black",strokeWidth:2}),o.a.createElement(W.f,{strokeWidth:2,width:n,height:r,x:0,y:0}),function(){if(S)return o.a.createElement(W.e,{width:n,height:r,id:"ghost_".concat(m),y:r/2,data:h,scaleX:y?1.1:1,scaleY:y?1.1:1,fillPriority:"linear-gradient",stroke:Y.secondary,strokeWidth:2})}())})),Ee=function(e){var t="blue",n="yellow";return e.includes("MR")&&(t="#3023AE",n="#53A0FD"),e.includes("LR")&&(t="#8c34eb",n="#d034eb"),e.includes("LR")&&(t="#ebd510",n="#eb8110"),e.includes("MIX")&&(t="#60eb10",n="#2a10eb"),[0,t,.5,n,1,t]},Oe=we,je=function(e){var t=e.appMode,n=e.samples,r=e.sampleTrayGroupRef,i=e.setSampleToClone,c=e.addToCurrentCollection,l=e.setIsDragging,u=e.dragLayerRef,d=e.sampleToClone,f=e.setHoveredId,m=e.setPlayingSample,h=e.stageY;Object(a.useEffect)((function(){console.log(n)}),[n]);var g=Object(a.useRef)(null),p={x:G.sampleContainerWidth+20,y:h,ref:g};Object(a.useEffect)((function(){g.current&&("editor"===t||"viewer"===t?g.current.to({opacity:0,duration:.1}):"samples"===t&&g.current.to({opacity:1,duration:.1}))}),[t]);var v=function(e){console.log("DOING ON RECT MOUSE DOWN")},y=function(e){console.log(n.filter((function(t){return t.filename===e.target.attrs.id}))[0]),m(n.filter((function(t){return t.filename===e.target.attrs.id}))[0])},b=Object(a.useMemo)((function(){return console.log(n),function(e){return e.map((function(e){var t=v,n=y,a=Y.secondary;return Object(s.a)(Object(s.a)({},e),{},{fill:a,draggable:!0,onDragMove:function(e){r.current&&(xe(e.target.getClientRect(),r.current.getClientRect())?(r.current.children[0].setAttr("fill",Y.secondaryHover),console.log("INTERSECTED WITH TRAY")):(r.current.children[0].setAttr("fill",Y.transparent),console.log("NO INTERSECTION")))},onDragStart:function(e){i(e.target),e.target.moveTo(u.current),console.log(e.target)},onDragEnd:function(e){console.log("GOT DRAG END AT CANVAS"),l(!1),r.current&&(xe(e.target.getClientRect(),r.current.getClientRect())&&c(d.attrs.id),d&&r.current&&(r.current.children[0].setAttr("fill","red"),d.moveTo(g.current))),r.current.children[0].setAttr("fill",Y.transparent),c(e.target.attrs.id)},onMouseEnter:function(e){return f(e.target.attrs.id)},onMouseDown:t,onMouseUp:n})}))}(n)}),[n]);return o.a.createElement(W.d,p,function(){if(b[0].fit)return b.map((function(e){return o.a.createElement(Oe,{key:e.id,sample:e})}))}())};function xe(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}var Ce=function(e){var t=e.widgetContainerRef,n=e.appMode,r=Object(a.useRef)(null);Object(a.useEffect)((function(){t.current&&("samples"===n||"viewer"===n?(t.current.to({opacity:0,duration:.1}),r.current.to({opacity:0,duration:.1})):("editor"===n&&t.current.to({opacity:1,duration:.1}),"editor"===n&&r.current.to({opacity:1,duration:.1})))}),[n]);return o.a.createElement(o.a.Fragment,null,function(){var e=Array.from(Array(4).keys()),n=G.widgetWidth,a=G.widgetHeight,i=Y.stroke,c=(window.innerWidth-e.length*n)/2,s=(window.innerHeight-a)/2,l=s-130,u={fill:Y.secondary,width:4*n,height:2};return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.b,{x:c,y:l,ref:r},o.a.createElement(W.f,Object.assign({x:0,y:0},u)),o.a.createElement(W.f,Object.assign({x:0,y:80},u))),o.a.createElement(W.b,{x:c,y:s,ref:t},e.map((function(e,t){var r=t*n;return o.a.createElement(W.f,{key:t,x:r,fill:i,width:n,height:a,stroke:Y.secondary,cornerRadius:Y.borderRadius})}))))}())},Se=function(e){var t=e.appMode,n=e.setAppMode,a={width:"2em",height:"2em",backgroundColor:Y.secondary,borderRadius:"50%"};return o.a.createElement("div",{style:a,onClick:function(e){n("viewer"!==t?"viewer":"editor")}})},Te=function(e){var t=e.appMode,n=e.setAppMode,a={width:"fit-content",height:"1em",display:"flex",borderRadius:Y.borderRadius,position:"absolute",right:0,top:0,overflow:"hidden",color:Y.textDark,padding:"1em",alignItems:"center",margin:"0.5em"};return i.a.createPortal(o.a.createElement("div",{style:a},o.a.createElement(Se,{setAppMode:n,appMode:t})),document.getElementById("navigation"))},ke=function(e){var t,n=e.activeTags,r=x((function(e){return e.samplesModel.samples})),i=Object(a.useRef)(),s=window.innerWidth/3,l=Object(a.useMemo)((function(){var e,t=r;n.length>0&&(t=t.filter((function(e){return n.every((function(t){return e.tags.includes(t)}))})),console.log(t));var a=0;null!==(e=(t=ge(t,s,5e3).filter((function(e){return e.fit})))[0])&&void 0!==e&&e.fit&&(a=function(e,t){var n=new Map;return e.map((function(a){n.has(a[t])||n.set(a[t],e.filter((function(e){return e[t]==a[t]})))})),n}(r.map((function(e){return e.fit})).filter((function(e){return e})),"y").size);return{packed:t,rows:a}}),[r,n]),u=Object(a.useMemo)((function(){var e=l.packed.map((function(e){return e.tags})).reduce((function(e,t){return e.concat(t)})),t=new Map;me.map((function(n){t.has(n)||t.set(n,Me(e,n))}));var n=me.map((function(e){return new fe(e,t.get(e))}));return console.log(e),console.log(n),n}),[l]),d=Array.from(Array(10).keys()).map((function(e,t){return new ue([],"Sample_Collection_".concat(t))})),m=new ue(r.slice(1,6),"collection 1"),h=new ue(r.slice(13,19),"collection 2"),g=new ue([],"collection 3"),p=new ue([],"collection 4"),v=new ue([],"collection 5"),y=Object(f.j)((function(){var e;return{allTags:u,appMode:G.startMode,sampleCollections:[m,h,g,p,v],activeCollection:d[0],addToCurrentCollection:Object(f.b)((function(e,t){console.log("ADDING ".concat(t," TO CURRENT COLLECTION"));e.activeSamples.filter((function(e){return e.id===t}))[0];e.activeCollection.samples.push(e.activeSamples.filter((function(e){return e.id===t}))[0])})),sampleToClone:void 0,setSampleToClone:Object(f.b)((function(e,t){e.sampleToClone=t})),setActiveCollection:Object(f.b)((function(e,t){e.activeCollection=e.sampleCollections.filter((function(e){return e.name===t}))[0]})),availableTags:Object(f.d)([function(e){return e.activeSamples}],(function(e){var t=e.map((function(e){return e.tags})).reduce((function(e,t){return e.concat(t)})),n=new Map;return me.map((function(e){n.has(e)||n.set(e,Me(t,e))})),me.map((function(e){return new fe(e,n.get(e))}))})),selectedTags:[],addTag:Object(f.b)((function(e,t){e.selectedTags.push(t)})),removeTag:Object(f.b)((function(e,t){e.selectedTags=e.selectedTags.filter((function(e){return e!==t}))})),kosima:new ee,hoveredId:"",playingSample:void 0,isDragging:!1,draggingId:"",packedSamples:l.packed,popOverOpen:!1,setPopOverOpen:Object(f.b)((function(e,t){e.popOverOpen=t})),activeSamples:Object(f.d)([function(e){return e.packedSamples},function(e){return e.selectedTags}],(function(e,t){var n=e.filter((function(e){return t.every((function(t){return e.tags.includes(t)}))}));return ge(n,s,5e3)})),stageY:0,viewHeight:null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height,stageHeight:l.rows*B.sampleHeight,setStageHeight:Object(f.b)((function(e,t){e.stageHeight=t})),setViewHeight:Object(f.b)((function(e,t){e.viewHeight=t})),setStageY:Object(f.b)((function(e,t){console.log("view height ".concat(e.viewHeight)),console.log(e.stageY);var n=0-(e.stageHeight-e.viewHeight);t>0?(console.log(t),e.stageY<0&&(console.log("doing first"),e.stageY=Math.min(e.stageY+t,0),console.log(e.stageY))):e.stageY>n&&(console.log(e.stageY),e.stageY+=t),console.log(e.stageHeight)})),setAppMode:Object(f.b)((function(e,t){e.appMode=t})),setIsDragging:Object(f.b)((function(e,t){e.isDragging=t})),setDraggingId:Object(f.b)((function(e,t){e.draggingId=t})),setHoveredId:Object(f.b)((function(e,t){e.hoveredId=t})),setPlayingSample:Object(f.b)((function(e,t){e.playingSample=t}))}}),[l,r],(function(){return{devTools:!1}})),b=Object(c.a)(y,2),w=b[0],E=b[1],O={width:window.innerWidth,height:w.viewHeight,onWheel:function(e){console.log(e),e.evt.preventDefault(),E.setStageY(e.evt.deltaY)}},j=Object(a.useState)(null),C=Object(c.a)(j,2),S=C[0],T=(C[1],Object(a.useRef)(null));Object(a.useEffect)((function(){var e;E.setViewHeight(null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height),T.current.container().style.backgroundColor=Y.primary}),[S]),Object(L.a)({keyCode:32,action:function(){"editor"===w.appMode?E.setAppMode("samples"):E.setAppMode("editor")},disabled:!1});var k=Object(a.useRef)(null),M=Object(a.useRef)(null),R=Object(a.useRef)(null),A=Object(a.useRef)(null),I=window.innerHeight-100,D=(window.innerHeight-I)/2;return Object(a.useEffect)((function(){if(console.log(w.appMode),A.current)if(A.current&&"editor"===w.appMode){var e=A.current.y(),t=A.current.x();A.current.height();M.current.to({x:t,y:e,opacity:1}),M.current.children[0].to({height:G.widgetHeight,width:G.widgetWidth})}else A.current&&"viewer"===w.appMode?M.current.to({opacity:0,duration:.1}):(D=(window.innerHeight-I)/2,M.current.to({x:G.sampleCollectionGroupX,y:(window.innerHeight-I)/2,opacity:1}),M.current.children[0].to({height:G.sampleCollectionRectHeight,width:G.widgetWidth}))}),[w.appMode]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{height:"100%",width:"100%"},ref:i,className:"outer-tray"},o.a.createElement(q,{open:w.popOverOpen,setOpen:function(e){return E.setPopOverOpen(e)}}),w.playingSample?o.a.createElement(le.a,{playing:!0,height:0,width:0,progressInterval:1,onProgress:function(e){e.played,e.playedSeconds,e.loaded,e.loadedSeconds;null===S||void 0===S||S.fill("white"),console.log(w.playingSample)},url:null===(t=w.playingSample)||void 0===t?void 0:t.src}):o.a.createElement(o.a.Fragment,null),o.a.createElement(Te,{setAppMode:function(e){return E.setAppMode(e)},appMode:w.appMode}),o.a.createElement(W.g,Object.assign({},O,{ref:T}),o.a.createElement(W.d,{ref:R,onDragStart:function(e){w.sampleToClone.moveTo(R.current)},onDragEnd:function(e){console.log(e.target),console.log(M)},onDragMove:function(e){var t,n;w.sampleToClone&&M.current&&(t=k.current.getClientRect(),(n=M.current.getClientRect()).x>t.x+t.width||n.x+n.width<t.x||n.y>t.y+t.height||n.y+n.height<t.y?(M.current.getChildren()[0].attrs.fill=Y.primaryInactive,console.log("NO INTERSECTION")):(M.current.getChildren()[0].attrs.fill=Y.secondaryHover,console.log("INTERSECTED WITH TRAY")))}}),o.a.createElement(W.d,null,o.a.createElement(Ce,{widgetContainerRef:A,appMode:w.appMode}),o.a.createElement(de,{sampleCollections:w.sampleCollections,onMouseUp:function(e){E.setActiveCollection(e.target.attrs.id)},activeCollection:w.activeCollection.name}),o.a.createElement(W.b,{ref:M,height:I,y:D,x:G.sampleCollectionGroupX},o.a.createElement(J,{sampleCollection:w.activeCollection,appMode:w.appMode}))),o.a.createElement(je,{appMode:w.appMode,samples:w.activeSamples,sampleTrayGroupRef:M,setSampleToClone:E.setSampleToClone,addToCurrentCollection:E.addToCurrentCollection,setIsDragging:E.setIsDragging,dragLayerRef:R,sampleToClone:w.sampleToClone,setHoveredId:E.setHoveredId,setPlayingSample:E.setPlayingSample,stageY:w.stageY}),o.a.createElement(ye,{appMode:w.appMode,tags:w.availableTags,selectedTags:w.selectedTags,removeTag:E.removeTag,addTag:E.addTag}),o.a.createElement(ce,{kosima:w.kosima,setPopOverOpen:E.setPopOverOpen}))))};function Me(e,t){for(var n=0,a=0,o=e.length;a<o;a+=1)e[a]===t&&(n+=1);return n}var Re=function(e){var t=e.active,n=Object(f.j)((function(){return{tags:[],addTag:Object(f.b)((function(e,t){e.tags.push(t)})),removeTag:Object(f.b)((function(e,t){e.tags=e.tags.filter((function(e){return e!==t}))}))}})),r=Object(c.a)(n,2),i=r[0],s=(r[1],H()("sample-tray-container",{"sample-tray-hidden":t})),l=(Object(a.useRef)(),Object(a.useState)("none")),u=Object(c.a)(l,2),d=u[0];u[1];return Object(a.useEffect)((function(){console.log("setting tray filter to ".concat(d))}),[d]),o.a.createElement(P,{className:s},o.a.createElement(P,{column:!0,backgroundColor:"white",className:"sample-tray-inner-container"},o.a.createElement(ke,{activeTags:i.tags})))},Ae=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(Re,{active:!1}))},Ie=n(28),De=(n(199),n(200),n(201),n(202),[{i:"projectInfo",x:11,y:0,w:1,h:1},{i:"oneRecitalText",x:0,y:2,w:4,h:1},{i:"recitalTracks",x:0,y:3,w:5,h:2},{i:"arrow",x:5,y:2,w:1,h:2},{i:"threeRemixes",x:6,y:2,w:4,h:1},{i:"remixes",x:6,y:3,w:5,h:2},{i:"title",x:0,y:0,w:5,h:1},{i:"trackInfo",x:0,y:5,w:3,h:6},{i:"waveform",x:3,y:5,w:9,h:6},{i:"violin",x:4,y:1,w:1,h:2}]),Le=[{i:"projectInfo",x:11,y:0,w:1,h:1},{i:"oneRecitalText",x:0,y:2,w:4,h:2},{i:"recitalTracks",x:0,y:3,w:5,h:2},{i:"arrow",x:5,y:2,w:1,h:2},{i:"threeRemixes",x:6,y:2,w:4,h:1},{i:"remixes",x:6,y:3,w:5,h:2},{i:"title",x:0,y:0,w:5,h:1},{i:"trackInfo",x:0,y:5,w:3,h:6},{i:"waveform",x:3,y:5,w:9,h:6},{i:"violin",x:4,y:1,w:1,h:2}],Ne=[{i:"projectInfo",x:11,y:0,w:5,h:4},{i:"oneRecitalText",x:0,y:2,w:4,h:1},{i:"recitalTracks",x:0,y:3,w:5,h:2},{i:"arrow",x:5,y:2,w:1,h:2},{i:"threeRemixes",x:6,y:2,w:4,h:1},{i:"remixes",x:6,y:3,w:5,h:2},{i:"title",x:0,y:0,w:5,h:1},{i:"trackInfo",x:0,y:5,w:3,h:6},{i:"waveform",x:3,y:5,w:9,h:6},{i:"violin",x:4,y:1,w:1,h:2}],_e=[{i:"projectInfo",x:11,y:0,w:1,h:1},{i:"oneRecitalText",x:0,y:2,w:4,h:1},{i:"recitalTracks",x:0,y:3,w:5,h:2},{i:"arrow",x:5,y:2,w:1,h:2},{i:"threeRemixes",x:6,y:2,w:4,h:1},{i:"remixes",x:6,y:3,w:5,h:2},{i:"title",x:0,y:0,w:5,h:1},{i:"trackInfo",x:0,y:5,w:5,h:6},{i:"waveform",x:5,y:5,w:7,h:6},{i:"violin",x:4,y:1,w:1,h:2}],Pe={appMode:"intro",setAppMode:Object(f.b)((function(e,t){e.appMode=t})),isPlaying:!1,setCurrentTrack:Object(f.b)((function(e,t){console.log("SETTING CURRENT TRACK TO: "+t),e.currentTrackId=t})),currentTrackId:E[0].title,setIsPlaying:Object(f.b)((function(e,t){e.isPlaying=t})),currentTrack:Object(f.d)((function(e){return E.filter((function(t){return t.title===e.currentTrackId}))[0]})),currentAudioElement:Object(f.d)((function(e){return document.getElementById("audio_"+e.currentTrackId)})),currentLayout:Le,setCurrentLayout:Object(f.b)((function(e,t){console.log("SETTING CURRENT TRACK TO: "+t);var n=[];"about"===t?n=Ne:"remix"===t?n=Le:"recital"===t&&(n=_e),e.currentLayout=n}))},Fe=Object(f.e)(Pe,{name:"homeStore",devTools:!1,middleware:[]}),He=(n(203),n(637)),Be=function(e){var t=e.children,n=e.padding,a=e.style,r=e.width,i=e.height,c=e.id,l=e.className,u=e.justifyContent;return o.a.createElement("div",{className:l,style:Object(s.a)({display:"flex",flexDirection:"column",padding:n,justifyContent:null!==u&&void 0!==u?u:"center",width:r,height:i},a),id:c},t)},Ue=function(){var e=k().appMode,t={width:"100vw",height:"100vh",backgroundColor:Y.primary,position:"absolute",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"};return i.a.createPortal(o.a.createElement(He.a.div,{className:"modal",variants:{visible:{opacity:1},hidden:{opacity:0,transition:{duration:1},pointerEvents:"none"}},animate:"intro"===e?"visible":"hidden",style:t},o.a.createElement(Be,null,o.a.createElement(Ge,{text:"create"}),o.a.createElement(Ge,{text:"view"}))),document.getElementById("intro-modal"))},Ge=function(e){var t=e.text,n=Object(a.useRef)(null),r=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),o=n[0],r=n[1];return D("mouseenter",(function(){return r(!0)}),e),D("mouseleave",(function(){return r(!1)}),e),o}(n),i=k().setAppMode,s=M(),l=s.playTrack,u=(s.pauseTrack,s.startingTrack),d={width:"100%",position:"relative",border:"1px solid red",fontSize:Y.mediumFont};return o.a.createElement("div",{style:d,ref:n},r&&o.a.createElement("div",{style:{position:"absolute",left:"-30%",width:10,height:10,zIndex:1e3,backgroundColor:"yellow"}},">"),o.a.createElement(He.a.div,{whileHover:{scale:1.1,textShadow:"0px 0px 4px gray",backgroundColor:"rgba(0,0,0,0)",color:"rgba(255, 255, 255, 255)"},style:{textAlign:"center"},onClick:function(e){i(t),l(u)}},t))},Ye=n(189),We=function(e){var t=e.children,n={width:"100%",height:"100%",border:e.border?"2px solid black":"",backgroundColor:Y.primary,overflow:"hidden",borderRadius:Y.borderRadius};return o.a.createElement("div",{id:"view-card",className:"view-card",style:n},t)},Ve=Object(Ye.WidthProvider)(Ye.Responsive),ze=function(e){var t=e.children,n=e.className,r=e.layout,i={width:"100%",height:"100%"},l=(r.map((function(e){return Object(s.a)({},e)})),Object(a.useState)(!1)),u=Object(c.a)(l,2),d=u[0],f=(u[1],Object(a.useMemo)((function(){return r.map((function(e,n){console.log("wrapping child");var a=!["arrow","recitalTracks","remixes"].includes(e.i);console.log(a,e.i);var r=e.i;return o.a.createElement("div",{key:r,id:r},o.a.createElement(He.a.div,{id:r,style:i},o.a.createElement(We,{border:a},t[n])))}))}),[r])),m={lg:r,md:r,sm:r,xxs:r},h=(window.innerHeight-300)/12;return o.a.createElement(Ve,{style:{minWidth:"100vw",minHeight:"100vh"},onWidthChange:function(e){console.log(e)},isDraggable:!1,className:n,layouts:m,useCSSTransforms:d,margin:[26,26],compactType:null,width:window.innerWidth,rowHeight:h,cols:{lg:12,md:12,sm:12,xxs:12},containerPadding:[26,26],verticalCompact:!1},f)};var Xe=n(3),Ke=n(336),Je=n(337),qe=n(338),Ze=n(339),Qe=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null);return Object(a.useEffect)((function(){var n=new Xe.Scene;n.background=new Xe.Color(16711680);var a=new Xe.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),o=(window.innerWidth,window.innerHeight,new Xe.WebGLRenderer({alpha:!0}));o.setClearColor(0,0),o.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(o.domElement);var r=new Ke.a(a,o.domElement),i=new Xe.GridHelper(10,10);i.position.y=-1.5,n.add(i),a.position.z=5,window.addEventListener("resize",(function(){a.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight),h()}),!1);var c=new Xe.PlaneGeometry(1,1.54),s=new Xe.VideoTexture(t.current);s.format=Xe.RGBAFormat,t.current.play(),t.current.setAttribute("crossorigin","anonymous");var l=new Xe.ShaderMaterial({transparent:!0,uniforms:{map:{value:s},keyColor:{value:[0,1,0]},similarity:{value:.8},smoothness:{value:0}},vertexShader:"\n      varying vec2 vUv;\n      void main( void ) {     \n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n      }\n  ",fragmentShader:"\n      uniform vec3 keyColor;\n      uniform float similarity;\n      uniform float smoothness;\n      varying vec2 vUv;\n      uniform sampler2D map;\n      void main() {\n          vec4 videoColor = texture2D(map, vUv);\n   \n          float Y1 = 0.299 * keyColor.r + 0.587 * keyColor.g + 0.114 * keyColor.b;\n          float Cr1 = keyColor.r - Y1;\n          float Cb1 = keyColor.b - Y1;\n          \n          float Y2 = 0.299 * videoColor.r + 0.587 * videoColor.g + 0.114 * videoColor.b;\n          float Cr2 = videoColor.r - Y2; \n          float Cb2 = videoColor.b - Y2; \n          \n          float blend = smoothstep(similarity, similarity + smoothness, distance(vec2(Cr2, Cb2), vec2(Cr1, Cb1)));\n          gl_FragColor = vec4(videoColor.rgb, videoColor.a * blend); \n      }\n  "}),u=new Xe.Mesh(c,l);u.add(new Xe.BoxHelper(u,16711680)),n.add(u);var d=Object(Je.a)();document.body.appendChild(d.dom);var f={keyColor:[0,255,0],similarity:.8,smoothness:0},m=new qe.a;function h(){o.render(n,a)}m.addColor(f,"keyColor").onChange((function(){return e=f.keyColor,void(l.uniforms.keyColor.value=[e[0]/255,e[1]/255,e[2]/255]);var e})),m.add(f,"similarity",0,1).onChange((function(){return e=f.similarity,void(l.uniforms.similarity.value=e);var e})),m.add(f,"smoothness",0,1).onChange((function(){return e=f.smoothness,void(l.uniforms.smoothness.value=e);var e})),(new Ze.a).load("".concat("","/Models/CHURCH_BALL_DEMO.obj"),(function(e){n.add(e);var t=new Xe.MeshBasicMaterial({color:"black",transparent:!0,opacity:.5});console.log(e);var a=n.getObjectByName("sagrada-familia-basilica-complete-mw.001");a.scale.set(1.1,1.1,1.1),a.material=t})),function e(){requestAnimationFrame(e),r.update(),h(),d.update()}(),e.current.appendChild(o.domElement)}),[]),o.a.createElement("div",{style:{width:"100%",height:"100%"},onClick:function(e){t.current.play()},ref:e},o.a.createElement("video",{ref:t,style:{position:"absolute",top:"100%",left:0,width:"100%",height:"100%"},muted:!0,src:"".concat("","/Videos/ROTOSCOPE_TEST_1.mp4")}))};var $e=function(e){e.track;var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1],s=M(),l=s.currentTrack,u=(s.isPlaying,s.isRecital,s.trackCategory);return Object(a.useEffect)((function(){i("recital"===u)}),[u]),o.a.createElement(Be,{width:"100%",height:"100%",justifyContent:"flex-end"},r&&o.a.createElement(Qe,null),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(tt,{track:l}),o.a.createElement(et,{track:l})))},et=function(e){var t=e.track,n={width:"100%",height:"100%",backgroundColor:"white",marginTop:"12em",borderRadius:Y.borderRadius,padding:"1rem"},a=(t.artist,t.link,t.category,t.title);return o.a.createElement(Be,{style:n},o.a.createElement("ul",null,o.a.createElement("li",{style:{textAlign:"center",fontSize:"x-large"}},a),o.a.createElement("li",{style:{textAlign:"center",fontSize:"medium"}},t.about)))},tt=function(e){var t=e.track,n={normal:{height:"200px",width:"200px"},highlight:{height:"0px",width:"0px",transition:{duration:.5}}},r=150,i={width:r,height:r,margin:"auto",position:"absolute",top:0,left:"50%",transform:"translate(-50%, 10%)",overflow:"hidden"},s=Object(a.useState)(t.visual),l=Object(c.a)(s,2),u=l[0],d=l[1],f=Object(a.useState)(!1),m=Object(c.a)(f,2),h=m[0];m[1];Object(a.useEffect)((function(){d(t.visual)}),[t.title]);return o.a.createElement(He.a.div,{className:"artist-image",style:i},o.a.createElement(He.a.div,{variants:n,animate:h?"highlight":"normal",style:{border:"1px solid red",overflow:"hidden",width:r,height:r,position:"absolute",top:"50%",left:"50%",zIndex:10,transform:"translate(-50%,-50%)"}},o.a.createElement(He.a.img,{style:{width:140,height:140,objectFit:"cover",objectPosition:"top",zIndex:10,position:"absolute",borderRadius:"50%",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},src:u})),o.a.createElement("img",{src:"".concat("","/SVG/FrameTest.svg"),style:{width:"100%",height:"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}}))},nt=n(48),at=n(639),ot=n(635),rt=n(640),it=n(636),ct=function(){var e=Object(at.a)("".concat("","/Models/realistic-violin.glb")).nodes,t=Object(nt.d)(Xe.TextureLoader,"".concat("","/Textures/matcapred.jpg")),n=Object(a.useRef)(),r=e.V.children;return Object(nt.c)((function(){n.current.rotation.y+=.01})),o.a.createElement("group",{ref:n},r.map((function(e,n){return o.a.createElement("mesh",{key:n,geometry:e.geometry,material:e.material},o.a.createElement("meshMatcapMaterial",{attach:"material",color:"yellow",matcap:t}))})))},st=function(){return o.a.createElement(a.Suspense,{fallback:o.a.createElement(ut,null)},o.a.createElement(nt.a,{className:"canvas"},o.a.createElement(ot.a,{makeDefault:!0,zoom:10.1,position:[0,0,20]}),o.a.createElement(rt.a,null),o.a.createElement(ct,null)))},lt=o.a.memo(st);function ut(){var e=Object(it.a)(),t=(e.active,e.progress);e.errors,e.item,e.loaded,e.total;return o.a.createElement("section",null,t," % loaded")}var dt=n(5),ft=n(6),mt=n(76),ht=n(341),gt=.5,pt=.5,vt=.5,yt=20,bt={uniforms:{uTime:{value:0},uColor:{value:new Xe.Vector3(gt,pt,vt)},uShade:{value:yt}},vertexShader:"\n    varying vec3 vNormal;\n    void main() {\n      vNormal = normalize(normalMatrix * normal);\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    } \n  ",fragmentShader:"\n    varying vec3 vNormal;\n    uniform float uTime;\n    uniform float uShade;\n    uniform vec3 uColor;\n    uniform vec2 vUv;\n    void main() {\n      gl_FragColor = vec4(vNormal * (sin(vNormal.z * uShade + uTime * 3.) * .5 + .5) + uColor, 1.);\n    } \n  "},wt=function(e){Object(dt.a)(n,e);var t=Object(ft.a)(n);function n(){return Object(Z.a)(this,n),t.call(this,{uniforms:{time:{value:1},color:{value:new Xe.Color(.2,0,.1)}},vertexShader:"varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }",fragmentShader:"uniform float time;\n      uniform vec3 color;\n      varying vec2 vUv;\n      void main() {\n        gl_FragColor.rgba = vec4(0.5 + 0.3 * sin(vUv.yxx + time) + color, 1.0);\n      }"})}return Object(Q.a)(n,[{key:"color",get:function(){return this.uniforms.color.value}},{key:"time",get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}}]),n}(Xe.ShaderMaterial);Object(nt.b)({ColorMaterial:wt});var Et=function(e){e.track;var t=Object(a.useRef)(),n=Array.from(Array(1e3).keys()).map((function(e,t){var n,a,o=10*t,r=(n=0,a=30,n=Math.ceil(n),a=Math.floor(a),Math.floor(Math.random()*(a-n+1)+n));return new Xe.Vector2(r,o)})),r=(Object(mt.a)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/TrackData/TRACKS_DATA.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))),Object(a.useState)([])),i=Object(c.a)(r,2),s=(i[0],i[1],new Xe.LatheGeometry(n,10)),u=ht.a,f=Xe.UniformsUtils.clone(u.uniforms),m=Object(nt.d)(Xe.TextureLoader,"".concat("","/Textures/white.jpg")),h=Object(nt.d)(Xe.TextureLoader,"".concat("","/Textures/bunny_thickness.jpg"));f.map.value=m,f.diffuse.value=new Xe.Vector3(1,.2,.2),f.shininess.value=500,f.thicknessMap.value=h,f.thicknessColor.value=new Xe.Vector3(.5,.3,0),f.thicknessDistortion.value=.1,f.thicknessAmbient.value=.4,f.thicknessAttenuation.value=.8,f.thicknessPower.value=2,f.thicknessScale.value=16;u.vertexShader,u.fragmentShader;var g=Object(a.useRef)();return Object(a.useEffect)((function(){g&&(g.current.rotation.x=1.5708,g.current.rotation.y=3.1416,g.current.rotation.z=1.5708,g.current.position.x=-345)}),[]),o.a.createElement("group",{ref:g},o.a.createElement("mesh",{geometry:s,ref:t,onPointerDown:function(e){}},o.a.createElement("shaderMaterial",{args:[bt]})))},Ot=new Xe.Object3D,jt=function(e){var t=e.track,n=(Array.from(Array(50).keys()),Object(a.useRef)()),r=Object(a.useRef)();return Object(a.useEffect)((function(){r.current=document.getElementById("audio_"+t.title)}),[t.title]),Object(nt.c)((function(e){if(n.current){r.current.currentTime;for(var t=0,a=0;a<100;a++){var o=t++;Ot.position.set(50*a,0,-1),Ot.updateMatrix(),n.current.setMatrixAt(o,Ot.matrix),n.current.instanceMatrix.needsUpdate=!0}n.current.instanceMatrix.needsUpdate=!0}})),o.a.createElement("group",null,o.a.createElement("instancedMesh",{ref:n,args:[null,null,5e3]},o.a.createElement("boxGeometry",{args:[1,250,1]},o.a.createElement("instancedBufferAttribute",null)),o.a.createElement("meshBasicMaterial",{color:"black"})))},xt=function(e){e.progress;var t=e.track,n=(Array.from(Array(50).keys()),Object(a.useRef)(null),Object(a.useRef)());Object(a.useRef)();return o.a.createElement(a.Suspense,{fallback:o.a.createElement("div",null,"hello")},o.a.createElement(nt.a,{className:"waveform-canvas",shadows:!0,dpr:[1,2]},o.a.createElement("color",{attach:"background",args:[Y.primary]}),o.a.createElement("ambientLight",{color:"black",intensity:.5}),o.a.createElement("pointLight",{position:[5,5,5]}),o.a.createElement(ot.a,{ref:n,makeDefault:!0,zoom:2,position:[0,0,100]}),o.a.createElement(rt.a,null),o.a.createElement(St,{track:t})))},Ct=o.a.memo(xt),St=function(e){var t=e.track,n=Object(a.useRef)(),r=Object(a.useRef)();return Object(nt.c)((function(e){e.clock.getElapsedTime();n.current&&!n.current.paused&&r.current&&(r.current.position.x-=1)})),o.a.createElement("group",{ref:r},o.a.createElement(jt,{track:t}),o.a.createElement(Et,{track:t}))},Tt=function(e){var t=e.progress,n=e.track;return o.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},o.a.createElement(Ct,{progress:t,track:n}),o.a.createElement(Mt,null))},kt=o.a.memo(Tt),Mt=function(){var e=Array.from({length:20},(function(e,t){return t}));return o.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",backgroundColor:"blue"}},e.map((function(t,n){var a={width:"1%",position:"absolute",left:"".concat(n/e.length*100,"%"),height:"100%",backgroundColor:"red"};return o.a.createElement("div",{key:n,style:a})})))},Rt=function(){return o.a.createElement("div",{style:{padding:".5rem",height:"100%",fontSize:Y.mediumFont,fontWeight:"bold",position:"relative",justifyContent:"center",margin:"auto",display:"flex",alignItems:"center",width:"100%"}},"Seisolo.io Remixing the Recital")},At=(n(408),function(e){var t=e.songName;e.songArtist,e.link,e.index;return o.a.createElement(Be,{className:"song"},o.a.createElement("div",{className:"song-title",style:{margin:"auto"}},t))}),It=function(e){var t=e.children,n=e.padding,a=e.className,r=e.style,i=e.width,c=e.height,l=e.justifyContent,u=e.id;return o.a.createElement("div",{className:a,style:Object(s.a)({display:"flex",flexDirection:"row",padding:n,width:i,height:c,justifyContent:l},r),id:u},t)},Dt=(n(213),n(214),function(e){var t=e.track,n=M(),a=n.playTrack,r=n.pauseTrack,i=R(t);return o.a.createElement("div",{style:{width:"fit-content",padding:"5px",position:"absolute",border:"1px solid black",top:0,left:0}},i?o.a.createElement(Nt,{handleClick:function(){console.log("FIRING PAUSE BUTTON HANDLER"),r(t)}}):o.a.createElement(Lt,{handleClick:function(){console.log("FIRING PLAY BUTTON HANDLER"),a(t)}}))}),Lt=function(e){var t=e.handleClick;return o.a.createElement("div",{className:"play-button-item",onClick:function(e){t()},style:{width:10,height:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},o.a.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 67.91 76.24",style:{margin:"auto"}},o.a.createElement("path",{fill:"yellow",d:"M170.45,173l-53.71-31a7.1,7.1,0,0,0-10.65,6.15v62a7.1,7.1,0,0,0,10.65,6.14l53.71-31A7.1,7.1,0,0,0,170.45,173Z",transform:"translate(-106.09 -141)"})))},Nt=function(e){var t=e.handleClick;return o.a.createElement("div",{className:"play-button-item",onClick:function(){t()},style:{width:10,height:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},o.a.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 67.91 76.24",style:{margin:"auto"}},o.a.createElement("path",{fill:"yellow",d:"M51.24,0h0c4.64,0,8.41,4.18,8.41,9.34V66.9c0,5.16-3.77,9.34-8.41,9.34h0c-4.65,0-8.42-4.18-8.42-9.34V9.34C42.82,4.18,46.59,0,51.24,0Z"}),o.a.createElement("path",{fill:"yellow",d:"M51.24,0h0c4.64,0,8.41,4.18,8.41,9.34V66.9c0,5.16-3.77,9.34-8.41,9.34h0c-4.65,0-8.42-4.18-8.42-9.34V9.34C42.82,4.18,46.59,0,51.24,0Z",transform:"translate(-30, 0)"})))},_t=function(e){var t=e.track,n=H()("play-body",{"play-body-playing":!0}),a=t.src,r=t.artist,i=t.title,c=t.link,s=(t.about,t.category,"0rem"),l=".5rem";return o.a.createElement(It,{className:n,style:{border:"2px solid black",paddingLeft:"clamp(".concat(s,", 1vw, ").concat(l,")"),paddingRight:"clamp(".concat(s,", 1vw, ").concat(l,")"),paddingTop:"clamp(".concat(s,", 1vw, ").concat(l,")"),paddingBottom:"clamp(".concat(s,", 1vw, ").concat(l,")"),height:"100%"}},o.a.createElement("audio",{id:"audio_"+t.title},o.a.createElement("source",{src:a}),"Your browser does not support the ",o.a.createElement("code",null,"audio")," element."),o.a.createElement("div",{style:{height:"100%",margin:"auto",position:"relative"}},o.a.createElement(Dt,{track:t})),o.a.createElement(At,{songName:i,songArtist:r,link:c,index:0}),o.a.createElement(It,{className:"controls"}))},Pt=function(e){var t=e.track,n=R(t),a={paused:{opacity:1,x:0},active:{backgroundColor:"rgba(255, 242, 0, 150)",transition:{ease:"linear",duration:2,repeat:1/0,repeatType:"mirror"}}};return o.a.createElement(He.a.div,{style:{height:"100%",width:"33.333%",fontFamily:Y.primaryFont,fontSize:"2rem",position:"relative",marginRight:"2rem",justifyContent:"center",display:"flex",flexDirection:"column"},animate:n?"active":"paused",variants:a,whileHover:{backgroundColor:Y.primaryMedium,transition:{duration:.1}}},o.a.createElement(_t,{track:t}))},Ft=function(){var e=E.filter((function(e){return"recital"===e.category}));return o.a.createElement("div",{style:{height:"100%",width:"100%",fontFamily:Y.primaryFont,fontSize:"6rem",display:"flex"}},e.map((function(e,t){return o.a.createElement(Pt,{key:t,track:e})})))},Ht=function(e){var t=e.children,n=e.active,a={normal:{backgroundColor:Y.primary},highlight:{opacity:1,backgroundColor:Y.secondary,transition:{duration:.3,delayChildren:.5}}};return o.a.createElement(It,{height:"100%"},o.a.createElement(He.a.div,{style:{width:"100%",height:"100%",fontFamily:Y.primaryFont,fontSize:Y.mediumFont,alignItems:"center",display:"flex",fontWeight:"bold",paddingLeft:"1rem",backgroundColor:n?"green":""},variants:a,animate:n?"highlight":"normal"},t))},Bt=function(){var e=M().trackCategory;return o.a.createElement(Ht,{active:"remix"===e},"3 Remixes")},Ut=function(){var e=Object(at.a)("".concat("","/Models/seisoloarrow.glb")).nodes,t=Object(nt.d)(Xe.TextureLoader,"".concat("","/Textures/matcapred.jpg")),n=Object(a.useRef)(),r=e.Scene.children;return Object(a.useEffect)((function(){n.current&&(n.current.rotation.z=3.1416)}),[]),Object(nt.c)((function(e){n.current&&(n.current.rotation.x+=.01)})),o.a.createElement("group",{ref:n},r.map((function(e,n){return o.a.createElement("mesh",{key:n,geometry:e.geometry},o.a.createElement("meshMatcapMaterial",{attach:"material",color:"yellow",matcap:t}))})))},Gt=function(){return o.a.createElement(a.Suspense,{fallback:o.a.createElement("div",null,"hello")},o.a.createElement(nt.a,{className:"canvas"},o.a.createElement(ot.a,{makeDefault:!0,zoom:15.1,position:[0,0,20]}),o.a.createElement(Ut,null),o.a.createElement(rt.a,{enableRotate:!0})))},Yt=o.a.memo(Gt),Wt=function(){var e=M().trackCategory;return o.a.createElement(Ht,{active:"recital"===e},"1 Violin Recital")},Vt=function(){var e=E.filter((function(e){return"remix"===e.category}));return o.a.createElement("div",{style:{height:"100%",width:"100%",fontFamily:Y.primaryFont,fontSize:"6rem",display:"flex"}},e.map((function(e,t){return o.a.createElement(Pt,{key:t,track:e})})))},zt=function(){var e=I(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],r=k(),i=(r.appMode,r.setAppMode);return o.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"red"},onClick:function(e){a(),i("projectInfo"),console.log("clicked about")}},o.a.createElement(Xt,{visible:n}))},Xt=function(e){e.visible;return o.a.createElement("div",null,o.a.createElement("div",null,"SeiSolo.io is a multimedia web installation exploring classical and electronic music, aiming to create a unique and accessible way of engaging with both. It features a recorded solo violin recital, five commissioned remixes of the recital repertoire, and a web-based software for users to remix on their own."),o.a.createElement("div",null,"Thanks to our donors, the Awesome Foundation of Raleigh, and Fractured Atlas for providing fiscal support."))},Kt=function(){var e=Object(a.useRef)(null);Object(a.useEffect)((function(){e.current=new AudioContext}),[]);var t=Object(a.useState)(E[0]),n=Object(c.a)(t,2),r=n[0],i=(n[1],Object(a.useState)(0)),s=Object(c.a)(i,2),l=s[0],u=(s[1],Object(a.useState)(De)),d=Object(c.a)(u,2),f=d[0],m=d[1];Object(a.useEffect)((function(){m(De)}),[]);var h=M().trackCategory,g=k().appMode;return Object(a.useEffect)((function(){Object(Ie.a)(f);"remix"===h&&m(De),"recital"===h&&m(_e)}),[h,g]),o.a.createElement("section",{id:"home-body",style:{width:"100vw"}},o.a.createElement(ze,{className:"layout",layout:Object(Ie.a)(f)},o.a.createElement(zt,{key:"projectInfo"}),o.a.createElement(Wt,{key:"oneRecitalText"}),o.a.createElement(Ft,{key:"recitalTracks"}),o.a.createElement(Yt,{key:"arrow"}),o.a.createElement(Bt,{key:"threeRemixes"}),o.a.createElement(Vt,{key:"remixes"}),o.a.createElement(Rt,{key:"title"}),o.a.createElement($e,{key:"trackInfo",track:r}),o.a.createElement(kt,{key:"waveform",progress:l,track:r}),o.a.createElement(lt,{key:"violin"})))};var Jt=function(){var e=k().appMode,t={width:"100vw",height:"100vh",backgroundColor:Y.primary,position:"absolute",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center",opacity:0};return i.a.createPortal(o.a.createElement(He.a.div,{className:"modal",variants:{visible:{opacity:1,transition:{duration:.3}},hidden:{opacity:0,transition:{duration:.3},pointerEvents:"none"}},animate:"projectInfo"===e?"visible":"hidden",style:t},o.a.createElement(Be,{style:{width:500,fontSize:"large"}},o.a.createElement("h1",{style:{fontSize:Y.bigFont,borderBottom:"1px solid black"}},"About"),o.a.createElement("div",null,"SeiSolo.io is a multimedia web installation exploring classical and electronic music, aiming to create a unique and accessible way of engaging with both. It features a recorded solo violin recital, five commissioned remixes of the recital repertoire, and a web-based software for users to remix on their own."),o.a.createElement("br",null),o.a.createElement("div",null,"Thanks to our donors, the Awesome Foundation of Raleigh, and Fractured Atlas for providing fiscal support."))),document.getElementById("about-modal"))},qt=function(){var e=k(),t=e.appMode,n=e.setAppMode;return i.a.createPortal(o.a.createElement(He.a.div,{className:"modal",variants:{visible:{translateY:0,opacity:1},hidden:{opacity:0,translateY:-50,transition:{duration:1},pointerEvents:"none"}},animate:"projectInfo"===t?"visible":"hidden",style:{width:"10vw",height:"10vw",backgroundColor:"red",position:"absolute",zIndex:10,display:"flex",justifyContent:"center",alignItems:"center",top:0,left:0},onClick:function(e){n("view")}},"aaaaaaa"),document.getElementById("return-button"))},Zt=function(){var e=Object(a.useRef)(null);Object(a.useEffect)((function(){e.current=new AudioContext}),[]);var t=Object(a.useState)(E[0]),n=Object(c.a)(t,2),r=(n[0],n[1],Object(a.useState)(0)),i=Object(c.a)(r,2),s=(i[0],i[1],k().appMode),l=Object(a.useState)(De),u=Object(c.a)(l,2),d=u[0],m=u[1];Object(a.useEffect)((function(){m(De)}),[]);var h=M().trackCategory;Object(a.useEffect)((function(){Object(Ie.a)(d);"remix"===h&&m(De),"recital"===h&&m(_e)}),[h,s]),console.log(d);return o.a.createElement(f.a,{store:Fe},o.a.createElement("section",{style:{width:"100vw"},className:"dot-fill"},o.a.createElement(Ue,null),o.a.createElement(qt,null),o.a.createElement(Jt,null),o.a.createElement(Kt,null)))};var Qt,$t,en=n(118),tn=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Z.a)(this,e),this.currentFps=void 0,this.isActive=void 0,this.msLastFrame=void 0,this.cb=void 0,this.totalTime=void 0,this.msFpsLimit=void 0,this.run=void 0,this.currentFps=0,this.isActive=!1,this.msLastFrame=performance.now(),this.cb=t,this.totalTime=0,a&&"number"===typeof a&&!Number.isNaN(a)?(this.msFpsLimit=1e3/a,this.run=function(){var e=performance.now(),t=e-n.msLastFrame;n.totalTime+=t;var a=t/1e3;t>=n.msFpsLimit&&(n.cb(a,n.totalTime),n.currentFps=Math.floor(1/a),n.msLastFrame=e),n.isActive&&window.requestAnimationFrame(n.run)}):this.run=function(){var e=performance.now(),t=(e-n.msLastFrame)/1e3;n.totalTime+=e-n.msLastFrame,n.cb(t,n.totalTime),n.currentFps=Math.floor(1/t),n.msLastFrame=e,n.isActive&&window.requestAnimationFrame(n.run)}}return Object(Q.a)(e,[{key:"changeCb",value:function(e){this.cb=e}},{key:"start",value:function(){return this.msLastFrame=performance.now(),this.isActive=!0,window.requestAnimationFrame(this.run),this}},{key:"stop",value:function(){return this.isActive=!1,this}}]),e}(),nn=n(191),an=n(192),on=Object(an.GLSL)(Qt||(Qt=Object(nn.a)(["\n#version 300 es    \nin vec4 position;\nvoid main() {\n  gl_Position = position;\n}\n"]))),rn=Object(an.GLSL)($t||($t=Object(nn.a)(["\n#version 300 es    \nprecision highp float;\nuniform vec2 iResolution;\nuniform float iTime;\nuniform sampler2D matCap;\nuniform sampler2D cloudNoise;\nuniform sampler2D canvas;\n\nout vec4 fragColor;\n\n\nvec4 blur5(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3333333333333333) * direction;\n  color += texture(image, uv) * 0.29411764705882354;\n  color += texture(image, uv + (off1 / resolution)) * 0.35294117647058826;\n  color += texture(image, uv - (off1 / resolution)) * 0.35294117647058826;\n  return color; \n}\n\nvec2 matcap(vec3 eye, vec3 normal) {\n  vec3 reflected = reflect(eye, normal);\n  float m = 2.8284271247461903 * sqrt( reflected.z+1.0 );\n  return reflected.xy / m + 0.5;\n}\n\nfloat fresnel(vec3 ray, vec3 normal, float ratio){\n  return pow(1. + dot(ray, normal), 3.);\n}\n\nfloat sdCapsule( vec3 p, vec3 a, vec3 b, float r )\n{\n  vec3 pa = p - a, ba = b - a;\n  float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n  return length( pa - ba*h ) - r;\n}\n\n\nfloat sdf(vec3 p){\n  // vec3 p1 = rotate(p, vec3(1.), iTime/5.);\n  // vec2 uv =  (-iResolution.xy + 2.0 * gl_FragCoord.xy)/iResolution.y;\n  vec2 uv =  gl_FragCoord.xy/iResolution.xy;\n  vec2 translate = vec2(-0.5, -0.5);\n  uv+=translate;\n  vec4 displacement = texture(canvas, uv-translate);\n  // float sdCapsule = sdCapsule(p, vec3(-1., -0., -0.), vec3(1., 0., 0.), sin(pow(uv.x, 2.)));\n  float sdCapsule = sdCapsule(p, vec3(-1., -0., -0.), vec3(1., 0., 0.), (pow(displacement.x+.01, .6)+.05*.2));\n  return sdCapsule;\n}\n\n\nvec3 calcNormal( in vec3 p ) // for function f(p)\n{\n    const float eps = 0.0001; // or some other value\n    const vec2 h = vec2(eps,0);\n    return normalize( vec3(sdf(p+h.xyy) - sdf(p-h.xyy),\n                           sdf(p+h.yxy) - sdf(p-h.yxy),\n                           sdf(p+h.yyx) - sdf(p-h.yyx) ) );\n}\n\nvoid main() {\n    vec2 uv =  gl_FragCoord.xy/iResolution.xy;\n    vec2 translate = vec2(-0.5, -0.5);\n    uv+=translate;\n    vec3 col = vec3(100., 100., 100.);\n    vec3 camPos = vec3(0., 0., 2.);\n    vec3 ray = normalize(vec3(uv, -1.));\n    float tMax = 5.;\n    //GRID\n    float gridLineWidth = 0.05; \n    float divisor = 30.;\n    vec2 Coord = uv;\n    \n    float dist= length(uv);\n    vec3 bg = mix(vec3(5.), vec3(0.5), dist);\n    float grid = min(\n        smoothstep(0.1, 0.25, abs(sin(uv.x * divisor))),\n        smoothstep(0.1, 0.25, abs(sin(uv.y * divisor)))\n    );\n    //ADD SECOND GRID\n\n    vec3 rayPos = camPos;\n    float t = 0.;\n\n    for(int i = 0; i < 256; i++){\n      vec3 pos = camPos + t*ray;\n      float h = sdf(pos);\n      if(h<0.001 || t>tMax) break;\n      t+=h;\n    }\n    if (t<tMax){\n      vec3 pos = camPos + t*ray;\n      col = vec3(1.);\n      vec3 normal = calcNormal(pos);\n      col = normal;\n      float diff = dot(vec3(1.), normal);\n      vec2 matcapUV = matcap(ray, normal);\n      col = vec3(diff);\n      col = vec3(matcapUV, 0.);\n      col = texture(matCap, matcapUV).rgb;\n      vec3 f = vec3(fresnel(ray, normal, 3.));\n      col = mix(col, bg, f);\n  }\n  fragColor = vec4(col, 1.0);\n  // fragColor = vec4(uv.x);\n  // fragColor = vec4(uv.y);\n  // fragColor = texture(canvas, uv);\n  // fragColor = tex\n\n\n}\n"]))),cn=function(){performance.now();var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useState)(!1),i=Object(c.a)(r,2),s=(i[0],i[1],Object(a.useState)([])),l=Object(c.a)(s,2),u=l[0],d=l[1];return Object(a.useEffect)((function(){!function(e,t){for(var n=[],a=e.length,o=function(){0==--a&&t(n)},r=0;r<a;++r){var i=sn(e[r],o);n.push(i)}console.log(n)}(["".concat("","/Textures/pinkMatcap.png"),"".concat("","/Textures/bunny_thickness.jpg"),"".concat("","/Textures/dataBig.jpg")],(function(e){d(e)}))}),[]),Object(a.useEffect)((function(){if(console.log("DOING THIS USE EFFECT"),t.current&&n.current&&e.current){var a=document.getElementsByClassName("gradient-canvas")[0].firstChild.firstChild;a.getContext("2d"),a.height,a.width;console.log(a);var o=e.current.getBoundingClientRect(),r=o.width,i=o.height,c=t.current;t.current.width=r,t.current.height=i,console.log(r,i);var s=ln(c,on,rn),l=s.gl,u=s.program,d=en.b(l,[on,rn]),f=un(l),m=function(e,t){var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);var a=0,o=e.RGBA,r=1,i=1,c=0,s=e.RGBA,l=e.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,a,o,r,i,c,s,l,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),n}(l),h=["".concat("","/Textures/pinkMatcap.png"),"".concat("","/Textures/cloudNoise.png"),"".concat("","/Textures/dataBig.jpeg")].map((function(e,t){return fn(l,{unit:t,url:e})})),g=dn(l,u,["iResolution","iTime","matCap","cloudNoise","canvas"]),p=g.iResolution,v=g.iTime,y=g.matCap,b=g.cloudNoise,w=g.canvas,E=c.getBoundingClientRect(),O=E.width,j=E.height;l.uniform2f(p,O,j),l.uniform1i(y,0),l.uniform1i(b,1),l.uniform1i(w,2),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,h[0]),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,h[1]),l.activeTexture(l.TEXTURE2),l.bindTexture(l.TEXTURE_2D,m);var x=new tn((function(e,t){l.uniform1f(v,t/1e3),en.d(l,d,f),en.c(l,f),function(e,t,n){var a=0,o=e.RGBA,r=e.RGBA,i=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,a,o,r,i,n)}(l,m,a)}));n.current.addEventListener("click",(function(){x.start()}))}}),[u]),o.a.createElement("section",{ref:e},o.a.createElement("canvas",{style:{border:"1px solid black",width:"100%",height:"30vh"},ref:t}),o.a.createElement("button",{ref:n,style:{border:"1px solid black",width:"100%",height:"2vh"}},"Press To Start"))};function sn(e,t){var n=new Image;return n.src=e,n.onload=t,n}var ln=function(e,t,n){var a=e.getContext("webgl2");if(console.log(a),a){a.clearColor(0,0,0,.9);var o=a.createShader(a.VERTEX_SHADER),r=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(o,t.trim()),a.shaderSource(r,n.trim()),a.compileShader(o),a.compileShader(r),a.getShaderParameter(o,a.COMPILE_STATUS)){if(a.getShaderParameter(r,a.COMPILE_STATUS)){var i=a.createProgram();return a.attachShader(i,o),a.attachShader(i,r),a.linkProgram(i),a.getProgramParameter(i,a.LINK_STATUS)||console.log(a.getProgramInfoLog(i)),a.useProgram(i),{gl:a,program:i}}console.error(a.getShaderInfoLog(r))}else console.error(a.getShaderInfoLog(o))}else document.write("Please change to a browser which supports WebGl 2.0~")},un=function(e){e.enable(e.DEPTH_TEST);return en.a(e,{position:{numComponents:2,data:[-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]}})},dn=function(e,t,n){var a=n.map((function(n){return[n,e.getUniformLocation(t,n)]}));return Object.fromEntries(a)},fn=function(e,t){var n=t.url,a=(t.unit,e.createTexture());e.bindTexture(e.TEXTURE_2D,a);var o=e.RGBA,r=e.RGBA,i=e.UNSIGNED_BYTE,c=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,0,o,1,1,0,r,i,c);var s=new Image;return s.onload=function(){console.log("LOADED TEXTURE",s.src),e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,o,r,i,s),e.generateMipmap(e.TEXTURE_2D)},s.src=n,console.log(s.src),a};Object(Ie.a)(Array(10)).map((function(e,t){return{id:t.toString(),x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,rotation:180*Math.random(),isDragging:!1}}));var mn,hn,gn,pn,vn,yn,bn,wn=function(){var e=Object(a.useState)(1),t=Object(c.a)(e,2),n=(t[0],t[1],Object(a.useState)({x:0,y:0})),r=Object(c.a)(n,2),i=(r[0],r[1],Object(a.useState)([])),s=Object(c.a)(i,2),l=(s[0],s[1]),u=Object(a.useState)(null),d=Object(c.a)(u,2),f=(d[0],d[1],Object(a.useRef)(null));Object(a.useRef)(null);Object(a.useEffect)((function(){if(v&&v.current){var e=v.current.getClientRect(),t=[];t.push({x:e.x+e.width/2,y:e.y}),l(t)}}),[f]);Object(a.useEffect)((function(){document.getElementsByClassName("gradient-canvas")[0].firstChild.firstChild}),[]);var m=window.innerWidth,h=Array.from(Array(200).keys()),g=[],p=4e3;h.forEach((function(e,t){var n=20*t,a=t%2*200,o="rgb(".concat(a,", ").concat(a,", ").concat(a,")");g.push(n/p),g.push(o)})),Object(a.useEffect)((function(){console.log(g),console.log([].concat(g))}),[g]),console.log(g);var v=Object(a.useRef)();return o.a.useEffect((function(){}),[]),o.a.createElement(W.g,{width:window.innerWidth,height:281,id:"gradient-canvas",className:"gradient-canvas"},o.a.createElement(W.d,{id:"gradient-canvas"},o.a.createElement(W.f,{ref:v,x:0,y:0,width:p,height:200,numPoints:5,innerRadius:20,outerRadius:40,scaleX:30,opacity:.8,draggable:!0,shadowColor:"black",shadowBlur:10,shadowOpacity:.6,fillLinearGradientStartPoint:{x:0,y:200},fillLinearGradientEndPoint:{x:m,y:200},fillLinearGradientColorStops:g})))},En=function(){return o.a.createElement("section",null,o.a.createElement(cn,null),o.a.createElement(wn,null))},On=function(){var e=j((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),t=j((function(e){return e.compositionsModel.processCompositions})),n=j((function(e){return e.googleSheetsModel.fetchCompositionsSheet})),r=j((function(e){return e.googleSheetsModel.fetchSamplesSheet})),i=I(!1),s=Object(c.a)(i,2),l=(s[0],s[1]);return Object(L.a)({keyCode:70,action:function(){l()},disabled:!1}),Object(a.useEffect)((function(){e(),t(),n(),r()}),[e]),o.a.createElement(N.a,null,o.a.createElement(_.a,{path:"/app",component:Ae}),o.a.createElement(f.a,{store:Fe},o.a.createElement(_.a,{path:"/",exact:!0,component:Zt})),o.a.createElement(_.a,{path:"/testing",component:En}))},jn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,641)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),r(e),i(e)}))};!function(e){e[e.SampleTraySample=0]="SampleTraySample",e[e.EDITOR=1]="EDITOR",e[e.PLACEHOLDER=2]="PLACEHOLDER",e[e.IFRAME=3]="IFRAME"}(mn||(mn={})),function(e){e[e.SAMPLE_TRAY=0]="SAMPLE_TRAY"}(hn||(hn={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC"}(gn||(gn={})),function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(pn||(pn={})),function(e){e.BACH_MOVEMENT_1="BACH_MOVEMENT_1",e.BACH_MOVEMENT_2="BACH_MOVEMENT_2",e.BACH_MOVEMENT_3="BACH_MOVEMENT_3A",e.BACH_MOVEMENT_4="BACH_MOVEMENT_4",e.BARTOK_MOVEMENT_1="BARTOK_MOVEMENT_1",e.BARTOK_MOVEMENT_2="BARTOK_MOVEMENT_2",e.YSAE_MOVEMENT_1="YSAE_MOVEMENT_1"}(vn||(vn={})),function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(yn||(yn={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(bn||(bn={}));var xn=function(){function e(t){Object(Z.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(Q.a)(e,[{key:"validate",value:function(e){var t,n,a=function(e){var t=[],n=e.target;try{var a;null===(a=n.contentWindow)||void 0===a||a.name}catch(o){if(!o.message.includes("cross-origin"))return[];console.log(o.message),t.push(yn.CROSS_ORIGIN)}return t}(e);console.log(a),(t=this.errors).push.apply(t,Object(Ie.a)(a)),console.log(this.errors);var o=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(bn.MALFORMED_URL);return t}(this.url);(n=this.warnings).push.apply(n,Object(Ie.a)(o)),console.log(o)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){if(n===yn.CROSS_ORIGIN)t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));else console.log("error did not match an error enum")})),t}}]),e}();var Cn=function(){function e(t){Object(Z.a)(this,e),this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=gn[t.interaction],this.isActive=!1,this.validator=new xn(this.src),this.failed=!1}return Object(Q.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){this.failed=!0}}]),e}(),Sn=[{i:"https://seisolo.io",x:0,y:0,w:1,h:1,static:!1},{i:"https://seisolo2.io",x:1,y:0,w:1,h:1,static:!1},{i:"https://seisolo3.io",x:2,y:0,w:1,h:1,static:!1},{i:"https://seisolo4.io",x:3,y:0,w:1,h:1,static:!1}],Tn={lg:Sn,md:Sn,sm:Sn,xs:Sn,xxs:Sn};console.log(JSON.stringify(Tn));var kn=Tn,Mn=function(){function e(){Object(Z.a)(this,e),this.events=void 0,this.currentStep=void 0;this.events=[],this.currentStep=0}return Object(Q.a)(e,[{key:"addEditEvent",value:function(e){this.currentStep+=1,this.events.push(e)}},{key:"undo",value:function(){return console.log(this.currentStep),this.currentStep-=1,this.events[this.currentStep]}},{key:"redo",value:function(){return console.log(this.currentStep),this.currentStep+=1,this.events[this.currentStep]}}]),e}(),Rn={availableCards:[],activeCards:[],currentLayout:kn,appMode:pn.DISPLAY,history:new Mn,manageViewModeChange:Object(f.h)((function(e,t){switch(e.setAppMode(t),t){case pn.EDIT:case pn.DISPLAY:case pn.CYCLE:}})),toggleViewMode:Object(f.h)((function(e,t,n){var a=n.getState;switch(console.log("toggling view mod "),a().appMode){case pn.EDIT:e.setAppMode(pn.DISPLAY);break;case pn.DISPLAY:e.setAppMode(pn.EDIT);case pn.CYCLE:}})),setCurrentLayout:Object(f.b)((function(e,t){e.currentLayout=t})),setAvailableCards:Object(f.b)((function(e,t){console.log("setting available cards"),e.availableCards=t})),setActiveCards:Object(f.b)((function(e,t){console.log("setting active cards"),console.log(t),e.activeCards=t})),setAppMode:Object(f.b)((function(e,t){console.log("setting view mode"),e.appMode=t})),onCardSheetLoadSuccess:Object(f.c)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){var n=t.payload.getSheetRows(0).map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new Cn(e)}));e.availableCards=n})),onSetActiveLayout:Object(f.i)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(l.a)(d.a.mark((function e(t,n,a){var o,r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,r=n.payload.sources().filter((function(e){return"clock"!==e})),i=o().availableCards.map((function(e){return r.includes(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),c=o().availableCards.filter((function(e){return r.includes(e.sourceId)})),t.setAvailableCards(i),t.setActiveCards(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(f.h)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var o=a().activeCards,r=t.sourceId,i=o.map((function(e){return e.sourceId===r&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(i)})),onSwapCardContent:Object(f.i)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(l.a)(d.a.mark((function e(t,n,a){var o,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.getState,console.log("got swap card content"),console.log(n.payload),console.log(o().activeCards),(r=o().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=o().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(r),console.log(Object(f.g)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),onUndoHistory:Object(f.i)((function(e,t){return t.historyModel.setCurrentHistory}),function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got undo"),console.log(n.payload),t.setCurrentLayout(n.payload),console.log(Object(f.g)(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onRedoHistory:Object(f.i)((function(e,t){return t.historyModel.setCurrentHistory}),function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got redo"),console.log(n.payload),t.setCurrentLayout(n.payload),console.log(Object(f.g)(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},An=Rn,In=n(38),Dn=n(144),Ln=n(345),Nn=n.n(Ln),_n=function(){function e(){var t=this;Object(Z.a)(this,e),this.collectSamplePoints=function(e,t){var n=e.duration,a=e.duration,o=oe(a,0,2.5,100,400);console.log(a);for(var r=[],i=0;i<10;i++){var c=.1*i*n,s=e.channel(0),l=e.at_time(c),u=s.max_sample(l),d=i/10,f=d*o;console.log(d);var m=oe(u,0,100,0,40);m+=10;var h={x:f,y:Math.round(m)};r.push(h)}var g=r.map((function(e){return[e.x,e.y]}));g.push([g[g.length-1][0],0]);var p=r.map((function(e){return[e.x,0-e.y]})).reverse(),v=[p[p.length-1][0],g[0][1]];p.push(v);var y=[].concat(Object(Ie.a)(g),Object(Ie.a)(p));return Nn.a.toPath(y,4,!0)},this.data=void 0,this.audioContext=void 0,this.getAudio=function(e){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(n){var a={audio_context:t.audioContext,array_buffer:n,scale:128};return new Promise((function(t,n){Dn.a.createFromAudio(a,(function(a,o){a?(console.error("FAILED TO CREATE AUDIO FROM URL ".concat(e)),n(a)):t(o)}))}))}))},this.data=[],this.audioContext=new AudioContext}return Object(Q.a)(e,[{key:"generateSVG",value:function(e){var t=this;return console.log(e.src),this.getAudio(e.src).then((function(n){var a=t.collectSamplePoints(n,e);return e.setPath(a),e})).catch((function(t){return e}))}}]),e}();var Pn=function(){function e(t,n){Object(Z.a)(this,e),this.title=void 0,this.url=void 0,this.waveFormData=void 0,this.title=t,this.waveFormData,this.url=n}return Object(Q.a)(e,[{key:"buildWaveform",value:function(){var e=this;return Fn(this.url).then((function(t){return e.waveFormData=t,new Promise((function(e,n){e(t)}))}))}}]),e}(),Fn=function(e){var t=new AudioContext;return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){var n={audio_context:t,array_buffer:e,scale:128};return new Promise((function(e,t){Dn.a.createFromAudio(n,(function(n,a){n?t(n):e(a)}))}))}))},Hn=[function(){var e="".concat("","/")+"BACH2.mp3",t=new Pn("Bach Movement 2",e);return console.log(t),t}()],Bn=n(98),Un=n.n(Bn),Gn={compositions:Hn,processCompositions:Object(f.h)((function(e,t,n){var a=n.getState;console.log("processing compositions");var o=a(),r=Object(s.a)({},o).compositions;console.log(r);var i=new _n,c=r.map((function(e){return i.getAudio(e.url)}));Promise.allSettled(c).then((function(t){for(var n=[],a=0;a<t.length;a++){var o=t[a],i=Object(Ie.a)(r)[a];console.log(o),"fulfilled"==o.status&&(i.waveFormData=o.value,n.push(i))}console.log("SETTINGS COMPOSITOINS"),console.log(n),e.setCompositions(n),e.downloadAnalysis()}))})),setCompositions:Object(f.b)((function(e,t){console.log("setting samples"),e.compositions=t})),downloadAnalysis:Object(f.b)((function(e){console.log(e.compositions[0].waveFormData.toJSON().data);var t=e.compositions.map((function(e){return{title:e.title,url:e.url,data:JSON.stringify(e.waveFormData)}})),n=Un.a.unparse(t);console.log(t[0].data.length);new Blob([n],{type:"text/csv;charset=utf-8;"})}))},Yn={key:"1eq33_1yJS6EZjqBvxWgL7nDP0OxC8bMdJJqU7Akp_3E",sheet_number:1},Wn=n(346),Vn=function(){function e(t,n,a){Object(Z.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=a}return Object(Q.a)(e,[{key:"getSheetRows",value:function(e){return this.sheets[e]}},{key:"loadSheets",value:function(e,t){var n=new Wn.GoogleSpreadsheet(e);n.useApiKey(t);var a=[];return n.loadInfo().then((function(){return n.sheetsByIndex.forEach((function(e){var t=e.getRows();a.push(t)})),a}))}}]),e}(),zn={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,samplesSheet:[],compositionsSheet:void 0,fetchCompositionsSheet:Object(f.h)(function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jn("/TEST_ANALYSIS.csv"),Kn(n,(function(e){t.setCompositionsSheet(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchSamplesSheet:Object(f.h)(function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Fetching Samples"),console.log("USING PREPROCESSED SAMPLE SHEET"),n=Jn("/CLIPS_4.csv"),Kn(n,(function(e){t.setSamplesSheet(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(f.h)(function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vn.prototype.loadSheets(Yn.key,"AIzaSyBo7S3o_RHuyBnG3Z7ywlvz3FbtKU9n0MQ").then((function(e){Promise.all(e).then((function(e){var n=new Vn("DSC App",Yn.key,e);t.setAppGoogleSheetData(n)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(f.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(f.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(f.b)((function(e,t){e.layoutDataGoogleSheet=t})),setCompositionsSheet:Object(f.b)((function(e,t){t.data=t.data})),setSamplesSheet:Object(f.b)((function(e,t){e.samplesSheet=t}))},Xn=zn,Kn=function(e,t){Un.a.parse(e,{download:!0,header:!0,complete:function(e){t(e)}})},Jn=function(e){return e.endsWith(".csv")||console.error("Failed to load csv, wrong extension (not .csv)"),""+e},qn={history:new Mn,undoHistory:Object(f.h)((function(e,t,n){var a=n.getState;e.undoIt(),e.setCurrentHistory(a().history.undo())})),undoIt:Object(f.b)((function(e){e.history.undo(),console.log(e.history.currentStep)})),redoIt:Object(f.b)((function(e){e.history.redo(),console.log(e.history.currentStep)})),setCurrentHistory:Object(f.b)((function(e,t){console.log(t)})),addEditHistory:Object(f.b)((function(e,t){console.log("adding edit history"),console.log(t);var n=JSON.stringify(t);console.log(n),e.history.addEditEvent(t)}))},Zn=(n(638),function(){function e(t){Object(Z.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.layout=void 0,this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]);var n=JSON.parse(t.layout);this.layout=n}return Object(Q.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(c.a)(n[t],2),r=o[0],i=o[1],s=Object(In.a)(i.entries());try{for(s.s();!(a=s.n()).done;){var l=Object(c.a)(a.value,2),u=l[0];l[1].i==e.targetId&&(i[u].i=e.sourceId)}}catch(d){s.e(d)}finally{s.f()}this.layout[r]=i}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var a,o=Object(c.a)(n[t],2),r=o[0],i=o[1],s=Object(In.a)(i.entries());try{for(s.s();!(a=s.n()).done;){var l=Object(c.a)(a.value,2);l[0],l[1];this.layout[r]=i.filter((function(t){return t.i!==e.sourceId}))}}catch(u){s.e(u)}finally{s.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout);for(var n=0,a=Object.entries(this.layout);n<a.length;n++){var o=Object(c.a)(a[n],2),r=o[0],i=(o[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[r].push(i)}}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}}]),e}());var Qn={activeLayout:void 0,externalLayouts:[],bufferLayout:kn,tempLayout:kn,onSetAppGoogleSheetData:Object(f.i)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){var n=t.payload.getSheetRows(1).map((function(e){return{title:e.title,author:e.author,timestamp:e.timestamp,layout:e.layout,interaction:e.interaction}})).map((function(e){return new Zn(e)})),a=n[0];a.layout=kn,e.setActiveLayout(a),e.setExternalLayouts(n),e.setBufferLayout(n[0].layout)})),onToggleViewModeListener:Object(f.i)((function(e,t){return t.appModel.toggleViewMode}),(function(e,t,n){var a=n.getState,o=n.getStoreState,r=a().activeLayout,i=a().bufferLayout;o().appModel.appMode===pn.DISPLAY&&null!==r&&void 0!==r&&r.layout&&(r.layout=i,e.setActiveLayout(r))})),setActiveLayout:Object(f.b)((function(e,t){e.activeLayout=t})),setExternalLayouts:Object(f.b)((function(e,t){e.externalLayouts=t})),swapCardContent:Object(f.h)((function(e,t,n){var a=n.getState,o=n.getStoreState,r=(n.getStoreActions,o(),a().activeLayout);if(r){var i=a().bufferLayout;r.layout=i,r.swapCard(t),e.setActiveLayout(r)}})),deleteCard:Object(f.h)((function(e,t,n){var a=n.getState;n.getStoreState,n.getStoreActions,a().activeLayout;console.log("got here");var o=a().activeLayout;if(o){var r=a().bufferLayout;o.layout=r,o.removeCard(t),e.setActiveLayout(o)}})),addCard:Object(f.h)((function(e,t,n){var a=n.getState,o=n.getStoreState;console.log("adding card"),console.log(t);var r=o().appModel.availableCards,i=t.sourceId,c=t.targetPosition,s=r.find((function(e){return e.sourceId==i})),l=a().activeLayout;if(l&&s){var u=a().bufferLayout;console.log(Object(f.g)(u)),l.setGridLayout(u),null===l||void 0===l||l.addCard(s,c),e.setActiveLayout(l),console.log(s)}})),registerCardLoadFailure:Object(f.h)((function(e,t,n){var a=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var o=a().activeLayout;o&&o.failCard(t)})),setBufferLayout:Object(f.b)((function(e,t){console.log("setting buffer layout"),console.log(t),e.bufferLayout=t})),setTempLayout:Object(f.b)((function(e,t){console.log("setting buffer layout"),console.log(t),e.tempLayout=t})),updateLayout:Object(f.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),console.log(n.layout),e.activeLayout=n)}))},$n={data:[],setData:Object(f.b)((function(e,t){e.data=t}))},ea=function(){function e(t){var n=this;Object(Z.a)(this,e),this.id=void 0,this.src=void 0,this.tags=void 0,this.svgPath=void 0,this.filename=void 0,this.length=void 0,this.composition=void 0,this.startTime=void 0,this.endTime=void 0,this.w=void 0,this.h=void 0,this.konvaObject=void 0,this.fit=void 0,this.setPath=function(e){n.svgPath=e};var a=t.filename,o=t.tags,r=t.composition,i=(t.starTime,t.endTime,t.hour,t.svgPath),c=t.length,s="".concat("","/Clips/")+a,l=new Date("1995-12-17T03:24:00"),u=new Date("1995-12-17T03:24:01");this.id=a,this.src=s,this.tags=o.split(","),this.startTime=l,this.endTime=u,this.composition=r,this.filename=a,this.svgPath=i,this.length=c,this.konvaObject=void 0,this.w=void 0,this.h=void 0,this.fit=void 0}return Object(Q.a)(e,[{key:"calculateDimensions",value:function(e,t){this.w=oe(this.length,0,6.5,0,e-0),this.h=t}}]),e}(),ta=["DNB_BREAK_134-1.wav","Samples/s1.wav"],na=function(e){for(var t=[],n=(new Date("1995-12-17T03:24:00"),new Date("1995-12-17T03:24:01"),0);n<e;n++){var a="".concat("","/")+ae(ta,1)[0],o={composition:"placeHolderSample_".concat(n),starTime:"1995-12-17T03:24:00",endTime:"1995-12-17T03:24:01",tags:"MR, FD",date:"2021-09-24",hour:"222332",svgPath:"",length:1,filename:a},r=(ae(me,3),new ea(o));t.push(r)}return t}(30),aa={samples:na,draggingSample:na[0].id,onSetSamplesSheets:Object(f.i)((function(e,t){return t.googleSheetsModel.setSamplesSheet}),(function(e,t){var n=t.payload,a=n.map((function(e){return new ea(e)}));e.setSamples(a)})),processSamples:Object(f.h)((function(e,t,n){var a=n.getState;console.log("processing samples");var o=a(),r=Object(s.a)({},o).samples;console.log(r);var i=new _n,c=r.map((function(e){return i.generateSVG(e)}));Promise.allSettled(c).then((function(t){var n,a=[],o=Object(In.a)(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;"fulfilled"===r.status&&a.push(r.value)}}catch(i){o.e(i)}finally{o.f()}e.setSamples(a)})),console.log(c)})),loadSamples:Object(f.h)((function(e){console.log("processing samples")})),setSamples:Object(f.b)((function(e,t){e.samples=t})),setDraggingSample:Object(f.b)((function(e,t){console.log("setting samples"),e.draggingSample=t}))},oa={appModel:An,historyModel:qn,layoutsModel:Qn,googleSheetsModel:Xn,samplesModel:aa,compositionsModel:Gn,logModel:$n};var ra=Object(f.e)(oa,{devTools:!1,middleware:[]});i.a.render(o.a.createElement(f.a,{store:ra},o.a.createElement(On,null)),document.getElementById("root")),jn()}},[[629,1,2]]]);
//# sourceMappingURL=main.0aa6d25e.chunk.js.map