(this.webpackJsonpseisolo=this.webpackJsonpseisolo||[]).push([[0],{149:function(e,t){},168:function(e,t,n){},315:function(e,t,n){},316:function(e,t,n){},318:function(e,t,n){},319:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){},403:function(e,t,n){},420:function(e,t,n){},438:function(e,t,n){},452:function(e,t,n){},482:function(e,t){},484:function(e,t){},521:function(e,t){},523:function(e,t){},555:function(e,t){},556:function(e,t){},561:function(e,t){},563:function(e,t){},570:function(e,t){},589:function(e,t){},653:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"enter",(function(){return te})),n.d(o,"exit",(function(){return ne})),n.d(o,"entered",(function(){return oe}));var a={};n.r(a),n.d(a,"quadIn",(function(){return ie})),n.d(a,"quadOut",(function(){return ce})),n.d(a,"quadInOut",(function(){return se})),n.d(a,"cubicIn",(function(){return ue})),n.d(a,"cubicOut",(function(){return le})),n.d(a,"cubicInOut",(function(){return de})),n.d(a,"quartIn",(function(){return fe})),n.d(a,"quartOut",(function(){return pe})),n.d(a,"quartInOut",(function(){return he})),n.d(a,"quintIn",(function(){return ge})),n.d(a,"quintOut",(function(){return me})),n.d(a,"quintInOut",(function(){return ve})),n.d(a,"sineIn",(function(){return be})),n.d(a,"sineOut",(function(){return ye})),n.d(a,"sineInOut",(function(){return Oe})),n.d(a,"expoIn",(function(){return Se})),n.d(a,"expoOut",(function(){return Ee})),n.d(a,"expoInOut",(function(){return je})),n.d(a,"circIn",(function(){return Ce})),n.d(a,"circOut",(function(){return we})),n.d(a,"circInOut",(function(){return ke})),n.d(a,"backIn",(function(){return Me})),n.d(a,"backOut",(function(){return xe})),n.d(a,"backInOut",(function(){return Ie}));var r={};n.r(r),n.d(r,"enter",(function(){return et})),n.d(r,"exit",(function(){return tt})),n.d(r,"entered",(function(){return nt}));var i={};n.r(i),n.d(i,"enter",(function(){return at})),n.d(i,"exit",(function(){return rt})),n.d(i,"entered",(function(){return it}));var c={};n.r(c),n.d(c,"enter",(function(){return ct})),n.d(c,"exit",(function(){return st})),n.d(c,"entered",(function(){return ut}));var s={};n.r(s),n.d(s,"enter",(function(){return dt})),n.d(s,"exit",(function(){return ft})),n.d(s,"entered",(function(){return pt}));var u={};n.r(u),n.d(u,"enterExit",(function(){return ht})),n.d(u,"enter",(function(){return gt})),n.d(u,"exit",(function(){return mt})),n.d(u,"entered",(function(){return vt}));var l={};n.r(l),n.d(l,"enter",(function(){return bt})),n.d(l,"exit",(function(){return yt})),n.d(l,"entered",(function(){return Ot}));var d={};n.r(d),n.d(d,"enter",(function(){return St})),n.d(d,"exit",(function(){return Et})),n.d(d,"entered",(function(){return jt}));var f=n(0),p=n.n(f),h=n(34),g=n.n(h),m=(n(315),n(316),n(75)),v=n(12),b=n(2),y=Object(b.e)(),O=y.useStoreActions,S=(y.useStoreDispatch,y.useStoreState);n(318);var E,j,C,w,k,M=p.a.forwardRef((function(e,t){var n,o=e.children,a=e.className,r=e.backgroundColor,i=e.column,c=e.padding,s=e.width,u=e.height,l=i?"flex-column ":"flex-row ",d={backgroundColor:null!==r&&void 0!==r?r:"rgba(0,0,0,0)",padding:c,borderRadius:"1em",width:null!==s&&void 0!==s?s:"100%",height:null!==u&&void 0!==u?u:"100%",backdropFilter:e.backgroundBlur?"blur(10px)":""};return p.a.createElement("div",{className:null!==(n="ui-section "+l+a)&&void 0!==n?n:"",style:d,ref:t},o)})),x=(n(319),n(30)),I=n(3),A=n(110),L=(n(333),n(168),function(e){var t=e.children,n=e.width,o=e.height,a={width:null!==n&&void 0!==n?n:"100%",height:null!==o&&void 0!==o?o:"100%"};return p.a.createElement("div",{className:"dimmer-container",style:a},p.a.createElement("div",{className:"dimmer"},p.a.createElement("div",{className:"dimmer-inner"},t)))});!function(e){e[e.SampleTraySample=0]="SampleTraySample",e[e.EDITOR=1]="EDITOR",e[e.PLACEHOLDER=2]="PLACEHOLDER",e[e.IFRAME=3]="IFRAME"}(E||(E={})),function(e){e[e.SAMPLE_TRAY=0]="SAMPLE_TRAY"}(j||(j={})),function(e){e.ACTIVE="ACTIVE",e.STATIC="STATIC"}(C||(C={})),function(e){e.DISPLAY="DISPLAY",e.EDIT="EDIT",e.CYCLE="CYCLE"}(w||(w={})),function(e){e.BACH_MOVEMENT_1="BACH_MOVEMENT_1",e.BACH_MOVEMENT_2="BACH_MOVEMENT_2",e.BACH_MOVEMENT_3="BACH_MOVEMENT_3A",e.BACH_MOVEMENT_4="BACH_MOVEMENT_4",e.BARTOK_MOVEMENT_1="BARTOK_MOVEMENT_1",e.BARTOK_MOVEMENT_2="BARTOK_MOVEMENT_2",e.YSAE_MOVEMENT_1="YSAE_MOVEMENT_1"}(k||(k={}));var T=n(35),D=(n(334),function(e){var t=e.children,n=e.className;e.dropCategory,Object(T.a)(e,["children","className","dropCategory"]);return p.a.createElement(m.c,{isDropDisabled:!1,droppableId:"sample tray"},(function(e,o){return p.a.createElement("div",Object.assign({},e.innerRef,{ref:e.innerRef,className:o.isDraggingOver?"droppable-hovered "+n:"droppable "+n}),p.a.createElement("div",{className:o.isDraggingOver?"droppable-overlay droppable-overlay-visible":"droppable-overlay droppable-overlay-hidden"}),t,e.placeholder)}))}),R=[{i:"https://seisolo.io",x:0,y:0,w:1,h:1,static:!1},{i:"https://seisolo2.io",x:1,y:0,w:1,h:1,static:!1},{i:"https://seisolo3.io",x:2,y:0,w:1,h:1,static:!1},{i:"https://seisolo4.io",x:3,y:0,w:1,h:1,static:!1}],_={lg:R,md:R,sm:R,xs:R,xxs:R};console.log(JSON.stringify(_));var P=_,W=(n(336),function(e){var t=e.width,n=e.height,o=S((function(e){return e.appModel.appMode})),a=O((function(e){return e.layoutsModel.setBufferLayout})),r=S((function(e){return e.layoutsModel.activeLayout})),i=(Object(f.useMemo)((function(){return o===w.EDIT}),[o]),S((function(e){return e.appModel.activeCards}))),c=Object(f.useState)([]),s=Object(v.a)(c,2),u=(s[0],s[1]),l=Object(f.useState)(P),d=Object(v.a)(l,2),h=(d[0],d[1]),g=Object(f.useState)(null===r||void 0===r?void 0:r.layout),m=Object(v.a)(g,2),b=m[0],y=m[1],j=Object(f.useRef)(null);Object(f.useRef)(""),Object(A.WidthProvider)(A.Responsive);Object(f.useEffect)((function(){var e=function(e,t){for(var n=[],o=0;o<e;o++)for(var a=0;a<t;a++)n.push({x:a,y:o});var r=n.map((function(e){return{x:e.x,y:e.y,w:1,h:1,i:"empty_card_[".concat(e.x,", ").concat(e.y,"]"),minW:1,maxW:1,minH:1,maxH:1,static:!1,isDraggable:!1,isResizable:!1,resizeHandles:[]}}));return r.shift(),r.shift(),{lg:r,md:r,sm:r,xs:r,xxs:r}}(1,4),t=e.lg.filter((function(e){return e.i.startsWith("empty")})).map((function(e){return e.i}));u(t),h(e),y(null===r||void 0===r?void 0:r.layout),(null===r||void 0===r?void 0:r.layout)&&(j.current=null===r||void 0===r?void 0:r.layout)}),[i,r]);var C={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:4,md:4,sm:4,xs:4,xxs:4},width:t,rowHeight:null!==n&&void 0!==n?n:100,margin:[0,0],preventCollision:!0,compactType:"horizontal",isBounded:!0,maxRows:1,useCSSTransfroms:!0};return p.a.createElement(p.a.Fragment,null,b?p.a.createElement(A.Responsive,Object.assign({},C,{className:"card-layout",layouts:b,resizeHandles:["se"],preventCollision:!1,cols:{lg:4,md:4,sm:4,xs:4},onDragStart:function(e,t,n,o,a,r){r.style.border="2px solid cyan",r.style.border="4px solid cyan"},onDrop:function(e,t,n){console.log(e,t,n)},onLayoutChange:function(e){var t={lg:e,md:e,sm:e,xs:e,xxs:e};j.current=t,a(j.current)},isDraggable:!0,isResizable:!1}),i.map((function(e,o){return p.a.createElement("div",{key:e.sourceId,className:"draggable-widget"},p.a.createElement(D,{key:o,droppableId:e.sourceId,dropCategory:E.IFRAME},p.a.createElement(L,{width:t/4,height:n},p.a.createElement("div",null,e.title))))}))):p.a.createElement("div",{className:"centered-flex"},"not loaded"))}),N=p.a.memo(W);n(337);var H=function(e){var t=e.children,n=e.height;return p.a.createElement(M,{width:"80%",height:n,backgroundColor:"green",className:"track-container",padding:"0em"},t)},z=function(){Object(f.useRef)();var e=Object(f.useState)(200),t=Object(v.a)(e,2),n=t[0];t[1];return Object(f.useEffect)((function(){}),[]),p.a.createElement(M,{height:"100vh",className:"editor-container"},p.a.createElement(H,{height:n},p.a.createElement(N,{height:n,width:1500})))},F=(n(338),n(662)),G=n(663),B=function(){return p.a.createElement(F.a,{icon:G.a})},U=function(e){var t=e.onMouseUp;return p.a.createElement("div",{onMouseUp:t,style:{position:"absolute",left:"50%",top:-50},className:"close-button-container"},p.a.createElement(B,null))},Y=n(659),V=function(e){var t=e.children;return p.a.createElement(Y.a,{paddingBottom:".5em"},t)},q=(n(401),n(402),n(403),n(293)),X=n.n(q),J=n(73),K=n.n(J),Z=n(1),Q=n.n(Z),$=function(e,t){var n=t.columnWidth,o=t.itemHeight,a=void 0===o?150:o,r=t.columns,i=t.gutterWidth,c=t.gutterHeight;return{positions:e.map((function(e,t){var o=t%r,s=Math.floor(t/r);return[o*n+o*i,s*a+s*c]})),gridWidth:r*n+(r-1)*i,gridHeight:Math.ceil(e.length/r)*(a+c)-c}},ee=function(){return{scale:0,opacity:0}},te=ee,ne=ee,oe=function(){return{scale:1,opacity:1}},ae={columns:Q.a.number.isRequired,columnWidth:Q.a.number.isRequired,gutterWidth:Q.a.number,gutterHeight:Q.a.number,component:Q.a.string,layout:Q.a.func,enter:Q.a.func,entered:Q.a.func,exit:Q.a.func,perspective:Q.a.number,lengthUnit:Q.a.string,angleUnit:Q.a.string},re={lengthUnit:"px",angleUnit:"deg",component:"div",gutterWidth:0,gutterHeight:0,layout:$,enter:te,entered:oe,exit:ne},ie="cubic-bezier(0.55, 0.085, 0.68, 0.53)",ce="cubic-bezier(0.25, 0.46, 0.45, 0.94)",se="cubic-bezier(0.455, 0.03, 0.515, 0.955)",ue="cubic-bezier(0.55, 0.055, 0.675, 0.19)",le="cubic-bezier(0.215, 0.61, 0.355, 1)",de="cubic-bezier(0.645, 0.045, 0.355, 1)",fe="cubic-bezier(0.895, 0.03, 0.685, 0.22)",pe="cubic-bezier(0.165, 0.84, 0.44, 1)",he="cubic-bezier(0.77, 0, 0.175, 1)",ge="cubic-bezier(0.755, 0.05, 0.855, 0.06)",me="cubic-bezier(0.23, 1, 0.32, 1)",ve="cubic-bezier(0.86, 0, 0.07, 1)",be="cubic-bezier(0.47, 0, 0.745, 0.715)",ye="cubic-bezier(0.39, 0.575, 0.565, 1)",Oe="cubic-bezier(0.445, 0.05, 0.55, 0.95)",Se="cubic-bezier(0.95, 0.05, 0.795, 0.035)",Ee="cubic-bezier(0.19, 1, 0.22, 1)",je="cubic-bezier(1, 0, 0, 1)",Ce="cubic-bezier(0.6, 0.04, 0.98, 0.335)",we="cubic-bezier(0.075, 0.82, 0.165, 1)",ke="cubic-bezier(0.785, 0.135, 0.15, 0.86)",Me="cubic-bezier(0.6, -0.28, 0.735, 0.045)",xe="cubic-bezier(0.175, 0.885, 0.32, 1.275)",Ie="cubic-bezier(0.68, -0.55, 0.265, 1.55)",Ae=[{name:"translateX",unit:"length"},{name:"translateY",unit:"length"},{name:"perspective",unit:"length"},{name:"translateZ",unit:"length"},{name:"skew",unit:"angle"},{name:"skewX",unit:"angle"},{name:"skewY",unit:"angle"},{name:"scale"},{name:"scaleX"},{name:"scaleY"},{name:"scaleZ"},{name:"rotate",unit:"angle"},{name:"rotateX",unit:"angle"},{name:"rotateY",unit:"angle"}],Le=function(e){return{translateX:e[0],translateY:e[1]}},Te=function(e,t,n){var o=[];return Ae.forEach((function(a){if("perspective"===a.name)"undefined"!==typeof t&&o.push("perspective(".concat(t).concat(n[a.unit],")"));else if("undefined"!==typeof e[a.name]){var r=isNaN(e[a.name])?0:e[a.name];o.push("".concat(a.name,"(").concat(r).concat(a.unit?n[a.unit]:"",")"))}})),o.join(" ")},De=n(41),Re=n.n(De),_e=Re()({getInitialState:function(){return{style:{zIndex:2}}},componentDidMount:function(){this._isMounted=!0},componentWillReceiveProps:function(e){var t=this;K()(e,this.props)||requestAnimationFrame((function(){t.setEndStyle(e,2)}))},componentWillUnmount:function(){this._isMounted=!1,clearTimeout(this.leaveTimeout)},componentWillAppear:function(e){this.setEndStyle(this.props,2),e()},componentWillEnter:function(e){var t=this,n=this._isLeaving;this._isLeaving=!1,clearTimeout(this.leaveTimeout);var o=this.props,a=o.position,r=o.gridProps,i=o.gridState;requestAnimationFrame((function(){n||t.setState({style:Object(I.a)(Object(I.a)(Object(I.a)({},t.state.style),Le(a)),{},{zIndex:1},r.enter(t.props,r,i))}),e()}))},componentDidEnter:function(){var e=this;requestAnimationFrame((function(){requestAnimationFrame((function(){e.setEndStyle(e.props,1)}))}))},componentWillLeave:function(e){var t=this;this._remove=e;var n=this.props,o=n.gridProps,a=n.gridState;requestAnimationFrame((function(){t._isMounted&&(t._isLeaving=!0,t.setState({style:Object(I.a)(Object(I.a)({},t.state.style),{},{zIndex:0},o.exit(t.props,o,a))}),t.leaveTimeout=setTimeout(e,t.props.duration))}))},setEndStyle:function(e,t){if(clearTimeout(this.leaveTimeout),this._remove)return this._remove(),void(this._remove=null);if(this._isMounted){var n=e.position,o=e.gridProps,a=e.gridState;this.setState({style:Object(I.a)(Object(I.a)(Object(I.a)({},this.state.style),{},{zIndex:t},o.entered(e,o,a)),Le(n))})}},render:function(){var e=p.a.Children.only(this.props.children),t=e.props.style,n=this.props,o=n.transition,a=n.perspective,r=n.lengthUnit,i=n.angleUnit,c=this.state.style,s=c.translateX,u=c.translateY,l=c.opacity,d=c.zIndex;if("undefined"===typeof s||"undefined"===typeof u)return null;var f=Te(this.state.style,a,{length:r,angle:i});return p.a.cloneElement(e,{style:Object(I.a)(Object(I.a)({},t),{},{position:"absolute",top:0,left:0,zIndex:d,opacity:l,transform:f,transition:o,WebkitTransform:f,WebkitTransition:o})})}}),Pe=Re()({propTypes:Object(I.a)(Object(I.a)({},ae),{},{duration:Q.a.number.isRequired,easing:Q.a.string}),getDefaultProps:function(){return Object(I.a)(Object(I.a)({},re),{},{easing:le})},componentWillMount:function(){this.setState(this.doLayout(this.props))},componentWillReceiveProps:function(e){K()(e,this.props)||this.setState(this.doLayout(e))},doLayout:function(e){var t=e.layout(p.a.Children.toArray(e.children).map((function(e){return Object(I.a)(Object(I.a)({},e.props),{},{key:e.key})})),e),n=t.positions;return{gridWidth:t.gridWidth,gridHeight:t.gridHeight,positions:n}},render:function(){var e=this,t=this.props,n=t.component,o=t.style,a=t.children,r=t.duration,i=t.easing,c=t.lengthUnit,s=Object(T.a)(t,["component","style","children","duration","easing","lengthUnit"]),u=p.a.Children.toArray(a),l=this.state,d=l.positions,f=l.gridWidth,h=l.gridHeight,g=["opacity","transform"].map((function(e){return"".concat(e," ").concat(r,"ms ").concat(i)})).join(", "),m=u.map((function(t,n){return p.a.createElement(_e,Object.assign({key:t.key,position:d[n]},e.props,{transition:g,gridProps:e.props,gridState:e.state}),t)}));return p.a.createElement(X.a,Object.assign({component:n,style:Object(I.a)(Object(I.a)({position:"relative"},o),{},{width:"".concat(f).concat(c),height:"".concat(h).concat(c)})},s),m)}}),We=n(156),Ne=n(71),He=n.n(Ne),ze=Re()({propTypes:Object(I.a)(Object(I.a)({},ae),{},{springConfig:Q.a.shape({stiffness:Q.a.number,damping:Q.a.number,precision:Q.a.number})}),getDefaultProps:function(){return Object(I.a)(Object(I.a)({},re),{},{springConfig:{stiffness:60,damping:14,precision:.1}})},componentWillMount:function(){this.setState(this.doLayout(this.props))},componentWillReceiveProps:function(e){K()(e,this.props)||this.setState(this.doLayout(e))},doLayout:function(e){var t=p.a.Children.toArray(e.children).map((function(e){return{key:e.key,data:{element:e}}})),n=e.layout(t.map((function(e){return Object(I.a)(Object(I.a)({},e.data.element.props),{},{key:e.data.element.key})})),e),o=n.positions,a=n.gridWidth,r=n.gridHeight;return{styles:o.map((function(n,o){return Object(I.a)(Object(I.a)({},t[o]),{},{style:Object(I.a)(Object(I.a)(Object(I.a)({},t[o].style),{},{zIndex:2},Fe(e.entered(t[o].data.element.props,e,{gridWidth:a,gridHeight:r}),e.springConfig)),Fe(Le(n),e.springConfig))})})),gridWidth:a,gridHeight:r}},willEnter:function(e){var t=this.state,n=t.gridWidth,o=t.gridHeight;return Object(I.a)(Object(I.a)({},He()(e.style)),{},{zIndex:1},this.props.enter(e.data.element.props,this.props,{gridWidth:n,gridHeight:o}))},willLeave:function(e){var t=this.state,n=t.gridWidth,o=t.gridHeight,a=this.props.exit(e.data.element.props,this.props,{gridWidth:n,gridHeight:o});return Object(I.a)(Object(I.a)({},e.style),{},{zIndex:0},Fe(a,this.props.springConfig))},render:function(){var e=this,t=this.props,n=t.component,o=t.style,a=t.perspective,r=t.lengthUnit,i=t.angleUnit,c=Object(T.a)(t,["component","style","perspective","lengthUnit","angleUnit"]);return p.a.createElement(We.TransitionMotion,{styles:this.state.styles,willEnter:this.willEnter,willLeave:this.willLeave},(function(t){return p.a.createElement(n,Object(I.a)({style:Object(I.a)(Object(I.a)({position:"relative"},o),{},{width:"".concat(e.state.gridWidth).concat(r),height:"".concat(e.state.gridHeight).concat(r)})},c),t.map((function(e){var t=e.style,n=t.opacity,o=t.zIndex,c=e.data,s=Te(e.style,a,{length:r,angle:i});return p.a.cloneElement(c.element,{style:Object(I.a)(Object(I.a)({},c.element.props.style),{},{position:"absolute",top:0,left:0,zIndex:o,opacity:n,transform:s,WebkitTransform:s,msTransform:s})})})))}))}});function Fe(e,t){return Object.keys(e).reduce((function(n,o){return n[o]=Object(We.spring)(e[o],t),n}),{})}var Ge=n(157),Be=n.n(Ge),Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxWidth,o=t.minPadding,a=void 0===o?0:o,r=t.defaultColumns,i=void 0===r?4:r;return Re()({getDefaultProps:function(){return{minPadding:0}},getInitialState:function(){return{columns:i}},componentWillMount:function(){for(var e=this,t=this.props,o=t.columnWidth,r=t.gutterWidth,i=[],c=function(e){return e*(o+r)-r+a},s=1;c(s)<=n+o+r;s++)i.push(c(s));this.breakpoints=i.map((function(e,t,n){return["screen",t>0&&"(min-width: ".concat(n[t-1],"px)"),t<n.length-1&&"(max-width: ".concat(e,"px)")].filter(Boolean).join(" and ")})).map((function(t,n){return{breakpoint:t,handler:function(){return e.setState({columns:n})}}})),this.breakpoints.forEach((function(e){var t=e.breakpoint,n=e.handler;return Be.a.register(t,{match:n})}))},componentWillUnmount:function(){this.breakpoints.forEach((function(e){var t=e.breakpoint,n=e.handler;return Be.a.unregister(t,n)}))},render:function(){return p.a.createElement(e,Object.assign({},this.props,this.state))}})},Ye=n(294),Ve=n.n(Ye),qe=n(295),Xe=n.n(qe),Je=n(296),Ke=n.n(Je),Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.measureImages,o=t.background;return Re()({getDefaultProps:function(){return{component:"span"}},getInitialState:function(){return{rects:{}}},componentWillMount:function(){this._updateRectsDebounced=Ke()(this.updateRects,20),this._rects={},this._loading={}},componentDidMount:function(){this.measureElements()},componentDidUpdate:function(){this.measureElements()},measureElements:function(){var e=this;if(this._elementsToMeasureContainer){var t=this._elementsToMeasureContainer.children;t.length&&(n?Array.from(t).filter((function(t){return!e._loading[t.dataset.stonecutterkey]})).forEach((function(t){e._loading[t.dataset.stonecutterkey]=!0,Ve()(t,{background:o},(function(){e._rects[t.dataset.stonecutterkey]=t.getBoundingClientRect(),delete e._loading[t.dataset.stonecutterkey],e._updateRectsDebounced()}))})):(this._rects=Array.from(t).reduce((function(e,t){return e[t.dataset.stonecutterkey]=t.getBoundingClientRect(),e}),{}),this.updateRects()))}},updateRects:function(){this.setState({rects:Object(I.a)(Object(I.a)({},this.state.rects),this._rects)}),this._rects={}},render:function(){var t=this,n=this.props.component,o=Xe()(p.a.Children.toArray(this.props.children),(function(e){return!t.state.rects[e.key]})),a=Object(v.a)(o,2),r=a[0],i=a[1],c=r.map((function(e){return p.a.cloneElement(e,{style:Object(I.a)(Object(I.a)({},e.props.style),{},{width:t.props.columnWidth}),"data-stonecutterkey":e.key})})),s=i.map((function(e){return p.a.cloneElement(e,{itemRect:t.state.rects[e.key]})}));return p.a.createElement("span",null,s.length>0&&p.a.createElement(e,this.props,s),c.length>0&&p.a.createElement(n,{style:{width:0,height:0,padding:0,margin:0,overflow:"hidden",visibility:"hidden"},ref:function(e){t._elementsToMeasureContainer=e}},c))}})};function Qe(e){for(var t=[],n=0;n<e;n++)t.push({filled:!1});return t}function $e(e,t){return e.findIndex((function(e){for(var n=0,o=0,a=e.length;o<a;o++)if(e[o].filled||n++,n>=t)return!0;return!1}))}var et=function(){return{rotateX:-90,scale:1,opacity:1}},tt=function(){return{rotateX:-90,scale:0,opacity:0}},nt=function(){return{rotateX:0,scale:1,opacity:1}},ot=function(e,t,n){var o=t.columns,a=t.columnWidth;return{translateX:(o*a+(o-1)*t.gutterWidth-a)/2,translateY:n.gridHeight/2,scale:0,opacity:0}},at=ot,rt=ot,it=function(){return{scale:1,opacity:1}},ct=function(){return{translateX:-500,opacity:0}},st=function(e,t,n){return{translateX:n.gridWidth+500,opacity:0}},ut=function(){return{opacity:1}},lt=function(){return{translateY:0,opacity:0}},dt=lt,ft=lt,pt=function(){return{opacity:1}},ht=function(e,t,n){return{translateY:n.gridHeight+500,opacity:0}},gt=ht,mt=ht,vt=function(){return{opacity:1}},bt=function(){return{scale:0,opacity:0,rotate:-720}},yt=function(){return{scale:0,opacity:0}},Ot=function(){return{scale:1,opacity:1,rotate:0}},St=function(){return{skew:90,rotate:45,scale:0,opacity:0}},Et=function(){return{skew:-90,rotate:-45,scale:0,opacity:0}},jt=function(){return{skew:0,rotate:0,scale:1,opacity:1}},Ct={CSSGrid:Pe,SpringGrid:ze,measureItems:Ze,makeResponsive:Ue,easings:a,layout:{horizontal:function(e,t){var n=t.columnWidth,o=t.itemHeight,a=void 0===o?150:o,r=t.columns,i=t.gutterWidth,c=t.gutterHeight,s=0,u=[];return u.push(Qe(r)),{positions:e.map((function(e){var t=e.dataRatio||1,o=s+t,l=$e(u,t);-1===l&&(u.push(Qe(r)),l=$e(u,t));var d=function(e,t,n){for(var o=0,a={index:0,blocked:!1},r=e[t],i=0,c=r.length;i<c;i++)if(o<n&&!r[i].filled&&(a.blocked||(a.index=i,a.blocked=!0),r[i].filled=!0,o++),o===n)return a.index}(u,l,t);return s=o,[d*n+d*i,l*a+l*c]})),gridWidth:r*n+(r-1)*i,gridHeight:u.length*(a+c)-c}},pinterest:function(e,t){for(var n=t.columns,o=t.columnWidth,a=t.gutterWidth,r=t.gutterHeight,i=[],c=0;c<n;c++)i.push(0);return{positions:e.map((function(e){var t=i.indexOf(Math.min.apply(null,i)),n=e.itemHeight||e.itemRect&&e.itemRect.height;if(!n||"number"!==typeof n)throw new Error('Each child must have an "itemHeight" prop or an "itemRect.height" prop.');var c=t*o+t*a,s=i[t];return i[t]+=Math.round(n)+r,[c,s]})),gridWidth:n*o+(n-1)*a,gridHeight:Math.max.apply(null,i)-r}},simple:$},enterExitStyle:{foldUp:r,fromCenter:i,fromLeftToRight:c,fromTop:s,fromBottom:u,newspaper:l,simple:o,skew:d}},wt=(n(420),n(297)),kt=n.n(wt),Mt=(n(438),n(27)),xt=n.n(Mt);function It(e,t){var n=e.length,o={},a=[];t>n&&(t=n);for(var r=0;r<t;r++){var i=void 0;do{i=~~(Math.random()*n)}while(i in o);o[i]=null,a.push(e[i])}return a}function At(e,t,n,o,a){return(e-t)*(a-o)/(n-t)+o}var Lt=function(e){var t=e.sampleData,n=e.sampleProgress,o=Object(f.useState)(!1),a=Object(v.a)(o,2),r=a[0],i=a[1],c=t.length,s=t.svgPath,u=xt()("waveform-container",{"popup-3d":r}),l=At(c,0,3,0,400),d=At(n,0,1,0,l+10),h="playHeadMask_".concat(t.length),g="url(#".concat(h,")");return console.log(h),console.log(g),p.a.createElement("div",{className:u,onMouseEnter:function(e){i(!0)},onMouseLeave:function(e){i(!1)}},p.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:function(e){return"0 0 ".concat(At(e,0,3,0,400)," 100.0")}(c),style:{width:"fit-content",height:90}},p.a.createElement("defs",null,p.a.createElement("linearGradient",{x1:".258%",y1:"49.75%",x2:"101.258%",y2:"49.75%",id:"bgGradient"},p.a.createElement("stop",{offset:"20.525%","stop-color":"#3023AE"}),p.a.createElement("stop",{offset:"47.525%","stop-color":"#53A0FD"})),p.a.createElement("clipPath",{id:h},p.a.createElement("path",{d:s})),p.a.createElement("filter",{id:"blur"},p.a.createElement("feGaussianBlur",{stdDeviation:"2"}))),p.a.createElement("g",{transform:"translate(0 50)"},p.a.createElement("path",{d:s,stroke:"red",fill:"url(#bgGradient)",strokeWidth:0}),p.a.createElement("rect",{filter:"url(#blur)",x:d-10,y:-100,id:"playhead",width:10,fill:"white",height:400,clipPath:g}))))},Tt=function(e){var t=e.distance,n={position:"absolute",left:"".concat(100*t,"%"),width:2,height:"100%"};return p.a.createElement("div",{style:n},t)},Dt=function(e){var t=e.sampleData,n=(e.url,e.label,Object(f.useState)(0)),o=Object(v.a)(n,2),a=o[0],r=o[1];var i=Object(f.useState)(!1),c=Object(v.a)(i,2),s=c[0],u=c[1];return p.a.createElement("div",{onClick:function(e){u(!s)},className:"sample-container"},p.a.createElement(Tt,{distance:a}),p.a.createElement(kt.a,{playing:s,width:10,height:10,progressInterval:1,onProgress:function(e){var t=e.played;e.playedSeconds,e.loaded,e.loadedSeconds;r(t)},url:t.src}),p.a.createElement(Lt,{sampleData:t,sampleProgress:a}))},Rt=function(e){e.dndType;var t=e.className,n=e.children,o=e.dragAll,a=Object(T.a)(e,["dndType","className","children","dragAll"]);return console.log(p.a.isValidElement(n)),p.a.isValidElement(n)?p.a.createElement(m.b,Object.assign({},a,{disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0}),(function(e,a){var r=o?e.dragHandleProps:{};return a.isDragging?g.a.createPortal(p.a.createElement(p.a.Fragment,null,p.a.createElement("div",Object.assign({className:t,ref:e.innerRef},e.draggableProps,r),p.a.cloneElement(n,{provided:e})),p.a.createElement("div",{style:{display:a.isDragging?"block":"none",backgroundColor:a.isDragging?"green":"none"}},p.a.cloneElement(n,{provided:e}))),document.body):p.a.createElement(p.a.Fragment,null,p.a.createElement("div",Object.assign({className:t,ref:e.innerRef},e.draggableProps,r),p.a.cloneElement(n,{provided:e})),p.a.createElement("div",{style:{display:a.isDragging?"block":"none",backgroundColor:a.isDragging?"green":"none"}},p.a.cloneElement(n,{provided:e})))})):p.a.createElement("div",null)};Rt.defaultProps={dragAll:!0};var _t,Pt,Wt=p.a.memo(Rt),Nt=function(e){var t=e.sampleData,n=(e.droppableId,e.draggableId),o=e.index;return p.a.createElement(Wt,{index:o,draggableId:n,dndType:E.SampleTraySample},p.a.createElement(Dt,{sampleData:t,label:n}))},Ht=p.a.memo(Nt),zt=n(47),Ft=n(23),Gt=n(24),Bt=n(308),Ut=n(306),Yt=n(298),Vt=n.n(Yt),qt=function(e){Object(Bt.a)(n,e);var t=Object(Ut.a)(n);function n(){return Object(Ft.a)(this,n),t.apply(this,arguments)}return Object(Gt.a)(n,[{key:"componentWillMount",value:function(){var e=Pe;e=Ze(e),e=Ue(e),this.setState({Grid:e}),this.createGrid(this.props)}},{key:"componentWillReceiveProps",value:function(e){Vt()(e,this.props,(function(e,t,n){if("children"===n)return!0}))||this.createGrid(e)}},{key:"createGrid",value:function(e){var t=e.useCSS,n=e.measured,o=e.responsive,a=t?Pe:ze;n&&(a=Ze(a)),o&&(a=Ue(a,{maxWidth:1920,minPadding:100})),this.setState({Grid:a})}},{key:"render",value:function(){var e,t=this.props,n=t.children,o=t.useCSS,a=(t.responsive,t.layout),r=t.enterExitStyle,i=t.duration,c=t.easing,s=t.stiffness,u=t.damping,l=t.gutters,d=t.columnWidth,f=(t.columns,Object(T.a)(t,["children","useCSS","responsive","layout","enterExitStyle","duration","easing","stiffness","damping","gutters","columnWidth","columns"])),h=this.state.Grid,g=Ct.layout[a],m=Ct.enterExitStyle[r];return p.a.createElement(h,Object.assign({},f,(e={className:"grid",component:"ul",columns:9,columnWidth:d,gutterWidth:l,gutterHeight:l,layout:g,enter:m.enter,entered:m.entered,exit:m.exit,perspective:1e3,duration:200},Object(zt.a)(e,"duration",o?i:null),Object(zt.a)(e,"easing",o?c:null),Object(zt.a)(e,"springConfig",!o&&s&&u?{stiffness:s,damping:u}:null),e)),n)}}]),n}(p.a.Component),Xt=function(e){var t=e.activeTags,n=S((function(e){return e.samplesModel.samples})),o=Object(f.useState)(n),a=Object(v.a)(o,2),r=a[0],i=a[1],c={useCSS:!1,responsive:!0,layout:"horizontal",enterExitStyle:"simple",duration:400,stiffness:60,damping:14,columns:20,gutters:5,easing:"cubic-bezier(0.215, 0.61, 0.355, 1)",columnWidth:15},s={isDropDisable:!0,dropCategory:E.SampleTraySample,droppableId:"Sample Tray",direction:"horizontal",isCombineOnly:!0,disabled:!0};return Object(f.useEffect)((function(){if(console.log("using effect in samplelayout after tag change"),console.log(t),t.length>0){var e=n.filter((function(e){return!(!e.tags||(console.log(t),!t.every((function(t){return e.tags.includes(t)}))))}));console.log(e),i(e),console.log(r)}else i(n)}),[t]),Object(f.useEffect)((function(){i(n)}),[n]),p.a.createElement(D,s,p.a.createElement(qt,Object.assign({},c,{itemHeight:100,measured:!0}),r.map((function(e,t){var n=Jt(e);return p.a.createElement("li",{className:"grid-item",key:t,dataRatio:n,style:{width:15*n+5*(n-1),height:100}},p.a.createElement("div",{key:e.id,className:"layout-grid-item"},p.a.createElement(Ht,{key:e.id,sampleData:e,index:t,droppableId:t+"_drop",draggableId:t+"_drag"})))}))))},Jt=function(e){var t=At(e.length,0,4,5,9);return Math.round(t)},Kt=n(299),Zt=n.n(Kt),Qt=(n(452),n(660)),$t=n(661),en=n(300),tn=function(e){var t="";switch(e){case"FD":t="Folk Dance";break;case"MR":t="Medium Register";break;case"HR":t="High Register";break;case"ST":t="Short Tone";break;case"LT":t="Long Tone";break;case"LR":t="Lower Register";break;case"M":t="Melancholy";break;case"E":t="Ethereal";break;case"LR":t="Lower Register";break;case"MIX":t="Mixed Tone";break;case"C":t="Chord";break;default:t=e}return t},nn=function(e){var t=e.tag;return p.a.createElement("div",{style:{height:200,width:400,boxShadow:"-1px 15px 30px -12px black",backgroundColor:"linear-gradient(to bottom, rgba(140,122,122,1) 0%, rgba(175,135,124,1) 65%, rgba(175,135,124,1) 100%) fixed;"}},p.a.createElement(M,{column:!0,padding:"2em",backgroundColor:"red"},p.a.createElement(Qt.a,{size:500},tn(t)),p.a.createElement($t.a,null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.")))},on=function(e){var t=e.tag,n=e.onMouseUp,o=e.active,a=tn(t);console.log(t),console.log(a);var r={height:20,width:"fit-content",backgroundColor:o?"orange":"grey",borderRadius:4,lineHeight:1.2,fontWeight:400,paddingLeft:5,paddingRight:5};return p.a.createElement("div",{onMouseUp:function(e){console.log("got mouseup"),n(t)},style:{paddingRight:".5em"}},p.a.createElement(en.a,{trigger:function(e){return p.a.createElement("button",{style:r},tn(t))},on:"hover",position:"top center",closeOnDocumentClick:!0},p.a.createElement(nn,{tag:t})))},an=["FD","MR","HR","ST","LT","MIX","LR","E","M","3L","2L","1L","4L","FL","C"],rn=function(e){e.onTagClick;var t=e.tagsState,n=e.actions,o=Object(f.useState)(!1),a=Object(v.a)(o,2),r=(a[0],a[1]);return p.a.createElement("div",{className:"tag-bar-container"},an.map((function(e,o){return p.a.createElement(on,{onMouseUp:function(e){var o;o=e,console.log(an),t.includes(o)?(n.removeTag(o),r(!1)):(n.addTag(o),r(!0))},key:o,tag:e,active:t.includes(e)})})))},cn=n(307),sn=function(){var e=function(e){var t=Object(f.useState)(e),n=Object(v.a)(t,2),o=n[0],a=n[1];return[o,function(){return a(!o)}]}(!1),t=Object(v.a)(e,2),n=t[0],o=t[1],a=Object(b.i)((function(){return{tags:[],addTag:Object(b.b)((function(e,t){e.tags.push(t)})),removeTag:Object(b.b)((function(e,t){e.tags=e.tags.filter((function(e){return e!==t}))}))}})),r=Object(v.a)(a,2),i=r[0],c=r[1],s=xt()("sample-tray-container",{"sample-tray-hidden":n}),u=(Object(f.useRef)(),Object(f.useState)("none")),l=Object(v.a)(u,2),d=l[0],h=l[1];Object(f.useEffect)((function(){console.log("setting tray filter to ".concat(d))}),[d]);var g=Object(cn.a)({keyCode:70,action:function(){console.log("doing submit"),o()},disabled:!1});g.enable,g.disable;return p.a.createElement(M,{className:s},p.a.createElement(U,{onMouseUp:o}),p.a.createElement(M,{column:!0,backgroundColor:"white",className:"sample-tray-inner-container"},p.a.createElement(V,null,p.a.createElement(rn,{tagsState:i.tags,actions:c,onTagClick:function(e){h(e)}})),p.a.createElement(Zt.a,{style:{width:"100%",height:400}},p.a.createElement(Xt,{activeTags:i.tags}))))},un=function(e){var t,n;if(console.log(e),(null===(t=e.destination)||void 0===t?void 0:t.droppableId)!=(null===(n=e.source)||void 0===n?void 0:n.droppableId)){var o=e.source,a=e.destination,r=e.draggableId;console.log(o,a,r),console.log("dragged from ".concat(r," to ").concat(null===a||void 0===a?void 0:a.droppableId," current title: ","yes"))}},ln=function(){var e=O((function(e){return e.googleSheetsModel.fetchAppGoogleSheet})),t=O((function(e){return e.compositionsModel.processCompositions})),n=O((function(e){return e.googleSheetsModel.fetchCompositionsSheet})),o=O((function(e){return e.googleSheetsModel.fetchSamplesSheet}));return Object(f.useEffect)((function(){e(),t(),n(),o()}),[e]),p.a.createElement(m.a,{onBeforeDragStart:function(e){console.log(e);e.source},onDragEnd:un},p.a.createElement("div",{className:"App"},p.a.createElement(z,null),p.a.createElement(sn,null)))},dn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,664)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),r(e),i(e)}))},fn=n(7),pn=n.n(fn),hn=n(48),gn=n(50);!function(e){e.CROSS_ORIGIN="CROSS_ORIGIN"}(_t||(_t={})),function(e){e.MALFORMED_URL="MALFORMED_URL"}(Pt||(Pt={}));var mn=function(){function e(t){Object(Ft.a)(this,e),this.url=void 0,this.errors=void 0,this.warnings=void 0,this.errors=[],this.warnings=[],this.url=t}return Object(Gt.a)(e,[{key:"validate",value:function(e){var t,n,o=function(e){var t=[],n=e.target;try{var o;null===(o=n.contentWindow)||void 0===o||o.name}catch(a){if(!a.message.includes("cross-origin"))return[];console.log(a.message),t.push(_t.CROSS_ORIGIN)}return t}(e);console.log(o),(t=this.errors).push.apply(t,Object(gn.a)(o)),console.log(this.errors);var a=function(e){var t=[];new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)||t.push(Pt.MALFORMED_URL);return t}(this.url);(n=this.warnings).push.apply(n,Object(gn.a)(a)),console.log(a)}},{key:"isValid",value:function(){return 0==this.errors.length}},{key:"errorMessages",value:function(){var e=this,t=[];return this.errors.map((function(n){switch(n){case _t.CROSS_ORIGIN:t.push("Blocked a frame with origin ".concat(e.url,"; from accessing a cross-origin frame."));break;default:console.log("error did not match an error enum")}})),t}}]),e}();var vn=function(){function e(t){Object(Ft.a)(this,e),this.src=void 0,this.title=void 0,this.added=void 0,this.sourceId=void 0,this.author=void 0,this.interaction=void 0,this.validator=void 0,this.isActive=void 0,this.failed=void 0,this.src=t.src,this.title=t.title,this.added=new Date(t.added),this.sourceId=t.src,this.author=t.author,this.interaction=C[t.interaction],this.isActive=!1,this.validator=new mn(this.src),this.failed=!1}return Object(Gt.a)(e,[{key:"setActive",value:function(e){this.isActive=e}},{key:"fail",value:function(){console.log(this.validator.errors),this.failed=!0}}]),e}(),bn=function(){function e(){Object(Ft.a)(this,e),this.events=void 0,this.currentStep=void 0;this.events=[],this.currentStep=0}return Object(Gt.a)(e,[{key:"addEditEvent",value:function(e){this.currentStep+=1,this.events.push(e)}},{key:"undo",value:function(){return console.log(this.currentStep),this.currentStep-=1,this.events[this.currentStep]}},{key:"redo",value:function(){return console.log(this.currentStep),this.currentStep+=1,this.events[this.currentStep]}}]),e}(),yn={availableCards:[],activeCards:[],currentLayout:P,appMode:w.DISPLAY,history:new bn,manageViewModeChange:Object(b.g)((function(e,t){switch(console.log(t),e.setAppMode(t),t){case w.EDIT:case w.DISPLAY:case w.CYCLE:break;default:console.log("reached default in set view mode thunk")}})),toggleViewMode:Object(b.g)((function(e,t,n){var o=n.getState;switch(console.log("toggling view mod "),o().appMode){case w.EDIT:e.setAppMode(w.DISPLAY);break;case w.DISPLAY:e.setAppMode(w.EDIT);break;case w.CYCLE:break;default:console.log("reached default in set view mode thunk")}console.log(o().appMode)})),setCurrentLayout:Object(b.b)((function(e,t){e.currentLayout=t})),setAvailableCards:Object(b.b)((function(e,t){console.log("setting available cards"),e.availableCards=t})),setActiveCards:Object(b.b)((function(e,t){console.log("setting active cards"),console.log(t),e.activeCards=t})),setAppMode:Object(b.b)((function(e,t){console.log("setting view mode"),e.appMode=t})),onCardSheetLoadSuccess:Object(b.c)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){var n=t.payload.getSheetRows(0).map((function(e){return{src:e.src,title:e.title,added:e.added,sourceid:e.sourceid,author:e.author,interaction:e.interaction}})).map((function(e){return new vn(e)}));console.log(n),e.availableCards=n,console.log(Object(b.f)(e.availableCards))})),onSetActiveLayout:Object(b.h)((function(e,t){return t.layoutsModel.setActiveLayout}),function(){var e=Object(hn.a)(pn.a.mark((function e(t,n,o){var a,r,i,c;return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.getState,r=n.payload.sources().filter((function(e){return"clock"!==e})),i=a().availableCards.map((function(e){return r.includes(e.sourceId)?e.setActive(!0):e.setActive(!1),e})),c=a().availableCards.filter((function(e){return r.includes(e.sourceId)})),t.setAvailableCards(i),t.setActiveCards(c);case 6:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),registerCardLoadFailure:Object(b.g)((function(e,t,n){var o=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var a=o().activeCards,r=t.sourceId,i=a.map((function(e){return e.sourceId===r&&(console.log("found failed"),e.fail()),e}));e.setActiveCards(i)})),onSwapCardContent:Object(b.h)((function(e,t){return t.layoutsModel.swapCardContent}),function(){var e=Object(hn.a)(pn.a.mark((function e(t,n,o){var a,r;return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.getState,console.log("got swap card content"),console.log(n.payload),console.log(a().activeCards),(r=a().activeCards.map((function(e){if(e.sourceId===n.payload.targetId){var t=a().availableCards.find((function(e){return e.sourceId===n.payload.sourceId}));return console.log(t),t}return e})))&&t.setActiveCards(r),console.log(Object(b.f)(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),onUndoHistory:Object(b.h)((function(e,t){return t.historyModel.setCurrentHistory}),function(){var e=Object(hn.a)(pn.a.mark((function e(t,n){return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got undo"),console.log(n.payload),t.setCurrentLayout(n.payload),console.log(Object(b.f)(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),onRedoHistory:Object(b.h)((function(e,t){return t.historyModel.setCurrentHistory}),function(){var e=Object(hn.a)(pn.a.mark((function e(t,n){return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("got redo"),console.log(n.payload),t.setCurrentLayout(n.payload),console.log(Object(b.f)(n));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},On=n(109),Sn=n.n(On),En=n(302),jn=n.n(En),Cn=function(){function e(){var t=this;Object(Ft.a)(this,e),this.collectSamplePoints=function(e){var t=e.duration,n=e.duration,o=At(n,0,2.5,100,400);console.log(n);for(var a=[],r=0;r<10;r++){var i=.1*r*t,c=e.channel(0),s=e.at_time(i),u=c.max_sample(s),l=r/10,d=l*o;console.log(l);var f=At(u,0,100,0,40);f+=10;var p={x:d,y:Math.round(f)};a.push(p)}var h=a.map((function(e){return[e.x,e.y]}));h.push([h[h.length-1][0],0]);var g=a.map((function(e){return[e.x,0-e.y]})).reverse(),m=[g[g.length-1][0],h[0][1]];g.push(m);var v=[].concat(Object(gn.a)(h),Object(gn.a)(g));return jn.a.toPath(v,4,!0)},this.data=void 0,this.audioContext=void 0,this.getAudio=function(e){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(n){var o={audio_context:t.audioContext,array_buffer:n,scale:128};return new Promise((function(t,n){Sn.a.createFromAudio(o,(function(o,a){o?(console.error("FAILED TO CREATE AUDIO FROM URL ".concat(e)),n(o)):t(a)}))}))}))},this.data=[],this.audioContext=new AudioContext}return Object(Gt.a)(e,[{key:"generateSVG",value:function(e){var t=this;return console.log(e.src),this.getAudio(e.src).then((function(n){var o=t.collectSamplePoints(n);return e.setPath(o),e})).catch((function(t){return e}))}}]),e}();var wn=function(){function e(t,n){Object(Ft.a)(this,e),this.title=void 0,this.url=void 0,this.waveFormData=void 0,this.title=t,this.waveFormData,this.url=n}return Object(Gt.a)(e,[{key:"buildWaveform",value:function(){var e=this;return kn(this.url).then((function(t){return e.waveFormData=t,new Promise((function(e,n){e(t)}))}))}}]),e}(),kn=function(e){var t=new AudioContext;return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){var n={audio_context:t,array_buffer:e,scale:128};return new Promise((function(e,t){Sn.a.createFromAudio(n,(function(n,o){n?t(n):e(o)}))}))}))},Mn=[function(){var e="".concat("","/")+"BACH2.mp3",t=new wn("Bach Movement 2",e);return console.log(t),t}()],xn=n(74),In=n.n(xn),An={compositions:Mn,processCompositions:Object(b.g)((function(e,t,n){var o=n.getState;console.log("processing compositions");var a=o(),r=Object(I.a)({},a).compositions;console.log(r);var i=new Cn,c=r.map((function(e){return i.getAudio(e.url)}));Promise.allSettled(c).then((function(t){for(var n=[],o=0;o<t.length;o++){var a=t[o],i=Object(gn.a)(r)[o];console.log(a),"fulfilled"==a.status&&(i.waveFormData=a.value,n.push(i))}console.log("SETTINGS COMPOSITOINS"),console.log(n),e.setCompositions(n),e.downloadAnalysis()}))})),setCompositions:Object(b.b)((function(e,t){console.log("setting samples"),e.compositions=t})),downloadAnalysis:Object(b.b)((function(e){console.log(e.compositions[0].waveFormData.toJSON().data);var t=e.compositions.map((function(e){return{title:e.title,url:e.url,data:JSON.stringify(e.waveFormData)}})),n=In.a.unparse(t);console.log(t[0].data.length);new Blob([n],{type:"text/csv;charset=utf-8;"})}))},Ln={key:"1eq33_1yJS6EZjqBvxWgL7nDP0OxC8bMdJJqU7Akp_3E",sheet_number:1},Tn=n(303),Dn=function(){function e(t,n,o){Object(Ft.a)(this,e),this.title=void 0,this.sheetId=void 0,this.sheets=void 0,this.title=t,this.sheetId=n,this.sheets=o}return Object(Gt.a)(e,[{key:"getSheetRows",value:function(e){return this.sheets[e]}},{key:"loadSheets",value:function(e,t){var n=new Tn.GoogleSpreadsheet(e);n.useApiKey(t);var o=[];return n.loadInfo().then((function(){return n.sheetsByIndex.forEach((function(e){var t=e.getRows();console.log(t),o.push(t)})),o}))}}]),e}(),Rn={layoutDataGoogleSheet:null,cardDataGoogleSheet:null,appGoogleSheet:void 0,samplesSheet:[],compositionsSheet:void 0,fetchCompositionsSheet:Object(b.g)(function(){var e=Object(hn.a)(pn.a.mark((function e(t){var n;return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("FETCHING COMPOSITIONS SHEET"),n=Pn("/TEST_ANALYSIS.csv"),_n(n,(function(e){t.setCompositionsSheet(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchSamplesSheet:Object(b.g)(function(){var e=Object(hn.a)(pn.a.mark((function e(t){var n;return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Fetching Samples"),console.log("USING PREPROCESSED SAMPLE SHEET"),n=Pn("/CLIPS_4.csv"),_n(n,(function(e){t.setSamplesSheet(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchAppGoogleSheet:Object(b.g)(function(){var e=Object(hn.a)(pn.a.mark((function e(t){return pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dn.prototype.loadSheets(Ln.key,"AIzaSyBo7S3o_RHuyBnG3Z7ywlvz3FbtKU9n0MQ").then((function(e){Promise.all(e).then((function(e){var n=new Dn("DSC App",Ln.key,e);console.log(n),t.setAppGoogleSheetData(n)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setAppGoogleSheetData:Object(b.b)((function(e,t){e.appGoogleSheet=t})),setCardDataGoogleSheet:Object(b.b)((function(e,t){e.cardDataGoogleSheet=t})),setLayoutDataGoogleSheet:Object(b.b)((function(e,t){e.layoutDataGoogleSheet=t})),setCompositionsSheet:Object(b.b)((function(e,t){t.data=t.data})),setSamplesSheet:Object(b.b)((function(e,t){e.samplesSheet=t}))},_n=function(e,t){In.a.parse(e,{download:!0,header:!0,complete:function(e){console.log(e),t(e)}})},Pn=function(e){return e.endsWith(".csv")||console.error("Failed to load csv, wrong extension (not .csv)"),""+e},Wn={history:new bn,undoHistory:Object(b.g)((function(e,t,n){var o=n.getState;e.undoIt(),e.setCurrentHistory(o().history.undo())})),undoIt:Object(b.b)((function(e){e.history.undo(),console.log(e.history.currentStep)})),redoIt:Object(b.b)((function(e){e.history.redo(),console.log(e.history.currentStep)})),setCurrentHistory:Object(b.b)((function(e,t){console.log(t)})),addEditHistory:Object(b.b)((function(e,t){console.log("adding edit history"),console.log(t);var n=JSON.stringify(t);console.log(n),e.history.addEditEvent(t)}))},Nn=(n(304),function(){function e(t){Object(Ft.a)(this,e),this.title=void 0,this.author=void 0,this.added=void 0,this.id=void 0,this.layout=void 0,this.id=t.title+"_"+t.timestamp,this.title=t.title,this.author=t.author,this.added=new Date(t.timestamp.split(" ")[0]);var n=JSON.parse(t.layout);this.layout=n}return Object(Gt.a)(e,[{key:"swapCard",value:function(e){for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var o,a=Object(v.a)(n[t],2),r=a[0],i=a[1],c=Object(x.a)(i.entries());try{for(c.s();!(o=c.n()).done;){var s=Object(v.a)(o.value,2),u=s[0];s[1].i==e.targetId&&(i[u].i=e.sourceId)}}catch(l){c.e(l)}finally{c.f()}this.layout[r]=i}}},{key:"removeCard",value:function(e){console.log(this.layout);for(var t=0,n=Object.entries(this.layout);t<n.length;t++){var o,a=Object(v.a)(n[t],2),r=a[0],i=a[1],c=Object(x.a)(i.entries());try{for(c.s();!(o=c.n()).done;){var s=Object(v.a)(o.value,2);s[0],s[1];this.layout[r]=i.filter((function(t){return t.i!==e.sourceId}))}}catch(u){c.e(u)}finally{c.f()}}}},{key:"addCard",value:function(e,t){console.log("ADDING CARD AT LAYOUT DATA"),console.log(this.layout);for(var n=0,o=Object.entries(this.layout);n<o.length;n++){var a=Object(v.a)(o[n],2),r=a[0],i=(a[1],{x:t.x,y:t.y,w:1,h:1,i:e.sourceId});this.layout[r].push(i)}}},{key:"failCard",value:function(e){console.log("FAILING CARD AT LAYOUT DATA")}},{key:"setGridLayout",value:function(e){console.log(e),this.layout=e}},{key:"sources",value:function(){return Object.entries(this.layout)[0][1].map((function(e){return e.i}))}}]),e}());var Hn={activeLayout:void 0,externalLayouts:[],bufferLayout:P,tempLayout:P,onSetAppGoogleSheetData:Object(b.h)((function(e,t){return t.googleSheetsModel.setAppGoogleSheetData}),(function(e,t){var n=t.payload.getSheetRows(1).map((function(e){return{title:e.title,author:e.author,timestamp:e.timestamp,layout:e.layout,interaction:e.interaction}})).map((function(e){return new Nn(e)})),o=n[0];o.layout=P,e.setActiveLayout(o),e.setExternalLayouts(n),e.setBufferLayout(n[0].layout)})),onToggleViewModeListener:Object(b.h)((function(e,t){return t.appModel.toggleViewMode}),(function(e,t,n){var o=n.getState,a=n.getStoreState;console.log("listened to on toggle view mode in layout model, setting layout from buffer");var r=o().activeLayout,i=o().bufferLayout;a().appModel.appMode===w.DISPLAY&&(console.log("IT WAS IN DISPLAY MODE"),(null===r||void 0===r?void 0:r.layout)&&(r.layout=i,e.setActiveLayout(r)))})),setActiveLayout:Object(b.b)((function(e,t){e.activeLayout=t})),setExternalLayouts:Object(b.b)((function(e,t){console.log("setting external layouts"),e.externalLayouts=t})),swapCardContent:Object(b.g)((function(e,t,n){var o=n.getState,a=n.getStoreState,r=(n.getStoreActions,a(),o().activeLayout);if(r){var i=o().bufferLayout;r.layout=i,r.swapCard(t),e.setActiveLayout(r)}})),deleteCard:Object(b.g)((function(e,t,n){var o=n.getState;n.getStoreState,n.getStoreActions;console.log("deleting card at layotus model"),console.log(t);o().activeLayout;console.log("got here");var a=o().activeLayout;if(a){var r=o().bufferLayout;a.layout=r,a.removeCard(t),e.setActiveLayout(a)}})),addCard:Object(b.g)((function(e,t,n){var o=n.getState,a=n.getStoreState;console.log("adding card"),console.log(t);var r=a().appModel.availableCards,i=t.sourceId,c=t.targetPosition,s=r.find((function(e){return e.sourceId==i})),u=o().activeLayout;if(u&&s){var l=o().bufferLayout;console.log(Object(b.f)(l)),u.setGridLayout(l),null===u||void 0===u||u.addCard(s,c),e.setActiveLayout(u),console.log(s)}})),registerCardLoadFailure:Object(b.g)((function(e,t,n){var o=n.getState;n.getStoreState;console.log("Got card Register Load Failure at Layouts Model"),console.log(t);var a=o().activeLayout;a&&a.failCard(t)})),setBufferLayout:Object(b.b)((function(e,t){console.log("setting buffer layout"),console.log(t),e.bufferLayout=t})),setTempLayout:Object(b.b)((function(e,t){console.log("setting buffer layout"),console.log(t),e.tempLayout=t})),updateLayout:Object(b.b)((function(e,t){var n=e.activeLayout;n&&(n.swapCard(t),console.log(n.layout),e.activeLayout=n)}))},zn={data:[],setData:Object(b.b)((function(e,t){e.data=t}))},Fn=function e(t){var n=this;Object(Ft.a)(this,e),this.id=void 0,this.src=void 0,this.tags=void 0,this.svgPath=void 0,this.filename=void 0,this.length=void 0,this.composition=void 0,this.startTime=void 0,this.endTime=void 0,this.setPath=function(e){n.svgPath=e};var o=t.filename,a=t.tags,r=t.composition,i=(t.starTime,t.endTime,t.hour,t.svgPath),c=t.length,s="".concat("","/Clips/")+o,u=new Date("1995-12-17T03:24:00"),l=new Date("1995-12-17T03:24:01");this.src=s,this.tags=a.split(","),this.startTime=u,this.endTime=l,this.composition=r,this.filename=o,this.svgPath=i,this.length=c},Gn=["DNB_BREAK_134-1.wav","Samples/s1.wav"],Bn={samples:function(e){for(var t=[],n=(new Date("1995-12-17T03:24:00"),new Date("1995-12-17T03:24:01"),0);n<e;n++){var o="".concat("","/")+It(Gn,1)[0],a={composition:"placeHolderSample_".concat(n),starTime:"1995-12-17T03:24:00",endTime:"1995-12-17T03:24:01",tags:"MR, FD",date:"2021-09-24",hour:"222332",svgPath:"",length:1,filename:o},r=(It(an,3),new Fn(a));t.push(r)}return t}(30),onSetSamplesSheets:Object(b.h)((function(e,t){return t.googleSheetsModel.setSamplesSheet}),(function(e,t){console.log(t.payload);var n=t.payload,o=n.map((function(e){return new Fn(e)}));e.setSamples(o)})),processSamples:Object(b.g)((function(e,t,n){var o=n.getState;console.log("processing samples");var a=o(),r=Object(I.a)({},a).samples;console.log(r);var i=new Cn,c=r.map((function(e){return i.generateSVG(e)}));Promise.allSettled(c).then((function(t){var n,o=[],a=Object(x.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;"fulfilled"===r.status&&o.push(r.value)}}catch(i){a.e(i)}finally{a.f()}e.setSamples(o)})),console.log(c)})),loadSamples:Object(b.g)((function(e){console.log("processing samples")})),setSamples:Object(b.b)((function(e,t){console.log("setting samples"),e.samples=t}))},Un={appModel:yn,historyModel:Wn,layoutsModel:Hn,googleSheetsModel:Rn,samplesModel:Bn,compositionsModel:An,logModel:zn},Yn=n(305),Vn=n.n(Yn);var qn=Object(b.d)(Un,{devTools:!1,middleware:[Vn.a]});g.a.render(p.a.createElement(b.a,{store:qn},p.a.createElement(ln,null)),document.getElementById("root")),dn()}},[[653,1,2]]]);
//# sourceMappingURL=main.e717f58a.chunk.js.map